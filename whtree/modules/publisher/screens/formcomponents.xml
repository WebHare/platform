<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:p="http://www.webhare.net/xmlns/publisher/components"
         gid="formcomponents">

  <tabsextension name="formpage" gid=".page" implementation="lib" lib="webtools/formcomponents/page.whlib">
    <insert position="titles" where="after">
      <textedit name="pagetitle" width="1pr" visible="false" />
    </insert>
  </tabsextension>

  <tabsextension name="formoverviewpage" gid=".page" implementation="lib" lib="webtools/formcomponents/page.whlib">
    <insert position="titles" where="after">
      <textedit name="pagetitle" width="1pr" visible="false" />
    </insert>
  </tabsextension>

  <tabsextension name="formthankyoupage" gid=".page" implementation="lib" lib="webtools/formcomponents/page.whlib">
    <insert position="titles" where="after">
      <textedit name="pagetitle" width="1pr" visible="false" />
    </insert>
    <newtab tid=".redirection">
      <line layout="left">
        <text tid=".redirect" />
      </line>
      <p:intextlink name="redirect" title="" />
    </newtab>
  </tabsextension>

  <tabsextension name="formgroup" gid=".group" implementation="lib" lib="webtools/formcomponents/group.whlib">
    <insert position="presentation" where="after">
      <select name="blockstyle" type="pulldown" />
    </insert>
  </tabsextension>

  <tabsextension name="formhidden" gid=".hidden" implementation="lib" lib="webtools/formcomponents/hidden.whlib">
    <!-- Insert after 'titles' instead of 'answers', so we can use our own 'Answer' heading instead of 'Answers' -->
    <insert position="titles" where="after">
      <heading tid=".answer" />
      <textedit name="value" width="1pr" />
    </insert>
  </tabsextension>

  <tabsextension name="formnumerictextedit" gid=".textedit" implementation="lib" lib="webtools/formcomponents/textedit.whlib">
    <insert position="validation" where="after">
      <!-- Using -1000000001 as emptyvalue so users can explicitly these values to 0 -->
      <panel layout="form">
        <textedit name="minvalue"
                  width="12x"
                  minvalue="-1000000000"
                  maxvalue="1000000000"
                  emptyvalue="-1000000001"
                  value="0"
                  valuetype="integer" />
        <textedit name="maxvalue"
                  width="12x"
                  minvalue="-1000000000"
                  maxvalue="1000000000"
                  emptyvalue="-1000000001"
                  value="1000000000"
                  valuetype="integer" />
      </panel>
    </insert>
    <insert position="advanced" where="after">
      <textedit name="emptyvalue"
                width="12x"
                minvalue="-1000000000"
                maxvalue="1000000000"
                emptyvalue="-1000000001"
                value="-1000000001"
                valuetype="integer" />
    </insert>
  </tabsextension>

  <tabsextension name="formemail" gid=".textedit" implementation="lib" lib="webtools/formcomponents/textedit.whlib">
    <insert position="validation" where="after">
      <!-- Using -1000000001 as emptyvalue so users can explicitly these values to 0 -->
      <heading name="limitacceptableemails" checkbox="true" enablecomponents="acceptableemailmasks unacceptableemailerror" />
      <arrayedit name="acceptableemailmasks"
                 height="1pr"
                 minheight="6gr"
                 errorlabeltid=".acceptableemailmasks"
                 minrows="1"
                 roweditscreen="#editemailmask">
        <column name="emailmask" type="text" tid="~email" />
      </arrayedit>
      <textedit name="unacceptableemailerror" width="1pr" />
    </insert>
  </tabsextension>

  <screen name="editemailmask" footerbuttons="ok cancel" implementation="rowedit">
    <compositions>
      <record name="row" />
    </compositions>

    <body>
      <textedit composition="row"
                cellname="emailmask"
                width="1pr"
                minwidth="30x"
                placeholdertid=".emailmask-placeholder"
                required="true" />
    </body>
  </screen>

  <tabsextension name="formtextedit" gid=".textedit" implementation="lib" lib="webtools/formcomponents/textedit.whlib">
    <insert position="validation" where="after">
      <panel name="maxlengthoptions">
        <line>
          <checkbox name="usemaxlength" enablecomponents="maxlength" labeltid=".maxlength" title="" />
          <textedit name="maxlength" width="10x" minvalue="0" emptyvalue="0" title="" valuetype="integer" />
          <text title="" valuetid=".characters" />
        </line>
      </panel>
      <select name="validationchecks" type="pulldown">
        <option rowkey="" tid=".none" />
        <option rowkey="emails" />
        <option rowkey="url-plus-relative" />
        <option rowkey="http-url" />
      </select>
    </insert>
  </tabsextension>

  <tabsextension name="formtextarea" gid=".textarea" implementation="lib" lib="webtools/formcomponents/textarea.whlib">
    <insert position="validation" where="after">
      <panel name="maxlengthoptions">
        <line>
          <checkbox name="usemaxlength" enablecomponents="maxlength" labeltid=".maxlength" title="" />
          <textedit name="maxlength" width="10x" minvalue="0" emptyvalue="0" title="" valuetype="integer" />
          <text title="" valuetid=".characters" />
        </line>
      </panel>
    </insert>
  </tabsextension>

  <tabsextension name="formrtd" gid=".rtd" implementation="lib" lib="webtools/formcomponents/rtd.whlib">
    <insert position="advanced" where="after">
      <select name="rtdtype" type="pulldown" required="true" />
    </insert>
  </tabsextension>

  <tabsextension name="formdate" gid=".date" implementation="lib" lib="webtools/formcomponents/date.whlib">
    <insert position="validation" where="after">
      <line>
        <date name="minvalue" />
        <checkbox name="minnow" labeltid=".now" onchange="onminnowselect" title="" />
        <textedit name="minrel" width="10x" emptyvalue="0" title="" valuetype="integer" />
        <text name="minrel_days" title="" valuetid=".days" />
      </line>
      <line>
        <date name="maxvalue" />
        <checkbox name="maxnow" labeltid=".now" onchange="onmaxnowselect" title="" />
        <textedit name="maxrel" width="10x" emptyvalue="0" title="" valuetype="integer" />
        <text name="maxrel_days" title="" valuetid=".days" />
      </line>
    </insert>
  </tabsextension>

  <tabsextension name="formtime" gid=".time" implementation="lib" lib="webtools/formcomponents/time.whlib">
    <insert position="answers" where="after">
      <select name="precision" type="pulldown">
        <option rowkey="minutes" />
        <option rowkey="seconds" />
      </select>
    </insert>
  </tabsextension>

  <tabsextension name="formselectpulldown"
                 allowresize="true"
                 gid=".select"
                 implementation="lib"
                 lib="webtools/formcomponents/select.whlib">
    <insert position="answers" where="after">
      <panel>
        <select name="rowkeytype" type="pulldown" onchange="onrowkeytypeselect" visible="false">
          <option rowkey="string" />
          <option rowkey="integer" />
          <option rowkey="boolean" />
        </select>
      </panel>
      <arrayedit name="options"
                 height="1pr"
                 minwidth="65x"
                 errorlabeltid="tolliumapps.formedit.editcomponent.answers"
                 highlightname="selected"
                 onmaprows="mapoptions"
                 onrowedit="oneditselectoption"
                 orderable="true">
        <column name="title" type="text" width="2pr" />

        <!-- column name="value" type="text" width="1pr" / -->
      </arrayedit>
    </insert>
  </tabsextension>

  <tabsextension name="formselectradio" gid=".select" implementation="lib" lib="webtools/formcomponents/select.whlib">
    <insert position="answers" where="after">
      <panel>
        <select name="rowkeytype" type="pulldown" onchange="onrowkeytypeselect" visible="false">
          <option rowkey="string" />
          <option rowkey="integer" />
          <option rowkey="boolean" />
        </select>
      </panel>
      <arrayedit name="options"
                 height="1pr"
                 minwidth="65x"
                 errorlabeltid="tolliumapps.formedit.editcomponent.answers"
                 highlightname="selected"
                 onmaprows="mapoptions"
                 onrowedit="oneditselectoption"
                 orderable="true">
        <column name="title" type="text" width="2pr" />

        <!-- column name="value" type="text" width="1pr" / -->
      </arrayedit>
    </insert>
    <insert position="presentation" where="after">
      <select name="horizontal" type="pulldown" rowkeytype="boolean">
        <option rowkey="false" tid=".horizontal-false" />
        <option rowkey="true" tid=".horizontal-true" />
      </select>
    </insert>
  </tabsextension>

  <tabsextension name="formselectmultiple" gid=".select" implementation="lib" lib="webtools/formcomponents/select.whlib">
    <insert position="answers" where="after">
      <select name="rowkeytype" type="pulldown" onchange="onrowkeytypeselect" visible="false">
        <option rowkey="string" />
        <option rowkey="integer" />
        <option rowkey="boolean" />
      </select>
      <arrayedit name="options"
                 height="1pr"
                 minwidth="65x"
                 errorlabeltid="tolliumapps.formedit.editcomponent.answers"
                 icons="tollium:status/checked"
                 onmaprows="mapoptions"
                 onrowedit="oneditselectoption"
                 orderable="true">
        <column name="title" type="text" width="2pr" />

        <!-- column name="value" type="text" width="1pr" / -->
        <column name="selectedicon" type="icon" width="15x" tid=".selected-column" />
      </arrayedit>
    </insert>
    <insert position="presentation" where="after">
      <select name="horizontal" type="pulldown" rowkeytype="boolean">
        <option rowkey="false" />
        <option rowkey="true" />
      </select>
    </insert>
    <insert position="validation" where="after">
      <textedit name="min" width="10x" minvalue="0" emptyvalue="0" valuetype="integer" />
      <textedit name="max" width="10x" minvalue="0" emptyvalue="0" valuetype="integer" />
    </insert>
  </tabsextension>

  <screen name="editselectoption"
          allowresize="true"
          footerbuttons="ok cancel"
          gid=".select"
          library="/lib/webtools/formcomponents/select.whlib"
          savestate="size">
    <compositions>
      <record name="row" />
    </compositions>

    <body>
      <textedit composition="row" cellname="title" name="title" width="1pr" required="true" />
      <select name="booleanvalue" type="pulldown" rowkeytype="boolean" tid=".value" visible="false">
        <option rowkey="true" />
        <option rowkey="false" />
      </select>
      <date name="datevalue" tid=".value" visible="false" />
      <lines layout="left">
        <checkbox composition="row" cellname="selected" labeltid=".selected" title="" />
        <checkbox composition="row"
                  cellname="openanswer"
                  name="openanswer"
                  labeltid=".openanswer"
                  onchange="openanswerchanged"
                  title="" />
        <line>
          <spacer width="16px" />
          <checkbox composition="row" cellname="openrequired" name="openrequired" labeltid=".openrequired" title="" />
        </line>
      </lines>
      <panel>
        <!-- line>
          <spacer width="16px" />
          <checkbox name="usemaxlength" title="" labeltid=".maxlength" enablecomponents="maxlength" />
          <textedit composition="row" cellname="maxlength" name="maxlength" title="" valuetype="integer" minvalue="0" emptyvalue="0" width="10x" />
          <text name="characters" title="" valuetid=".characters" />
        </line -->
        <line>
          <!-- The checkbox is used to store the internal 'othersubcomponents' flag -->
          <checkbox composition="row" cellname="othersubcomponents" title="" visible="false" />
          <text name="othersubcomponents" title="" valuetid=".othersubcomponents" wordwrap="true" />
        </line>
        <textedit composition="row" cellname="value" name="value" width="1pr" errorlabeltid=".value" visible="false" />
      </panel>
      <heading name="infotextheading" tid="tolliumapps.formedit.editcomponent.infotext" />
      <richdocument name="infotext"
                    width="1pr"
                    height="1pr"
                    minheight="6gr"
                    errorlabeltid="tolliumapps.formedit.editcomponent.infotext" />
    </body>
  </screen>

  <tabsextension name="richtext"
                 allowresize="true"
                 gid=".richtext"
                 implementation="lib"
                 lib="webtools/formcomponents/richtext.whlib">
    <insert position="titles" where="after">
      <richdocument name="text" width="1pr" height="1pr" minheight="8gr" />
    </insert>
  </tabsextension>

  <tabsextension name="address" gid=".address" implementation="lib" lib="webtools/formcomponents/address.whlib">
    <actions>
      <action name="editcountries" onexecute="doeditcountries" tid="~edit" />
    </actions>
    <insert position="answers" where="after">
      <line>
        <textedit name="countries" width="1pr" enabled="false" />
        <button action="editcountries" />
      </line>
    </insert>
  </tabsextension>

  <screen name="editcountries"
          width="75x"
          height="30x"
          allowresize="true"
          footerbuttons="ok cancel"
          gid=".address.editcountries"
          library="/lib/webtools/formcomponents/address.whlib">
    <actions>
      <action name="copy" onexecute="docopy" title="">
        <enableon source="regions" min="1" />
      </action>
      <action name="adddivider" onexecute="doadddivider" />
      <action name="delete" onexecute="dodelete" tid="~delete">
        <enableon source="countries" min="1" requirefocus="true" />
      </action>
      <action name="deduplicate" onexecute="dodeduplicate" />
      <action name="movetop" onexecute="domovetop" tid="~totop">
        <enableon source="countries" min="1" checkflags="canmoveup" requirefocus="true" selectionmatch="any" />
      </action>
      <action name="moveup" onexecute="domoveup" tid="~up">
        <enableon source="countries" min="1" checkflags="canmoveup" requirefocus="true" selectionmatch="any" />
      </action>
      <action name="movedown" onexecute="domovedown" tid="~down">
        <enableon source="countries" min="1" checkflags="canmovedown" requirefocus="true" selectionmatch="any" />
      </action>
      <action name="movebottom" onexecute="domovebottom" tid="~tobottom">
        <enableon source="countries" min="1" checkflags="canmovedown" requirefocus="true" selectionmatch="any" />
      </action>
      <action name="sort" onexecute="dosort" />
    </actions>

    <body>
      <grid height="1pr">
        <cell width="1pr">
          <list name="regions" columnheaders="false" openaction="copy" selectmode="multiple" sortable="false">
            <column name="title" type="text" title="" tree="true" />
          </list>
        </cell>
        <cell>
          <spacer height="1pr" />
          <button action="copy" icon="tollium:actions/right" />
          <spacer height="1pr" />
        </cell>
        <cell width="1pr">
          <list name="countries" columnheaders="false" flags="canmoveup canmovedown" selectmode="multiple" sortable="false">
            <column name="title" type="text" title="" />
          </list>
        </cell>
        <cell>
          <button width="1pr" action="adddivider" />
          <button width="1pr" action="delete" />
          <button width="1pr" action="deduplicate" />
          <spacer height="1x" />
          <button width="1pr" action="movetop" />
          <button width="1pr" action="moveup" />
          <button width="1pr" action="movedown" />
          <button width="1pr" action="movebottom" />
          <button width="1pr" action="sort" />
        </cell>
      </grid>
    </body>
  </screen>

  <tabsextension name="formcheckbox" implementation="lib" lib="webtools/formcomponents/checkbox.whlib">
    <insert position="answers" where="after" />
  </tabsextension>

</screens>
