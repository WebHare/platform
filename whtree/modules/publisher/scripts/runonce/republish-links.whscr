<?wh

LOADLIB "mod::publisher/lib/control.whlib";

LOADLIB "mod::system/lib/database.whlib";
LOADLIB "mod::system/lib/internal/webhareconstants.whlib";

OpenPrimary()->BeginWork();
INTEGER ARRAY linkstopublish :=
  SELECT AS INTEGER ARRAY id
    FROM system.fs_objects
   WHERE type IN [ whconstant_whfstype_internallink, whconstant_whfstype_externallink ]
         AND parentsite != 0;

FOREVERY(INTEGER link FROM linkstopublish)
  ScheduleFileRepublish(link);
GetPrimary()->CommitWork();
