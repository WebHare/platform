<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:wrd="http://www.webhare.net/xmlns/wrd/components"
         gid="tolliumapps.feedback"
         library="main.whlib">

  <screen name="main" allowresize="true" gid=".main" icon="tollium:actions/checklist" menubar="menubar">
    <actions>
      <action name="view" onexecute="doview" tid="~view">
        <enableon source="feedback" min="1" />
      </action>
      <action name="delete" onexecute="dodelete" shortcut="del" tid="~delete">
        <enableon source="feedback" min="1" />
      </action>
      <action name="addcomment">
        <enableon source="feedback" min="1" max="1" onexecute="doaddcomment" />
      </action>
      <action name="settings" onexecute="dosettings" tid="~settings" />
      <action name="exit" onexecute="doexit" tid="~exit" />
    </actions>

    <menus>
      <menu name="menubar">
        <item tid=".feedback">
          <item action="view" />
          <item action="delete" />
        </item>
        <item action="settings" />
        <divider />
        <item action="exit" />
      </menu>
    </menus>

    <compositions>
      <eventlistener name="loglistener" onevents="onlogevent" />
    </compositions>

    <toolbar>
      <button action="view" icon="tollium:actions/view" />
      <button action="delete" icon="tollium:actions/delete" />
    </toolbar>

    <body spacers="top left bottom">
      <select name="scope" type="pulldown" onchange="onselectscope" />
      <split type="horizontal" height="1pr">
        <part width="2pr">
          <wrd:entitylist name="feedback"
                          height="1pr"
                          borders="top left bottom"
                          onmaprows="mapfeedbackrows"
                          onselect="onfeedbackselect"
                          openaction="view"
                          requestcolumns="version wrd_creationdate browser device userdata feedbackid remarks status type"
                          sortascending="false"
                          sortcolumn="wrd_creationdate"
                          wrdtype="feedback">
            <column name="feedbackid" type="text" width="12x" />
            <column name="wrd_creationdate" type="datetime" width="15x" precision="minutes" storeutc="true" />
            <column name="reportedby" type="text" linkname="reportedbylink" width="20x" />
            <column name="type" type="text" width="10x" />
            <column name="remarks" type="text" />
            <!-- <column name="status" type="text" /> COMING REAL SOON! -->
          </wrd:entitylist>
        </part>
        <part width="1pr">
          <split type="vertical" height="1pr">
            <part spacers="left right">
              <text valuetid=".comment" />
              <textarea name="comment"
                        height="1pr"
                        minheight="4gr"
                        defaultbutton="addcommentbutton"
                        enabled="false"
                        errorlabeltid=".comment"
                        title=""
                        required="true" />  <!-- will be enabled once issue is selected -->
              <line layout="right">
                <button name="addcommentbutton" action="addcomment" tid=".addcomment" />
              </line>
            </part>
            <part height="1pr" spacers="left right">
              <iframe name="issuelog" height="1pr" />
            </part>
          </split>
        </part>
      </split>
    </body>
  </screen>

  <screen name="feedback" width="1000x" height="100x" gid=".feedback">
    <compositions>
      <record name="data" />
      <record composition="data" cellname="userdata" name="userdata" />
    </compositions>

    <body>
      <panel width="1pr" height="1pr" backgroundcolor="#b6b2b2" borders="all">
        <!-- Same background color as RTD -->
        <iframe name="screenshot" width="1pr" height="1pr" />
      </panel>
      <line layout="left">
        <checkbox name="scaled" labeltid=".scaled" onchange="onscaleiframe" title="" value="true" />
      </line>
      <datetime composition="data"
                cellname="wrd_creationdate"
                type="datetime"
                precision="minutes"
                readonly="true"
                storeutc="true" />
      <text composition="data" cellname="browser" selectable="true" wordwrap="true" />
      <text composition="data" cellname="device" selectable="true" wordwrap="true" />
      <text composition="data" cellname="useragent" selectable="true" wordwrap="true" />
      <text composition="userdata" cellname="login" selectable="true" />
      <heading tid=".extradata" />
      <line layout="left">
        <text name="noextradata" title="" valuetid=".noextradata" />
      </line>
    </body>

    <footer>
      <defaultformbuttons buttons="close" />
    </footer>
  </screen>

  <screen name="settings" gid=".settings">
    <body>
      <checkbox name="enabletolliumfeedback" labeltid=".enabletolliumfeedback" title="" />
    </body>

    <footer>
      <defaultformbuttons buttons="ok cancel" />
    </footer>
  </screen>

</screens>
