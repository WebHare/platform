<screens xmlns="http://www.webhare.net/xmlns/tollium/screens" gid="tolliumapps.feedback" library="main.whlib">

  <screen name="main" allowresize="true" gid=".main" icon="tollium:actions/checklist" menubar="menubar">
    <actions>
      <action name="escalate" onexecute="doescalate">
        <enableon source="feedback" min="1" checkflags="canescalate" />
      </action>
      <action name="close" onexecute="doclose">
        <enableon source="feedback" min="1" checkflags="canclose" />
      </action>
      <action name="reopen" onexecute="doreopen">
        <enableon source="feedback" min="1" checkflags="canreopen" />
      </action>
      <action name="delete" onexecute="dodelete" shortcut="del" tid="~delete">
        <enableon source="feedback" min="1" />
      </action>
      <action name="properties" onexecute="doproperties" shortcut="ctrl+i" tid="~properties">
        <enableon source="feedback" min="1" />
      </action>
      <action name="togglefilter" onexecute="dotogglefilter" title="" />
      <action name="setfeedbackmulti" onexecute="dosetfeedbackmulti" title="" />
      <action name="setfeedbacksingle" onexecute="dosetfeedbacksingle" title="" />
      <action name="addcomment">
        <enableon source="feedback" min="1" max="1" onexecute="doaddcomment" />
      </action>
      <action name="export" onexecute="doexport" tid="~export" />
      <action name="settings" onexecute="dosettings" tid="~settings" />
      <action name="exit" onexecute="doexit" shortcut="ctrl+q" tid="~exit" />
    </actions>

    <menus>
      <menu name="menubar">
        <item tid=".feedback">
          <item action="escalate" />
          <item action="close" />
          <item action="reopen" />
          <divider />
          <item action="delete" />
          <item action="properties" />
        </item>
        <item action="export" />
        <item action="settings" />
        <divider />
        <item action="exit" />
      </menu>
      <menu name="selectcontext">
        <item action="escalate" />
        <item action="close" />
        <item action="reopen" />
        <divider />
        <item action="delete" />
        <item action="properties" />
      </menu>
    </menus>

    <compositions>
      <eventlistener name="loglistener" onevents="onlogevent" />
    </compositions>

    <toolbar>
      <button action="escalate" icon="tollium:objects/envelope+tollium:overlays/forward" />
      <button action="close" icon="tollium:objects/envelope+tollium:overlays/strike" />
      <divider />
      <button action="delete" icon="tollium:actions/delete" />
      <button action="properties" icon="tollium:actions/properties" />
    </toolbar>

    <body spacers="none">
      <split type="horizontal" height="1pr">
        <part width="1pr">
          <panel backgroundcolor="#f0f0f0" borders="bottom">
            <line layout="tabs-space">
              <select name="status" type="pulldown" onchange="onselectstatus" title="">
                <option rowkey="all" />
                <option rowkey="new" />
                <option rowkey="escalated" />
                <option rowkey="closed" />
              </select>
              <spacer width="1pr" />
              <buttongroup borders="left right" layout="horizontal">
                <button name="listfilterbtn"
                        type="icon"
                        action="togglefilter"
                        hinttid=".filter"
                        icon="tollium:actions/filter"
                        title="" />
              </buttongroup>
              <buttongroup borders="left" layout="horizontal">
                <button name="feedbackmulti"
                        type="icon"
                        action="setfeedbackmulti"
                        hinttid=".feedbackmultihint"
                        icon="tollium:buttonbar/showmultirow"
                        title="" />
                <button name="feedbacksingle"
                        type="icon"
                        action="setfeedbacksingle"
                        hinttid=".feedbacksinglehint"
                        icon="tollium:buttonbar/showsinglerow"
                        title="" />
              </buttongroup>
            </line>
          </panel>
          <panel name="filterpanel" borders="bottom" spacers="left right" visible="false">
            <select name="scope" type="pulldown" onchange="onselectscope" title="" />
          </panel>
          <list name="feedback"
                height="1pr"
                borders="none"
                emptytid=".nofeedback"
                flags="canescalate canclose canreopen"
                ongetchildren="getfeedbackrows"
                onselect="onfeedbackselect"
                openaction="properties"
                selectcontextmenu="selectcontext"
                selectmode="single"
                sortascending="false"
                sortcolumn="wrd_modificationdate">
            <column name="feedbackid" type="text" width="12x" />
            <column name="status" type="text" width="10x" optiongid="tolliumapps.feedback.types" />
            <column name="wrd_modificationdate" type="datetime" width="15x" precision="minutes" storeutc="true" />
            <column name="reportedby" type="text" linkname="reportedbylink" />
            <column name="topic" type="text" />
            <column name="remarks" type="text" width="3pr"/>
            <rowlayout name="singlerow">
              <col coldef="feedbackid" />
              <col coldef="status" />
              <col coldef="wrd_modificationdate" />
              <col coldef="reportedby" />
              <col coldef="topic" />
              <col coldef="remarks" />
              <row>
                <cell coldef="feedbackid" />
                <cell coldef="status" />
                <cell coldef="wrd_modificationdate" />
                <cell coldef="reportedby" />
                <cell coldef="topic" />
                <cell coldef="remarks" />
              </row>
            </rowlayout>
            <rowlayout name="multirow">
              <col coldef="feedbackid" />
              <col coldef="status" />
              <col coldef="wrd_modificationdate" />
              <col coldef="reportedby" />
              <row>
                <cell coldef="feedbackid" />
                <cell coldef="status" />
                <cell coldef="wrd_modificationdate" />
                <cell coldef="reportedby" />
              </row>
              <row>
                <cell coldef="topic" />
                <cell coldef="remarks" colspan="3" />
              </row>
            </rowlayout>
          </list>
        </part>
        <part width="2pr">
          <tabs height="1pr">
            <tab spacers="none" tid=".screenshot">
              <panel width="1pr" height="1pr" backgroundcolor="#ffffff">
                <panel name="urlpanel" borders="bottom" spacers="left right" visible="false">
                  <line layout="tabs-space">
                    <url name="url" width="1pr" title="" />
                  </line>
                </panel>
                <iframe name="screenshot" width="1pr" height="1pr" />
              </panel>
            </tab>
            <tab height="1pr" tid=".comments">
              <panel height="1pr" borders="all">
                <iframe name="issuelog" height="1pr" />
              </panel>
              <textarea name="comment"
                        height="4gr"
                        defaultbutton="addcommentbutton"
                        enabled="false"
                        errorlabeltid=".comment"
                        maxlength="2000"
                        maxlengthmeasure="bytes"
                        required="true"
                        showcounter="true"
                        title="" />  <!-- will be enabled once issue is selected -->
              <line layout="right">
                <button name="addcommentbutton" action="addcomment" tid=".addcomment" />
              </line>
            </tab>
          </tabs>
        </part>
      </split>
    </body>
  </screen>

  <screen name="feedback" width="100x" height="40x" footerbuttons="close" gid=".feedback">
    <compositions>
      <record name="data" />
      <record composition="data" cellname="userdata" name="userdata" />
    </compositions>

    <body>
      <datetime composition="data"
                cellname="wrd_creationdate"
                type="datetime"
                precision="minutes"
                readonly="true"
                storeutc="true" />
      <text composition="data" cellname="browser" selectable="true" wordwrap="true" />
      <text composition="data" cellname="device" selectable="true" wordwrap="true" />
      <text composition="data" cellname="useragent" selectable="true" wordwrap="true" />
      <text composition="userdata" cellname="login" selectable="true" />
      <heading name="extradata" visible="false" />
      <spacer name="extradatainsertpoint" visible="false" />
      <heading tid=".appversions" />
      <list name="appversions" height="1pr">
        <column name="name" type="text" width="1pr" />
        <column name="version" type="text" width="1pr" />
      </list>
    </body>
  </screen>

  <screen name="escalate" width="60x" height="15x" allowresize="true" footerbuttons="ok cancel" gid=".escalate">
    <body layout="left">
      <text labelfor="message" tid=".message" />
      <textarea name="message" width="1pr" height="1pr" title="" />
    </body>
  </screen>

  <screen name="settings" footerbuttons="ok cancel" gid=".settings">
    <body>
      <checkbox name="enabletolliumfeedback" labeltid=".enabletolliumfeedback" title="" />
    </body>
  </screen>

</screens>
