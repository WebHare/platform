<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:publisher="http://www.webhare.net/xmlns/publisher/components"
         gid="tolliumapps.filemanager.history"
         library="versions.whlib">

  <screen name="history"
          width="150x"
          height="40x"
          minwidth="70x"
          allowresize="true"
          flags="issupervisor issysop"
          footerbuttons="close"
          gid=".dialog"
          savestate="size"
          title="">
    <actions>
      <action name="createcopy" ellipsis="true" tid="~copyto">
        <enableon source="versions" min="1" max="1" onexecute="DoCopy" />
      </action>
      <action name="inspect" frameflags="issupervisor" tid="~inspect">
        <enableon source="versions" min="1" max="1" onexecute="DoInspect" />
      </action>

      <!--
      <action name="restorecontent" onexecute="dorestorecontent" tid=".restore">
        <enableon source="versionevents" min="1" max="1" />
      </action>
      -->
    </actions>

    <menus>
      <menu name="context">
        <item action="createcopy" />

        <!-- <item action="restorecontent" /> -->
        <divider />
        <item action="inspect" />
      </menu>
    </menus>

    <compositions>
      <eventlistener name="listener" onevents="GotEvents" />
      <publisher:whfsinstance name="webmetadata" typedef="platform:web.metadata" />
    </compositions>

    <body spacers="none">
      <split type="horizontal">
        <part width="1pr" spacers="all">
          <line layout="left">
            <date name="filterfrom" onselect="GotDateRangeChange" />
            <date name="filterto" onselect="GotDateRangeChange" />
          </line>
          <list name="versions"
                borders="all"
                flags="isactive"
                highlightname="isactive"
                icons="tollium:actions/accept
                       tollium:objects/meredians
                       tollium:actions/removepublication
                       tollium:actions/upload
                       tollium:actions/replace
                       tollium:actions/accept
                       tollium:actions/delete
                       tollium:objects/questionmark
                       tollium:status/draft-edit"
                onselect="onselectrequest"
                rowlayout="singlerow"
                selectcontextmenu="context"
                selectmode="single"
                sortascending="false"
                sortcolumn="when">
            <!-- -->
            <column name="icon" type="icon" title="" />
            <column name="when" type="datetime" width="18x" storeutc="true" />
            <column name="filename" type="text" />
            <column name="comment" type="text" />
            <column name="displayname" type="text" tid=".fullname" />
            <column name="versionnumber" type="text" width="8x" sortkeyname="versionsort" tid=".versionnumber" />
            <rowlayout name="singlerow">
              <col coldef="icon" />
              <col coldef="when" />
              <col coldef="displayname" />
              <col coldef="versionnumber" />
              <row>
                <cell coldef="icon" />
                <cell coldef="when" />
                <cell coldef="displayname" />
                <cell coldef="versionnumber" />
              </row>
            </rowlayout>
            <rowlayout name="tworows">
              <col coldef="icon" combinewithnext="true" />
              <col coldef="when" />
              <col coldef="versionnumber" combinewithnext="true" />
              <col coldef="displayname" />
              <row>
                <cell coldef="icon" rowspan="2" />
                <cell coldef="when" />
                <cell coldef="displayname" />
                <cell coldef="versionnumber" />
              </row>
              <row>
                <cell coldef="filename" />
                <cell coldef="comment" colspan="2" />
              </row>
            </rowlayout>
          </list>
          <panel backgroundcolor="#e5e5e5" borders="left right bottom" layout="right" spacers="right">
            <line>
<!-- <button action="restorecontent" /> -->
              <button action="createcopy" />
            </line>
          </panel>
        </part>
        <part width="2pr" spacers="none">
          <tabs name="proptabs" height="1pr">
            <tab tid=".changes" visible="false">
              <heading tid=".changes" />
              <list name="modifications"
                    height="1pr"
                    icons="tollium:actions/properties
                           tollium:folders/normal
                           tollium:actions/delete
                           tollium:objects/world
                           tollium:files/application_x-webhare-general">
                <column name="typeicon" type="icon" title="" />
                <column name="changetype" type="text" width="1pr" />  <!-- properties / location / deletion / data / content / publication -->
                <column name="changecontent" type="text" width="2pr" />
              </list>
            </tab>
            <tab spacers="none" tid=".previewtab">
              <publisher:previewbrowser name="previewbrowser" urlbarvisible="false" />
            </tab>
            <tab name="metadata" width="1pr" vscroll="true">
              <tabs name="templatetabs" type="stacked" height="1pr" visible="false">
                <tab name="maintab" tid="tolliumapps.objectprops.objectprops.maintab">
                  <heading name="maintab_heading" tid="tolliumapps.objectprops.objectprops.nametitle" />  <!-- doclink="publisher:objectprops/nametitle" -->
                  <textedit name="name" width="1pr" maxlength="256" enabled="false" tid="~name" />
                  <textedit name="title" width="1pr" maxlength="256" enabled="false" tid="~title" />
                  <heading name="seotab_heading" tid="tolliumapps.objectprops.objectprops.seotab_heading" />  <!-- doclink="publisher:objectprops/seo" -->
                  <textedit composition="webmetadata"
                            cellname="seo_title"
                            name="seotitle"
                            width="1pr"
                            maxlength="256"
                            enabled="false"
                            tid="platform:siteprofiles.types.web.metadata.seo_title" />
                  <textarea name="description"
                            height="3gr"
                            enabled="false"
                            maxlength="2048"
                            placeholdertid="tolliumapps.objectprops.objectprops.description-placeholder"
                            showcounter="true"
                            tid="~description" />
                  <textarea name="keywords" height="1gr" enabled="false" maxlength="1024" showcounter="true" tid="~keywords" />
                  <checkbox name="pinobject" enabled="false" title="" visible="false" />
                </tab>
              </tabs>
            </tab>
          </tabs>
        </part>
      </split>
    </body>
  </screen>

</screens>
