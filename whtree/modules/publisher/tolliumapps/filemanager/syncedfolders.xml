<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:publisher="http://www.webhare.net/xmlns/publisher/components"
         gid="tolliumapps.filemanager.syncedfolders"
         library="syncedfolders.whlib">

  <screen name="manage" width="120x" height="40x" allowresize="true" footerbuttons="close" savestate="size">
    <actions>
      <action name="add" onexecute="doadd" tid="~add" />
      <action name="edit" onexecute="doedit" tid="~edit">
        <enableon source="folders" min="1" />
      </action>
      <action name="delete" onexecute="dodelete" tid="~delete">
        <enableon source="folders" min="1" />
      </action>
    </actions>

    <body>
      <grid height="1pr">
        <col width="1pr" />
        <col />
        <row height="1pr">
          <cell>
            <list name="folders" openaction="edit" selectmode="single">
              <column name="folder" type="text" />
              <column name="peer" type="text" />
              <column name="remotepath" type="text" />
            </list>
          </cell>
          <cell>
            <button width="1pr" action="add" />
            <button width="1pr" action="edit" />
            <button width="1pr" action="delete" />
          </cell>
        </row>
      </grid>
    </body>
  </screen>

  <screen name="editfolder" footerbuttons="ok cancel">
    <actions>
      <action name="selectpeer" onexecute="doselectpeer" />
      <action name="selectfolder" onexecute="doselectfolder" />
    </actions>

    <compositions>
      <record name="rec" />
    </compositions>

    <body>
      <publisher:browseforobject composition="rec"
                                 cellname="id"
                                 name="folder"
                                 acceptfolders="true"
                                 acceptrootfolder="true"
                                 required="true"
                                 tid=".localfolder" />
      <heading tid=".foldertodownload" />
      <line>
        <textedit composition="rec" cellname="peer" name="peer" enabled="false" />
        <button action="selectpeer" />
      </line>
      <line>
        <textedit composition="rec" cellname="remotepath" name="remotepath" width="1pr" required="true" />
        <button action="selectfolder" />
      </line>
    </body>
  </screen>

  <screen name="selectremotefolder" width="70x" height="30x" allowresize="true">
    <actions>
      <action name="select" onexecute="submit" tid="~ok">
        <enableon source="tree" min="1" max="1" />
      </action>
    </actions>

    <body>
      <panel height="1pr">
        <list name="tree"
              height="1pr"
              columnheaders="false"
              icons="tollium:folders/normal tollium:files/application_x-webhare-general"
              ongetchildren="ongetchildren"
              ongetpath="ongetpath"
              openaction="select"
              selectmode="single">
          <column name="name" type="text" iconname="icon" title="" tree="true" />
        </list>
      </panel>
    </body>

    <footer>
      <line layout="right">
        <button action="select" />
        <button tid="~cancel" tolliumresult="cancel" />
      </line>
    </footer>
  </screen>

  <screen name="syncfolder" width="90x" height="20x" allowresize="true" savestate="size">
    <actions>
      <action name="managesyncpoints" onexecute="domanagesyncpoints" />
      <action name="foldersync" onexecute="DoFolderSync">
        <enableon source="syncpoints" min="1" max="1" />
      </action>
      <action name="fullsync" onexecute="DoFullSync">
        <enableon source="syncpoints" min="1" max="1" checkflags="cansync" />
      </action>
      <windowopenaction name="open" onwindowopen="doopen" tid="~open">
        <enableon source="syncpoints" min="1" max="1" />
      </windowopenaction>
    </actions>

    <body>
      <grid height="1pr">
        <cell width="1pr">
          <list name="syncpoints" height="1pr" emptytid=".nosyncpoints" flags="cansync" selectmode="single">
            <column name="peer" type="text" />
            <column name="remotefolder" type="text" />
          </list>
        </cell>
        <cell>
          <button width="1pr" action="fullsync" />
          <button width="1pr" action="foldersync" />
          <button width="1pr" action="open" />
        </cell>
      </grid>
    </body>

    <footer>
      <grid>
        <cell width="1pr">
          <button action="managesyncpoints" />
        </cell>
        <cell>
          <line layout="right">
            <button tid="~close" tolliumresult="cancel" />
          </line>
        </cell>
      </grid>
    </footer>
  </screen>

</screens>
