<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:p="http://www.webhare.net/xmlns/publisher/components"
         gid="tolliumapps.editdocument"
         library="editdocument.whlib">

  <screen name="editdocumentapp"
          width="800px"
          height="600px"
          allowresize="true"
          flags="canedit canpublish canrevertdraft canpreview canview isdeveloper isdirty"
          gid=".editdocumentapp"
          icon="tollium:applications/editor"
          interval="60000"
          menubar="menubar"
          oninterval="oninterval"
          onunload="gotunload"
          title="Rich document editor">
    <actions>
      <action name="save" frameflags="canedit isdirty" onexecute="dosave" shortcut="ctrl+s" />
      <action name="canceldraft" frameflags="canrevertdraft" onexecute="docanceldraft" />
      <action name="hidedraftbar" onexecute="dohidedraftbar" />
      <action name="sendpreviewlink" ellipsis="true" onexecute="dosendpreviewlink" />
      <action name="publish" frameflags="canpublish" onexecute="dopublish" />
      <action name="close" onexecute="doclose" tid="~close" />
      <windowopenaction name="viewpublished"
                        frameflags="canview"
                        onwindowopen="doviewpublished"
                        target="webhare_publisher_editdocument" />
      <windowopenaction name="previewdraft"
                        frameflags="canpreview"
                        onwindowopen="dopreviewdraft"
                        target="webhare_publisher_editdocument" />
      <windowopenaction name="previewcurrentcontent"
                        frameflags="canpreview isdirty"
                        onwindowopen="dopreviewcurrentcontent"
                        target="webhare_publisher_editdocument" />
      <action name="openinpublisher" onexecute="doopeninpublisher" tid="tolliumapps.common.actions.revealinpublisher" />
      <action name="shareapplicationlink" onexecute="DoShareApplicationLink" tid="platform:tolliumapps.common.actions.shareapplicationlink" />
      <action name="inspectautosave" frameflags="isdeveloper" onexecute="doinspectautosave" />
      <action name="inspectdraft" frameflags="isdeveloper" onexecute="doinspectdraft" />
      <action name="inspectfinal" frameflags="isdeveloper" onexecute="doinspectfinal" />
      <action name="inspectmetatabs" frameflags="isdeveloper" onexecute="doinspectmetatabs" />
      <action name="refreshname" onexecute="dorefreshname" tid="tolliumapps.objectprops.objectprops.refreshname" />
    </actions>

    <menus>
      <menu name="menubar">
        <item name="publishmenu" action="publish" tid=".publish" />
        <item name="savemenu" action="save" tid=".save" />
        <item tid=".previewmenu">
          <item action="viewpublished" />
          <item action="previewdraft" />
          <item action="previewcurrentcontent" />
          <divider />
          <item action="sendpreviewlink" />
        </item>

        <!-- The "openinpublisher_public" item will be hidden if
             this application was opened by another app with the
             "assumewriteaccess" parameter -->
        <item name="openinpublisher_public" action="openinpublisher" tid="tolliumapps.common.actions.revealinpublisher" />
        <divider />
        <item name="canceldraftmenu" action="canceldraft" />
        <divider />
        <item title="#####" visible="false" />  <!-- The insertion point for document editor menu items -->
        <divider />
        <item action="shareapplicationlink" />
        <divider />
        <item name="developersmenu">
          <item title="#####" visible="false" />  <!-- The insertion point for document editor menu items -->
          <divider />
          <item action="inspectautosave" disablemode="hidden" />
          <item action="inspectdraft" disablemode="hidden" />
          <item action="inspectfinal" disablemode="hidden" />
          <item action="inspectmetatabs" disablemode="hidden" />
          <divider />
          <item action="openinpublisher" />
        </item>
        <divider />
        <item action="close" tid="~exit" />
      </menu>
      <menu name="previewmenu">
        <item action="viewpublished" />
        <item action="previewdraft" />
        <item action="previewcurrentcontent" />
        <divider />
        <item action="sendpreviewlink" />
      </menu>
    </menus>

    <compositions>
      <eventlistener name="publicationlistener" onevents="gotfolderchangeevents" />
      <dirtylistener name="dirtylistener" makeappdirty="true" ondirty="gotdirty" />
      <p:whfsinstance name="webmetadata" typedef="platform:web.metadata" />
    </compositions>

    <toolbar name="toolbar">
      <button name="publishbutton" action="publish" hinttid=".publish-hint" icon="tollium:actions/meredians" tid=".publish" />
      <button name="saveasdraftbutton" action="save" hinttid=".save-hint" icon="tollium:actions/save" tid=".saveasdraft" />
      <button icon="tollium:filemgr/previewsite" menu="previewmenu" tid=".preview" />
      <divider />
    </toolbar>

    <body name="body" spacers="none">
      <statuspanel name="draftbar" visible="false">
        <line>
          <!-- give a lot of space to the draft text but still keep a spacer next to the links or their text may stick -->
          <text name="draftmode" width="1pr" onclicklink="ondraftmodeclick" title="" wordwrap="true" />
          <spacer width="3x" />
          <text name="draftbar_canceldraft" action="canceldraft" title="" valuetid=".canceldraftmenu" visible="false" />
        </line>
      </statuspanel>
      <split name="editarea" type="horizontal" height="1pr">
        <part name="doceditor" width="2pr" />
        <part name="metapart" width="1pr" visible="false">
          <tabs name="filetabs" height="1pr">
            <tab name="metadatatab" tid=".metadata" vscroll="true">
              <section name="mainsection" tid="tolliumapps.objectprops.objectprops.maintab" open="true">
                <heading name="maintab_heading" tid="tolliumapps.objectprops.objectprops.nametitle" />  <!-- doclink="publisher:objectprops/nametitle" -->
                <line>
                  <textedit name="title"
                            width="1pr"
                            maxlength="256"
                            dirtylistener="dirtylistener"
                            tid="~title"/>
                  <select name="isunlisted" title="" rowkeytype="boolean" type="pulldown">
                    <option rowkey="false" tid="tolliumapps.objectprops.objectprops.isunlisted-false" />
                    <option rowkey="true" tid="tolliumapps.objectprops.objectprops.isunlisted-true" />
                  </select>
                </line>
                <textedit name="name"
                          width="1pr"
                          maxlength="256"
                          dirtylistener="dirtylistener"
                          tid="~name"
                          validationchecks="whfsname">
                  <button name="refreshnamebutton"
                          action="refreshname"
                          icon="tollium:actions/refresh"
                          tid="tolliumapps.objectprops.objectprops.refreshname" />
                </textedit>
                <heading name="seotab_heading" tid="tolliumapps.objectprops.objectprops.seotab_heading" />  <!-- doclink="publisher:objectprops/seo" -->
                <textedit composition="webmetadata"
                          cellname="seo_title"
                          name="seotitle"
                          width="1pr"
                          maxlength="256"
                          dirtylistener="dirtylistener"
                          placeholdertid="platform:siteprofiles.types.web.metadata.seo_title-placeholder"
                          showcounter="true"
                          tid="platform:siteprofiles.types.web.metadata.seo_title" />
                <textarea name="description"
                          height="3gr"
                          dirtylistener="dirtylistener"
                          maxlength="2048"
                          placeholdertid="tolliumapps.objectprops.objectprops.description-placeholder"
                          showcounter="true"
                          tid="~description" />
                <textarea name="keywords" height="1gr" maxlength="1024" showcounter="true" tid="~keywords" />
                <checkbox name="pinobject" onchange="updatepinned" title="" visible="false" />
              </section>
            </tab>
          </tabs>
        </part>
      </split>
      <panel layout="left" spacers="left right">
        <line>
          <image name="filestatusicon" width="16px" height="16px" title="" />
          <text name="filestatustext" title="" value="" />
        </line>
      </panel>
    </body>
  </screen>

  <screen name="sendpreviewlink" minwidth="65x" allowresize="true" gid=".sendpreviewlink" tid=".screentitle">
    <body spacers="none">
      <wizard name="wizard">
        <page name="sharepage" onnext="onsharenext" spacers="bottom">
          <datetime name="validuntil" type="datetime" precision="minutes" storeutc="true" required="true"/>
          <select name="share" type="radio" required="true">
            <option rowkey="thisversion" />
            <option rowkey="mostrecentversion" />
          </select>
          <line layout="left">
            <checkbox name="passwordprotect" enablecomponents="password" labeltid=".passwordprotect" title="" />
            <textedit name="password" errorlabeltid=".password" password="true" required="true" title="" />
          </line>
        </page>
        <page isfinish="true" oninit="initfinishpage" spacers="bottom">
          <url name="link" width="1pr" />
          <text name="maillink" title="" />
        </page>
      </wizard>
    </body>
  </screen>

</screens>
