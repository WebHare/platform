<?xml version="1.0" encoding="UTF-8"?>
<schemadefinition xmlns="http://www.webhare.net/xmlns/wrd/schemadefinition">

  <object tag="SCOPE" title="Scope">
    <attributes>
    </attributes>
  </object>

  <attachment tag="FEEDBACKTYPE" linkfrom="SCOPE">
    <attributes>
      <integer tag="WRD_ORDERING" />
      <free tag="ROWKEY" />
      <free tag="WRD_TITLE" />
    </attributes>
  </attachment>

  <attachment tag="FEEDBACK" title="Feedback" linkfrom="SCOPE">
    <attributes>
      <!-- Currently 1 -->
      <integer tag="VERSION" title="Version" />

      <!-- Feedback tracking id, eg FB1234 -->
      <free tag="FEEDBACKID" title="Feedback id" required="true" unique="true" />

      <!--
        RECORD ARRAY htmlattrs
          STRING name
          STRING  alue
        STRING ARRAY stylesheets
        RECORD ARRAY bodyattrs
          STRING name
          STRING value
        STRING bodycontents (the 'innerHTML' of the <body> node)
      -->
      <record tag="SCREENSHOT" title="Screenshot HTML data" />
      <!--
        Browser viewport size
        INTEGER width
        INTEGER height
      -->
      <record tag="SIZE" title="Browser window size" />
      <!--
        The selected element bounding box
        INTEGER top
        INTEGER left
        INTEGER width
        INTEGER height
      -->
      <record tag="ELEMENT" title="Clicked element's size and position" />
      <free tag="BROWSER" title="Browser triplet" />
      <free tag="DEVICE" title="Browser device" />
      <free tag="USERAGENT" title="Browser user agent" />

      <domain tag="TYPE" domain="FEEDBACKTYPE" />
      <free tag="REMARKS" />
      <enum tag="STATUS" allowedvalues="creating new closed resolved" gid="tolliumapps.feedback.types" required="true"/>

      <!--
        When a logged in user is recognized, the result of GetUserDataForLogging
      -->
      <record tag="USERDATA" title="User data" />
      <!--
        Extra data supplied by the user
      -->
      <record tag="EXTRADATA" title="Extra data" />

      <array tag="APPVERSIONS">
        <free tag="name" required="true" title="Module/item name" description="The described item, currently 'webhare' or an installed module"/>
        <free tag="version" title="Item version" description="The (hopefully) semantic version"/>
      </array>
    </attributes>
  </attachment>

  <attachment tag="LOG" linkfrom="FEEDBACK">
    <attributes>
      <enum tag="STATUSCHANGE" allowedvalues="new closed resolved" gid="tolliumapps.feedback.types" />
      <free tag="TEXT" />
      <record tag="WEBHAREUSER" required="true" />
    </attributes>
  </attachment>

</schemadefinition>
