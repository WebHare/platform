<siteprofile xmlns="http://www.webhare.net/xmlns/publisher/siteprofile"
             xmlns:p="http://www.webhare.net/xmlns/publisher/components">

  <!--
    Form file
  -->
  <grouptype namespace="http://www.webhare.net/xmlns/publisher/mailwidgets" tid="siteprofile.widgets.mail" />

  <widgettype namespace="http://www.webhare.net/xmlns/publisher/formmergefield"
              editextension="#editmergefield"
              embedtype="inline"
              ingroup="http://www.webhare.net/xmlns/publisher/mailwidgets"
              renderobjectname="mod::publisher/lib/internal/forms/mergefield.whlib#MergeFieldWidget"
              requiremergefieldscontext="true"
              tid="webtools.mergefield.widgettitle">
    <members>
      <string name="fieldname" />
    </members>
  </widgettype>

  <tabsextension xmlns="http://www.webhare.net/xmlns/tollium/screens"
                 name="editmergefield"
                 implementation="lib"
                 library="mod::publisher/lib/internal/forms/mergefield.whlib">
    <newtab gid="webtools.mergefield">
      <select composition="contentdata"
              cellname="fieldname"
              name="fieldname"
              type="pulldown"
              required="true"
              rowkeytype="string" />
    </newtab>
  </tabsextension>

  <widgettype namespace="http://www.webhare.net/xmlns/publisher/formresultsfield"
              comment="This embedded object embeds the form results within the mail. We're not exposing it to all users for now, so the
       form's mailrtdtype should explicity allow this widgettype to use it."
              ingroup="http://www.webhare.net/xmlns/publisher/mailwidgets"
              renderobjectname="mod::publisher/lib/internal/forms/resultsfield.whlib#ResultsFieldWidget"
              requiremergefieldscontext="true"
              tid="webtools.resultsfield.widgettitle">
    <members />
  </widgettype>

  <widgettype namespace="http://www.webhare.net/xmlns/publisher/formconfirmfield"
              editextension="#editconfirmfield"
              embedtype="inline"
              ingroup="http://www.webhare.net/xmlns/publisher/mailwidgets"
              renderobjectname="mod::publisher/lib/internal/forms/confirmfield.whlib#ConfirmFieldWidget"
              requiremergefieldscontext="true"
              tid="webtools.confirmfield.widgettitle">
    <members>
      <string name="linktext" />
    </members>
  </widgettype>

  <tabsextension xmlns="http://www.webhare.net/xmlns/tollium/screens" name="editconfirmfield">
    <newtab gid="webtools.confirmfield">
      <textedit composition="contentdata" cellname="linktext" width="1pr" placeholdertid=".placeholder" />
    </newtab>
  </tabsextension>

  <filetype namespace="http://www.webhare.net/xmlns/publisher/formwebtool"
            kind="virtualfile"
            icon="tollium:files/application_x-webhare-survey"
            initialpublish="false"
            searchcontentprovider="publisher:webtoolform"
            tid="filetypes.webtool-form">
    <members>
      <boolean name="disablecaptcha" />
      <integer name="storeresults"
               comment="Because the default value is 0 and the default should be &quot;use the server default retention period&quot;, the value -1 (or          any value &lt; 0) is used to signify 0 days (don't store at all)" />
      <integer name="maxsignups" />
      <composeddocument name="data" />
      <boolean name="unavailable" />
      <richdocument name="unavailabletext" />
      <record name="fixformoptions"
              comment="archived original remapping in case we ever need it. at some point we can drop this member" />
    </members>
    <dynamicexecution webpageobjectname="mod::publisher/lib/forms/base.whlib#WebtoolFormPage" />
    <setobjecteditor name="publisher:webtoolform" separateapp="true" />
  </filetype>

  <contenttype namespace="http://www.webhare.net/xmlns/publisher/formstats" cloneoncopy="false">
    <datetime name="firstresult" />
    <integer name="numresults" />
  </contenttype>

  <contenttype namespace="http://www.webhare.net/xmlns/publisher/formcondition">
    <record name="data" />
    <record name="fixformoptions"
            comment="archived original condition in case we ever need it. at some point we can drop this member" />
  </contenttype>

  <contenttype namespace="http://www.webhare.net/xmlns/publisher/mailhandlerattachments"
               comment="The contenttype used to store mail handler attachments in an instance">
    <array name="attachments">
      <file name="file" />
    </array>
  </contenttype>

  <widgettype namespace="http://www.webhare.net/xmlns/publisher/formwidget"
              comment="form as widget

       we can't set the standard form as a widget, because we can't control
       the widget preview then"
              renderobjectname="mod::publisher/lib/widgets/formwidget.whlib#FormWidgetBase"
              tid="siteprofile.widgets.formwidget" />

  <apply>
    <to type="file" filetype="http://www.webhare.net/xmlns/publisher/formwidget" />
    <setobjecteditor name="publisher:webtoolform" separateapp="true" />
  </apply>

  <!-- The default type that is used for editing rtd fields -->
  <rtdtype namespace="http://www.webhare.net/xmlns/publisher/rtdfielddefaulttype">
    <blockstyles defaultstyle="NORMAL">
      <textstyle tag="NORMAL" containertag="p" textstyles="b i u a-href" />
    </blockstyles>
  </rtdtype>
</siteprofile>
