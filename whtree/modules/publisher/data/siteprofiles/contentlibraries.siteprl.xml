<siteprofile xmlns="http://www.webhare.net/xmlns/publisher/siteprofile" gid="siteprofile.contentlibraries">

  <!-- adaptive content slots (folder of slots) -->
  <foldertype namespace="http://www.webhare.net/xmlns/publisher/contentlibraries/slots"
              icon="tollium:objects/slots"
              tid=".slots">
    <foldersettings>
      <contentslisthandler objectname="/tolliumapps/filemanager/adaptivecontent.whlib#SlotsFolderContents" />
    </foldersettings>
  </foldertype>

  <!-- add condition columns to slot widgets -->
  <apply>
    <to type="folder" parenttype="http://www.webhare.net/xmlns/publisher/contentlibraries/slots" />
    <foldersettings>
      <contentslisthandler objectname="/tolliumapps/filemanager/adaptivecontent.whlib#SlotFolderContents" />
    </foldersettings>
    <extendproperties extension="#slotreferences" contenttype="http://www.webhare.net/xmlns/publisher/contentlibraries/slots" />
  </apply>

  <tabsextension xmlns="http://www.webhare.net/xmlns/tollium/screens"
                 name="slotreferences"
                 implementation="lib"
                 library="mod::publisher/lib/screens/objectprops/contentlibraries.whlib">
    <actions>
      <action name="viewreferences" onexecute="doviewreferences" />
    </actions>
    <insert position="properties" where="after">
      <line>
        <text name="references" />
        <text name="viewreferencestext" action="viewreferences" title="" valuetid=".viewreferences" />
      </line>
    </insert>
  </tabsextension>

  <!-- check for slot republishing if a slot or widget changes -->
  <apply>
    <to type="all" withintype="http://www.webhare.net/xmlns/publisher/contentlibraries/slots" />
    <scheduletimedtask task="publisher:updateslots" />
  </apply>

  <!-- slottedwidget properties -->
  <contenttype namespace="http://www.webhare.net/xmlns/publisher/contentlibraries/slottedwidget">
    <record name="condition" />
  </contenttype>

  <foldertype namespace="http://www.webhare.net/xmlns/publisher/contentlibraries/beacons"
              icon="tollium:folders/beaconfolder"
              tid=".beacons">
    <foldersettings>
      <contentslisthandler objectname="/tolliumapps/filemanager/adaptivecontent.whlib#BeaconsFolderContents" />
    </foldersettings>
  </foldertype>

  <apply priority="10">
    <to type="all" parenttype="http://www.webhare.net/xmlns/publisher/contentlibraries/beacons" />
    <denyfoldertype typedef="*" />
    <denyfiletype typedef="*" />
    <allowfiletype typedef="http://www.webhare.net/xmlns/publisher/contentlibraries/beacon" />
  </apply>

  <!-- beacon file type -->
  <filetype namespace="http://www.webhare.net/xmlns/publisher/contentlibraries/beacon"
            kind="datafile"
            icon="tollium:objects/beacon"
            tid=".beacon">
    <members>
      <string name="guid" />
    </members>
    <setobjecteditor name="publisher:adaptivecontent_beacon" />
  </filetype>

  <!-- content snippets -->
  <foldertype namespace="http://www.webhare.net/xmlns/publisher/contentlibraries/contentsnippets" tid=".contentsnippets" icon="tollium:folders/snippetfolder">
  </foldertype>

  <!-- republish associated content if a content snippet changes -->
  <apply>
    <to type="all" withintype="http://www.webhare.net/xmlns/publisher/contentlibraries/contentsnippets" />
    <republish scope="references" />
  </apply>

</siteprofile>
