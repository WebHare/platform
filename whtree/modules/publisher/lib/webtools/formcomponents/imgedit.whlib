<?wh
/** @short Standard form components
    @topic forms/standardcomponents
*/

LOADLIB "mod::system/lib/cache.whlib";
LOADLIB "mod::publisher/lib/webtools/formcomponents/upload.whlib";

PUBLIC STATIC OBJECTTYPE ImgEditField EXTEND FileEditFieldBase
<
  UPDATE PUBLIC RECORD FUNCTION __GetRenderData()
  {
    RECORD data :=
           CELL[ ...FileEditFieldBase::__GetRenderData()
               , type := "imgedit"
               ];
    IF(data.accept = "")
      data.accept := "image/jpeg,image/gif,image/png";

    RETURN data;
  }

  UPDATE STRING FUNCTION GetUCFileLink(STRING baseurl, RECORD file)
  {
    RETURN GetCachedImageLink(file, [ baseurl := baseurl, method := "none", fixorientation := TRUE ]);
  }
>;
