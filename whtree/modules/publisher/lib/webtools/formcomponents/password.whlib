<?wh
/** @short Standard form components
    @topic forms/standardcomponents
*/

LOADLIB "wh::xml/xsd.whlib";



PUBLIC RECORD FUNCTION ParseFormPassword(RECORD fielddef, OBJECT node, RECORD parsecontext)
{
  fielddef.type := "textedit";
  INSERT CELL password := TRUE
            , maxlength := 0
            , validationchecks := DEFAULT STRING ARRAY
            , defautvalue := ""
            , prefix := parsecontext.parsexmltidptr(node, "prefix")
            , suffix := parsecontext.parsexmltidptr(node, "suffix")
            , value := ""
            , valuetype := "string"
            , emptyvalue := ""
            , emptyvalueisset := FALSE
            , placeholder := parsecontext.parsexmltidptr(node, "placeholder")
         INTO fielddef;

  INSERT CELL trimwhitespace := node->HasAttribute("trimwhitespace") ? ParseXSBoolean(node->GetAttribute("trimwhitespace")) : TRUE INTO fielddef;
  IF(node->HasAttribute("minlength"))
    INSERT CELL minlength := ToInteger(node->GetAttribute("minlength"),0) INTO fielddef;
  IF(node->HasAttribute("maxlength"))
    INSERT CELL maxlength := ToInteger(node->GetAttribute("maxlength"),0) INTO fielddef;
  IF(node->HasAttribute("repeatpasswordfield"))
    INSERT CELL repeatpasswordfield := node->GetAttribute("repeatpasswordfield") INTO fielddef;
  RETURN fielddef;
}
