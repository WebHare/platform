<?wh
LOADLIB "wh::files.whlib";
LOADLIB "wh::filetypes/markdown.whlib";
LOADLIB "mod::publisher/lib/webdesign.whlib";

PUBLIC STATIC OBJECTTYPE RenderMarkdown EXTEND StaticPageBase
<
  UPDATE PUBLIC MACRO PTR FUNCTION GetPageBody(OBJECT webdesign)
  {
    RECORD content := this->contentobject->GetInstanceData("http://www.webhare.net/xmlns/publisher/markdownfile").data;
    IF(RecordExists(content))
      RETURN PTR Print(RenderMarkdownToHTML(ParseMarkDown(BlobToString(content.text))));
    ELSE
      RETURN DEFAULT MACRO PTR;
  }
>;
