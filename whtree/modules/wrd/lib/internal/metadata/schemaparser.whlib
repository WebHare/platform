<?wh

LOADLIB "wh::files.whlib";
LOADLIB "wh::javascript.whlib";

PUBLIC RECORD FUNCTION OpenWRDSchemaDefFile(STRING resourcepath, RECORD options DEFAULTSTO DEFAULT RECORD) {
  options := ValidateOptions([ overridedata := DEFAULT BLOB
                             , addbaseschema := TRUE
                             ], options, [ optional := ["overridedata"]]);

  VARIANT overridedata;
  IF(CellExists(options, 'overridedata'))
    overridedata := BlobToString(options.overridedata);
  ELSE
    overridedata := DEFAULT RECORD; //null

  RETURN CallJS("@mod-wrd/js/internal/schemaparser.ts#parseSchema", resourcepath, options.addbaseschema, overridedata);
}
