<?wh

LOADLIB "mod::system/lib/resources.whlib";

PUBLIC RECORD ARRAY FUNCTION GetAllDefinedWRDSchemas() {
  RECORD ARRAY schemas;
  FOREVERY(RECORD mod FROM __GetExtractedConfig("wrdschemas").modules) {
    schemas := schemas CONCAT
      SELECT tag := STRING(wrdschema)
           , isexact := isexactmatch
           , definitionfile := STRING(schemadefinitionresource)
           , autocreate := BOOLEAN(autocreate)
           , title := STRING(title)
        FROM mod.schemas;
  }
  RETURN schemas;
}

PUBLIC RECORD FUNCTION GetModuleWRDSchemaDefinition(STRING findtag) {
  RETURN SELECT * FROM GetAllDefinedWRDSchemas() WHERE ToUppercase(findtag) LIKE ToUppercase(tag);
}
