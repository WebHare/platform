<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:wrd="http://www.webhare.net/xmlns/wrd/components"
         gid="tolliumapps.oidc.client"
         library="client.whlib">

  <screen name="providers" width="120x" allowresize="true" footerbuttons="close">
    <actions>
      <action name="testprovider" onexecute="dotestprovider">
        <enableon source="providers" min="1" />
      </action>
    </actions>
    <body>
      <wrd:entitiesedit name="providers"
                        minwidth="60x"
                        minheight="12gr"
                        deletemode="delete"
                        onentityedit="oneditprovider"
                        onmaprows="mapproviders"
                        orderable="true"
                        requestcolumns="wrd_title clientid metadataurl"
                        wrdtype="wrdauth_oidc_client"
                        customactions="testprovider">
        <column name="wrd_title" type="text" tid=".buttontitle" />
        <column name="metadataurl" type="text" />
        <column name="clientid" type="text" />
      </wrd:entitiesedit>
    </body>
  </screen>

  <screen name="editprovider" footerbuttons="ok cancel">
    <actions>
      <copyaction name="copycallbackurl" source="redirect_uri" title="" />
      <windowopenaction name="openmetadataurl" onwindowopen="onopenmetadataurl" tid="~open" />
    </actions>

    <compositions>
      <wrd:entity name="entity" wrdtype="wrdauth_oidc_client" />
    </compositions>

    <body>
      <heading doclink="platform:wrdauth/oidc/provider" tid=".provider" />
      <textedit composition="entity" cellname="wrd_title" width="1pr" required="true" tid=".buttontitle" />
      <textedit composition="entity" cellname="metadataurl" width="1pr" required="true">
        <button action="openmetadataurl" icon="tollium:actions/openlink" />
      </textedit>
      <textedit composition="entity" cellname="redirect_uri" name="redirect_uri" width="1pr" required="true">
        <button action="copycallbackurl" icon="tollium:actions/copy" />
      </textedit>
      <select composition="entity" cellname="visibility" type="pulldown">
        <option rowkey="" tid=".visibility-always" />
        <option rowkey="hidden" />

        <!-- <option rowkey="ifused" /> hide 'ifused' for now, not sure how its viable in practice -->
      </select>
      <heading doclink="platform:wrdauth/oidc/clientsettings" tid=".clientsettings" />
      <textedit composition="entity" cellname="clientid" width="1pr" minwidth="60x" />
      <line>
        <textedit composition="entity" cellname="clientsecret" width="1pr" password="true" />
        <checkbox name="showclientsecret" labeltid=".reveal" onchange="onreveal" title="" />
      </line>
      <datetime composition="entity" cellname="secret_expiration" type="datetime" storeutc="true" />
      <heading doclink="platform:wrdauth/oidc/configuration" tid=".configuration" />
      <textedit composition="entity" cellname="additionalscopes" width="1pr" />
      <textedit composition="entity" cellname="loginfield" width="1pr" placeholder="sub" value="sub" />
      <imgedit composition="entity" cellname="icon" width="1pr" height="100px" publisher="false" recommendedsize="48x48" />
      <textarea composition="entity" cellname="comments" width="1pr" minheight="3gr" tid="~comments" />
      <textedit composition="entity" cellname="wrd_tag" width="1pr" minheight="3gr" />
    </body>
  </screen>

  <screen name="testprovider" footerbuttons="close">
    <actions>
      <windowopenaction name="testlogin" onwindowopen="dotestlogin" />
    </actions>
    <body>
      <select name="prompt" type="pulldown">
        <option rowkey="" title=""/>
        <option rowkey="none" title="none"/>
        <!-- Technically the following options can be comnined too -->
        <option rowkey="login" title="login"/>
        <option rowkey="consent" title="consent"/>
        <option rowkey="select_account" title="select_account"/>
      </select>
      <button action="testlogin" />
    </body>
  </screen>

</screens>
