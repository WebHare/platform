<?wh

LOADLIB "wh::internet/urls.whlib";

LOADLIB "mod::tollium/lib/screenbase.whlib";

LOADLIB "mod::system/lib/configure.whlib";

LOADLIB "mod::wrd/lib/screenbase.whlib";

RECORD ARRAY statuscodes :=
[ [ code := "0", text := "Incomplete or invalid" ]
, [ code := "1", text := "Cancelled by client" ]
, [ code := "2", text := "Authorization refused" ]
, [ code := "4", text := "Order stored" ]
, [ code := "40", text := "Stored waiting external result" ]
, [ code := "41", text := "Waiting client payment" ]
, [ code := "5", text := "Authorized" ]
, [ code := "50", text := "Authorized waiting external result" ]
, [ code := "51", text := "Authorization waiting" ]
, [ code := "52", text := "Authorization not known" ]
, [ code := "55", text := "Stand-by" ]
, [ code := "56", text := "OK with Scheduled payments" ]
, [ code := "57", text := "Error in Scheduled Payments" ]
, [ code := "59", text := "Authoriz. to get manually" ]
, [ code := "6", text := "Authorized and cancelled" ]
, [ code := "61", text := "Author. deletion waiting" ]
, [ code := "62", text := "Author. deletion uncertain" ]
, [ code := "63", text := "Author. deletion refused" ]
, [ code := "64", text := "Authorized and cancelled" ]
, [ code := "7", text := "Payment deleted" ]
, [ code := "71", text := "Payment deletion pending" ]
, [ code := "72", text := "Payment deletion uncertain" ]
, [ code := "73", text := "Payment deletion refused" ]
, [ code := "74", text := "Payment deleted" ]
, [ code := "75", text := "Deletion processed by merchant" ]
, [ code := "8", text := "Refund" ]
, [ code := "81", text := "Refund pending" ]
, [ code := "82", text := "Refund uncertain" ]
, [ code := "83", text := "Refund refused" ]
, [ code := "84", text := "Payment declined by the acquirer" ]
, [ code := "85", text := "Refund processed by merchant" ]
, [ code := "9", text := "Payment requested" ]
, [ code := "91", text := "Payment processing" ]
, [ code := "92", text := "Payment uncertain" ]
, [ code := "93", text := "Payment refused" ]
, [ code := "94", text := "Refund declined by the acquirer" ]
, [ code := "95", text := "Payment processed by merchant" ]
, [ code := "99", text := "Being processed" ]
];

RECORD ARRAY errorcodes :=
[ [ code := "0020001001", text := "Authorization failed, please retry" ]
, [ code := "0020001002", text := "Authorization failed, please retry" ]
, [ code := "0020001003", text := "Authorization failed, please retry" ]
, [ code := "0020001004", text := "Authorization failed, please retry" ]
, [ code := "0020001005", text := "Authorization failed, please retry" ]
, [ code := "0020001006", text := "Authorization failed, please retry" ]
, [ code := "0020001007", text := "Authorization failed, please retry" ]
, [ code := "0020001008", text := "Authorization failed, please retry" ]
, [ code := "0020001009", text := "Authorization failed, please retry" ]
, [ code := "0020001010", text := "Authorization failed, please retry" ]
, [ code := "0030001999", text := "Our payment system is currently under maintenance, please try later" ]
, [ code := "0050001005", text := "Expiry date error" ]
, [ code := "0050001007", text := "Requested Operation code not allowed" ]
, [ code := "0050001008", text := "Invalid delay value" ]
, [ code := "0050001010", text := "Input date in invalid format" ]
, [ code := "0050001013", text := "Unable to parse socket input stream" ]
, [ code := "0050001014", text := "Error in parsing stream content" ]
, [ code := "0050001015", text := "Currency error" ]
, [ code := "0050001016", text := "Transaction still posted at end of wait" ]
, [ code := "0050001017", text := "Sync value not compatible with delay value" ]
, [ code := "0050001019", text := "Transaction duplicate of a pre-existing transaction" ]
, [ code := "0050001020", text := "Acceptation code empty while required for the transaction" ]
, [ code := "0050001024", text := "Maintenance acquirer differs from original transaction acquirer" ]
, [ code := "0050001025", text := "Maintenance merchant differs from original transaction merchant" ]
, [ code := "0050001028", text := "Maintenance operation not accurate for the original transaction" ]
, [ code := "0050001031", text := "Host application unknown for the transaction" ]
, [ code := "0050001032", text := "Unable to perform requested operation with requested currency" ]
, [ code := "0050001033", text := "Maintenance card number differs from original transaction card number" ]
, [ code := "0050001034", text := "Operation code not allowed" ]
, [ code := "0050001035", text := "Exception occurred in socket input stream treatment" ]
, [ code := "0050001036", text := "Card length does not correspond to an acceptable value for the brand" ]
, [ code := "0050001036", text := "Card length does not correspond to an acceptable value for the brand" ]
, [ code := "0050001068", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "0050001069", text := "Invalid check for CardID and Brand" ]
, [ code := "0050001070", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "0050001116", text := "Unknown origin IP" ]
, [ code := "0050001117", text := "No origin IP detected" ]
, [ code := "0050001118", text := "Merchant configuration problem, please contact support" ]
, [ code := "10001001", text := "Communication failure" ]
, [ code := "10001002", text := "Communication failure" ]
, [ code := "10001003", text := "Communication failure" ]
, [ code := "10001004", text := "Communication failure" ]
, [ code := "10001005", text := "Communication failure" ]
, [ code := "20001001", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001002", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001003", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001004", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001005", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001006", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001007", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001008", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001009", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001010", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001101", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "20001105", text := "We received an unknown status for the transaction. We will contact your acquirer and update the status of the transaction within one working day. Please check the status later." ]
, [ code := "20001111", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "20002001", text := "Origin for the response of the bank can not be checked" ]
, [ code := "20002002", text := "Beneficiary account number has been modified during processing" ]
, [ code := "20002003", text := "Amount has been modified during processing" ]
, [ code := "20002004", text := "Currency has been modified during processing" ]
, [ code := "20002005", text := "No feedback from the bank server has been detected" ]
, [ code := "30001001", text := "Payment refused by the acquirer" ]
, [ code := "30001002", text := "Duplicate request" ]
, [ code := "30001010", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "30001011", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "30001012", text := "Card black listed - Contact acquirer" ]
, [ code := "30001015", text := "Your merchant's acquirer is temporarily unavailable, please try later or choose another payment method." ]
, [ code := "30001051", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "30001054", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "30001057", text := "Your merchant's acquirer is temporarily unavailable, please try later or choose another payment method." ]
, [ code := "30001058", text := "Your merchant's acquirer is temporarily unavailable, please try later or choose another payment method." ]
, [ code := "30001060", text := "Aquirer indicates that a failure occured during payment processing" ]
, [ code := "30001090", text := "CVC check required by front end and returned invalid by acquirer" ]
, [ code := "30001091", text := "ZIP check required by front end and returned invalid by acquirer" ]
, [ code := "30001092", text := "Address check required by front end and returned as invalid by acquirer." ]
, [ code := "30001100", text := "Unauthorized buyer's country" ]
, [ code := "30001101", text := "IP country <> card country" ]
, [ code := "30001102", text := "Number of different countries too high" ]
, [ code := "30001103", text := "unauthorized card country" ]
, [ code := "30001104", text := "unauthorized ip address country" ]
, [ code := "30001105", text := "Anonymous proxy" ]
, [ code := "30001110", text := "If the problem persists, please contact Support, or go to paysafecard's card balance page (https://customer.cc.at.paysafecard.com/psccustomer/GetWelcomePanelServlet?language=en) to see when the amount reserved on your card will be available again." ]
, [ code := "30001120", text := "IP address in merchant's black list" ]
, [ code := "30001130", text := "BIN in merchant's black list" ]
, [ code := "30001140", text := "Card in merchant's card blacklist" ]
, [ code := "30001141", text := "Email in blacklist" ]
, [ code := "30001142", text := "Passenger name in blacklist" ]
, [ code := "30001143", text := "Card holder name in blacklist" ]
, [ code := "30001144", text := "Passenger name different from owner name" ]
, [ code := "30001145", text := "Time to departure too short" ]
, [ code := "30001149", text := "Card Configured in Card Supplier Limit for another relation (CSL)" ]
, [ code := "30001150", text := "Card not configured in the system for this customer (CSL)" ]
, [ code := "30001151", text := "REF1 not allowed for this relationship (Contract number" ]
, [ code := "30001152", text := "Card/Supplier Amount limit reached (CSL)" ]
, [ code := "30001153", text := "Card not allowed for this supplier (Date out of contract bounds)" ]
, [ code := "30001154", text := "You have reached the usage limit allowed" ]
, [ code := "30001155", text := "You have reached the usage limit allowed" ]
, [ code := "30001156", text := "You have reached the usage limit allowed" ]
, [ code := "30001157", text := "Unauthorized IP country for itinerary" ]
, [ code := "30001158", text := "email usage limit reached" ]
, [ code := "30001159", text := "Unauthorized card country/IP country combination" ]
, [ code := "30001160", text := "Postcode in highrisk group" ]
, [ code := "30001161", text := "generic blacklist match" ]
, [ code := "30001180", text := "maximum scoring reached" ]
, [ code := "30001997", text := "Authorization canceled by simulation" ]
, [ code := "30001998", text := "A technical problem occurred, please try again." ]
, [ code := "30001999", text := "Your merchant's acquirer is temporarily unavailable, please try later or choose another payment method." ]
, [ code := "30002001", text := "Payment refused by the financial institution" ]
, [ code := "30021001", text := "Call acquirer support call number." ]
, [ code := "30022001", text := "Payment must be approved by the acquirer before execution." ]
, [ code := "30031001", text := "Invalid merchant number." ]
, [ code := "30041001", text := "Retain card." ]
, [ code := "30051001", text := "Authorization declined" ]
, [ code := "30071001", text := "Retain card - special conditions." ]
, [ code := "30121001", text := "Invalid transaction" ]
, [ code := "30131001", text := "Invalid amount" ]
, [ code := "30131002", text := "You have reached the total amount allowed" ]
, [ code := "30141001", text := "Invalid card number" ]
, [ code := "30151001", text := "Unknown acquiring institution." ]
, [ code := "30171001", text := "Payment method cancelled by the buyer" ]
, [ code := "30171002", text := "The maximum time allowed is elapsed." ]
, [ code := "30191001", text := "Try again later." ]
, [ code := "30201001", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "30301001", text := "Invalid format" ]
, [ code := "30311001", text := "Unknown acquirer ID." ]
, [ code := "30331001", text := "Card expired." ]
, [ code := "30341001", text := "Suspicion of fraud." ]
, [ code := "30341002", text := "Suspicion of fraud (3rdMan)" ]
, [ code := "30341003", text := "Suspicion of fraud (Perseuss)" ]
, [ code := "30341004", text := "Suspicion of fraud (ETHOCA)" ]
, [ code := "30381001", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "30401001", text := "Invalid function." ]
, [ code := "30411001", text := "Lost card." ]
, [ code := "30431001", text := "Stolen card, pick up" ]
, [ code := "30511001", text := "Insufficient funds." ]
, [ code := "30521001", text := "No Authorization. Contact the issuer of your card." ]
, [ code := "30541001", text := "Card expired." ]
, [ code := "30551001", text := "Invalid PIN." ]
, [ code := "30561001", text := "Card not in authorizer's database." ]
, [ code := "30571001", text := "Transaction not permitted on card." ]
, [ code := "30581001", text := "Transaction not allowed on this terminal" ]
, [ code := "30591001", text := "Suspicion of fraud." ]
, [ code := "30601001", text := "The merchant must contact the acquirer." ]
, [ code := "30611001", text := "Amount exceeds card ceiling." ]
, [ code := "30621001", text := "Restricted card." ]
, [ code := "30631001", text := "Security policy not respected." ]
, [ code := "30641001", text := "Amount changed from ref. trn." ]
, [ code := "30681001", text := "Tardy response." ]
, [ code := "30751001", text := "PIN entered incorrectly too often" ]
, [ code := "30761001", text := "Card holder already contesting." ]
, [ code := "30771001", text := "PIN entry required." ]
, [ code := "30811001", text := "Message flow error." ]
, [ code := "30821001", text := "Authorization center unavailable" ]
, [ code := "30831001", text := "Authorization center unavailable" ]
, [ code := "30901001", text := "Temporary system shutdown." ]
, [ code := "30911001", text := "Acquirer unavailable." ]
, [ code := "30921001", text := "Invalid card type for acquirer." ]
, [ code := "30941001", text := "Duplicate transaction" ]
, [ code := "30961001", text := "Processing temporarily not possible" ]
, [ code := "30971001", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "30981001", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "31011001", text := "Unknown acceptance code" ]
, [ code := "31021001", text := "Invalid currency" ]
, [ code := "31031001", text := "Acceptance code missing" ]
, [ code := "31041001", text := "Inactive card" ]
, [ code := "31051001", text := "Merchant not active" ]
, [ code := "31061001", text := "Invalid expiration date" ]
, [ code := "31071001", text := "Interrupted host communication" ]
, [ code := "31081001", text := "Card refused" ]
, [ code := "31091001", text := "Invalid password" ]
, [ code := "31101001", text := "Plafond transaction (majoré du bonus) dépassé" ]
, [ code := "31111001", text := "Plafond mensuel (majoré du bonus) dépassé" ]
, [ code := "31121001", text := "Plafond centre de facturation dépassé" ]
, [ code := "31131001", text := "Plafond entreprise dépassé" ]
, [ code := "31141001", text := "Code MCC du fournisseur non autorisé pour la carte" ]
, [ code := "31151001", text := "Numéro SIRET du fournisseur non autorisé pour la carte" ]
, [ code := "31161001", text := "This is not a valid online banking account" ]
, [ code := "32001004", text := "A technical problem occurred, please try again." ]
, [ code := "39991001", text := "A technical problem occurred, please contact the helpdesk of your acquirer" ]
, [ code := "40001001", text := "A technical problem occurred, please try again." ]
, [ code := "40001002", text := "A technical problem occurred, please try again." ]
, [ code := "40001003", text := "A technical problem occurred, please try again." ]
, [ code := "40001004", text := "A technical problem occurred, please try again." ]
, [ code := "40001005", text := "A technical problem occurred, please try again." ]
, [ code := "40001006", text := "A technical problem occurred, please try again." ]
, [ code := "40001007", text := "A technical problem occurred, please try again." ]
, [ code := "40001008", text := "A technical problem occurred, please try again." ]
, [ code := "40001009", text := "A technical problem occurred, please try again." ]
, [ code := "40001010", text := "A technical problem occurred, please try again." ]
, [ code := "40001011", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "40001012", text := "Your merchant's acquirer is temporarily unavailable, please try later or choose another payment method." ]
, [ code := "40001013", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "40001016", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "40001018", text := "A technical problem occurred, please try again." ]
, [ code := "40001019", text := "Sorry, an error occurred during processing. Please retry the operation (use back button of the browser). If problem persists, contact your merchant's helpdesk." ]
, [ code := "40001020", text := "Sorry, an error occurred during processing. Please retry the operation (use back button of the browser). If problem persists, contact your merchant's helpdesk." ]
, [ code := "40001050", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "40001133", text := "Authentication failed, the signature of your bank access control server is incorrect" ]
, [ code := "40001134", text := "Authentication failed, please retry or cancel." ]
, [ code := "40001135", text := "Authentication temporary unavailable, please retry or cancel." ]
, [ code := "40001136", text := "Technical problem with your browser, please retry or cancel" ]
, [ code := "40001137", text := "Your bank access control server is temporary unavailable, please retry or cancel" ]
, [ code := "40001998", text := "Temporary technical problem. Please retry a little bit later." ]
, [ code := "50001001", text := "Unknown card type" ]
, [ code := "50001002", text := "Card number format check failed for given card number." ]
, [ code := "50001003", text := "Merchant data error" ]
, [ code := "50001004", text := "Merchant identification missing" ]
, [ code := "50001005", text := "Expiry date error" ]
, [ code := "50001006", text := "Amount is not a number" ]
, [ code := "50001007", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001008", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001009", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001010", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001011", text := "Brand not supported for that merchant" ]
, [ code := "50001012", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001013", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001014", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001015", text := "Invalid currency code" ]
, [ code := "50001016", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001017", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001018", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001019", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001020", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001021", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001022", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001023", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001024", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001025", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001026", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001027", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001028", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001029", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001030", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001031", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001032", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001033", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001034", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001035", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001036", text := "Card length does not correspond to an acceptable value for the brand" ]
, [ code := "50001037", text := "Purchasing card number for a regular merchant" ]
, [ code := "50001038", text := "Non Purchasing card for a Purchasing card merchant" ]
, [ code := "50001039", text := "Details sent for a non-Purchasing card merchant, please contact helpdesk" ]
, [ code := "50001040", text := "Details not sent for a Purchasing card transaction, please contact helpdesk" ]
, [ code := "50001041", text := "Payment detail validation failed" ]
, [ code := "50001042", text := "Given transactions amounts (tax,discount,shipping,net,etc…) do not compute correctly together" ]
, [ code := "50001043", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001044", text := "No acquirer configured for this operation" ]
, [ code := "50001045", text := "No UID configured for this operation" ]
, [ code := "50001046", text := "Operation not allowed for the merchant" ]
, [ code := "50001047", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001048", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001049", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001050", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001051", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001052", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001053", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001054", text := "Card number incorrect or incompatible" ]
, [ code := "50001055", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001056", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001057", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001058", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001059", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001060", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001061", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001062", text := "A technical problem occurred, please contact helpdesk" ]
, [ code := "50001063", text := "Card Issue Number does not correspond to range or not present" ]
, [ code := "50001064", text := "Start Date not valid or not present" ]
, [ code := "50001066", text := "Format of CVC code invalid" ]
, [ code := "50001067", text := "The merchant is not enrolled for 3D-Secure" ]
, [ code := "50001068", text := "The card number or account number (PAN) is invalid" ]
, [ code := "50001069", text := "Invalid check for CardID and Brand" ]
, [ code := "50001070", text := "The ECI value given is either not supported, or in conflict with other data in the transaction" ]
, [ code := "50001071", text := "Incomplete TRN demat" ]
, [ code := "50001072", text := "Incomplete PAY demat" ]
, [ code := "50001073", text := "No demat APP" ]
, [ code := "50001074", text := "Authorisation too old" ]
, [ code := "50001075", text := "VERRes was an error message" ]
, [ code := "50001076", text := "DCP amount greater than authorisation amount" ]
, [ code := "50001077", text := "Details negative amount" ]
, [ code := "50001078", text := "Details negative quantity" ]
, [ code := "50001079", text := "Could not decode/decompress received PARes (3D-Secure)" ]
, [ code := "50001080", text := "Received PARes was an erereor message from ACS (3D-Secure)" ]
, [ code := "50001081", text := "Received PARes format was invalid according to the 3DS specifications (3D-Secure)" ]
, [ code := "50001082", text := "PAReq/PARes reconciliation failure (3D-Secure)" ]
, [ code := "50001084", text := "Maximum amount reached" ]
, [ code := "50001087", text := "The transaction type requires authentication, please check with your bank." ]
, [ code := "50001090", text := "CVC missing at input, but CVC check asked" ]
, [ code := "50001091", text := "ZIP missing at input, but ZIP check asked" ]
, [ code := "50001092", text := "Address missing at input, but Address check asked" ]
, [ code := "50001095", text := "Invalid date of birth" ]
, [ code := "50001096", text := "Invalid commodity code" ]
, [ code := "50001097", text := "The requested currency and brand are incompatible." ]
, [ code := "50001111", text := "Data validation error" ]
, [ code := "50001113", text := "This order has already been processed" ]
, [ code := "50001114", text := "Error pre-payment check page access" ]
, [ code := "50001115", text := "Request not received in secure mode" ]
, [ code := "50001116", text := "Unknown IP address origin" ]
, [ code := "50001117", text := "NO IP address origin" ]
, [ code := "50001118", text := "Pspid not found or not correct" ]
, [ code := "50001119", text := "Password incorrect or disabled due to numbers of errors" ]
, [ code := "50001120", text := "Invalid currency" ]
, [ code := "50001121", text := "Invalid number of decimals for the currency" ]
, [ code := "50001122", text := "Currency not accepted by the merchant" ]
, [ code := "50001123", text := "Card type not active" ]
, [ code := "50001124", text := "Number of lines don't match with number of payments" ]
, [ code := "50001125", text := "Format validation error" ]
, [ code := "50001126", text := "Overflow in data capture requests for the original order" ]
, [ code := "50001127", text := "The original order is not in a correct status" ]
, [ code := "50001128", text := "missing authorization code for unauthorized order" ]
, [ code := "50001129", text := "Overflow in refunds requests" ]
, [ code := "50001130", text := "Error access to original order" ]
, [ code := "50001131", text := "Error access to original history item" ]
, [ code := "50001132", text := "The Selected Catalog is empty" ]
, [ code := "50001133", text := "Duplicate request" ]
, [ code := "50001134", text := "Authentication failed, please retry or cancel." ]
, [ code := "50001135", text := "Authentication temporary unavailable, please retry or cancel." ]
, [ code := "50001136", text := "Technical problem with your browser, please retry or cancel" ]
, [ code := "50001137", text := "Your bank access control server is temporary unavailable, please retry or cancel" ]
, [ code := "50001150", text := "Fraud Detection, Technical error (IP not valid)" ]
, [ code := "50001151", text := "Fraud detection : technical error (IPCTY unknown or error)" ]
, [ code := "50001152", text := "Fraud detection : technical error (CCCTY unknown or error)" ]
, [ code := "50001153", text := "Overflow in redo-authorisation requests" ]
, [ code := "50001170", text := "Dynamic BIN check failed" ]
, [ code := "50001171", text := "Dynamic country check failed" ]
, [ code := "50001172", text := "Error in Amadeus signature" ]
, [ code := "50001174", text := "Card Holder Name is too long" ]
, [ code := "50001175", text := "Name contains invalid characters" ]
, [ code := "50001176", text := "Card number is too long" ]
, [ code := "50001177", text := "Card number contains non-numeric info" ]
, [ code := "50001178", text := "Card Number Empty" ]
, [ code := "50001179", text := "CVC too long" ]
, [ code := "50001180", text := "CVC contains non-numeric info" ]
, [ code := "50001181", text := "Expiration date contains non-numeric info" ]
, [ code := "50001182", text := "Invalid expiration month" ]
, [ code := "50001183", text := "Expiration date must be in the future" ]
, [ code := "50001184", text := "SHA Mismatch" ]
, [ code := "60000001", text := "account number unknown" ]
, [ code := "60000003", text := "not credited dd-mm-yy" ]
, [ code := "60000005", text := "name/number do not correspond" ]
, [ code := "60000007", text := "account number blocked" ]
, [ code := "60000008", text := "specific direct debit block" ]
, [ code := "60000009", text := "account number WKA" ]
, [ code := "60000010", text := "administrative reason" ]
, [ code := "60000011", text := "account number expired" ]
, [ code := "60000012", text := "no direct debit authorisation given" ]
, [ code := "60000013", text := "debit not approved" ]
, [ code := "60000014", text := "double payment" ]
, [ code := "60000018", text := "name/address/city not entered" ]
, [ code := "60001001", text := "no original direct debit for revocation" ]
, [ code := "60001002", text := "payer’s account number format error" ]
, [ code := "60001004", text := "payer’s account at different bank" ]
, [ code := "60001005", text := "payee’s account at different bank" ]
, [ code := "60001006", text := "payee’s account number format error" ]
, [ code := "60001007", text := "payer’s account number blocked" ]
, [ code := "60001008", text := "payer’s account number expired" ]
, [ code := "60001009", text := "payee’s account number expired" ]
, [ code := "60001010", text := "direct debit not possible" ]
, [ code := "60001011", text := "creditor payment not possible" ]
, [ code := "60001012", text := "payer’s account number unknown WKA-number" ]
, [ code := "60001013", text := "payee’s account number unknown WKA-number" ]
, [ code := "60001014", text := "impermissible WKA transaction" ]
, [ code := "60001015", text := "period for revocation expired" ]
, [ code := "60001017", text := "reason for revocation not correct" ]
, [ code := "60001018", text := "original run number not numeric" ]
, [ code := "60001019", text := "payment ID incorrect" ]
, [ code := "60001020", text := "amount not numeric" ]
, [ code := "60001021", text := "amount zero not permitted" ]
, [ code := "60001022", text := "negative amount not permitted" ]
, [ code := "60001023", text := "payer and payee giro account number" ]
, [ code := "60001025", text := "processing code (verwerkingscode) incorrect" ]
, [ code := "60001028", text := "revocation not permitted" ]
, [ code := "60001029", text := "guaranteed direct debit on giro account number" ]
, [ code := "60001030", text := "NBC transaction type incorrect" ]
, [ code := "60001031", text := "description too large" ]
, [ code := "60001032", text := "book account number not issued" ]
, [ code := "60001034", text := "book account number incorrect" ]
, [ code := "60001035", text := "payer’s account number not numeric" ]
, [ code := "60001036", text := "payer’s account number not eleven-proof" ]
, [ code := "60001037", text := "payer’s account number not issued" ]
, [ code := "60001039", text := "payer’s account number of DNB/BGC/BLA" ]
, [ code := "60001040", text := "payee’s account number not numeric" ]
, [ code := "60001041", text := "payee’s account number not eleven-proof" ]
, [ code := "60001042", text := "payee’s account number not issued" ]
, [ code := "60001044", text := "payee’s account number unknown" ]
, [ code := "60001050", text := "payee’s name missing" ]
, [ code := "60001051", text := "indicate payee’s bank account number instead of 3102" ]
, [ code := "60001052", text := "no direct debit contract" ]
, [ code := "60001053", text := "amount beyond bounds" ]
, [ code := "60001054", text := "selective direct debit block" ]
, [ code := "60001055", text := "original run number unknown" ]
, [ code := "60001057", text := "payer’s name missing" ]
, [ code := "60001058", text := "payee’s account number missing" ]
, [ code := "60001059", text := "restore not permitted" ]
, [ code := "60001060", text := "bank’s reference (navraaggegeven) missing" ]
, [ code := "60001061", text := "BEC/GBK number incorrect" ]
, [ code := "60001062", text := "BEC/GBK code incorrect" ]
, [ code := "60001087", text := "book account number not numeric" ]
, [ code := "60001090", text := "cancelled on request" ]
, [ code := "60001091", text := "cancellation order executed" ]
, [ code := "60001092", text := "cancelled instead of bended" ]
, [ code := "60001093", text := "book account number is a shortened account number" ]
, [ code := "60001094", text := "instructing party account number not identical with payer" ]
, [ code := "60001095", text := "payee unknown GBK acceptor" ]
, [ code := "60001097", text := "instructing party account number not identical with payee" ]
, [ code := "60001099", text := "clearing not permitted" ]
, [ code := "60001101", text := "payer’s account number not spaces" ]
, [ code := "60001102", text := "PAN length not numeric" ]
, [ code := "60001103", text := "PAN length outside limits" ]
, [ code := "60001104", text := "track number not numeric" ]
, [ code := "60001105", text := "track number not valid" ]
, [ code := "60001106", text := "PAN sequence number not numeric" ]
, [ code := "60001107", text := "domestic PAN not numeric" ]
, [ code := "60001108", text := "domestic PAN not eleven-proof" ]
, [ code := "60001109", text := "domestic PAN not issued" ]
, [ code := "60001110", text := "foreign PAN not numeric" ]
, [ code := "60001111", text := "card valid date not numeric" ]
, [ code := "60001112", text := "book period number (boekperiodenr) not numeric" ]
, [ code := "60001113", text := "transaction number not numeric" ]
, [ code := "60001114", text := "transaction time not numeric" ]
, [ code := "60001115", text := "transaction no valid time" ]
, [ code := "60001116", text := "transaction date not numeric" ]
, [ code := "60001117", text := "transaction no valid date" ]
, [ code := "60001118", text := "STAN not numeric" ]
, [ code := "60001119", text := "instructing party’s name missing" ]
, [ code := "60001120", text := "foreign amount (bedrag-vv) not numeric" ]
, [ code := "60001122", text := "rate (verrekenkoers) not numeric" ]
, [ code := "60001125", text := "number of decimals (aantaldecimalen) incorrect" ]
, [ code := "60001126", text := "tariff (tarifering) not B/O/S" ]
, [ code := "60001127", text := "domestic costs (kostenbinnenland) not numeric" ]
, [ code := "60001128", text := "domestic costs (kostenbinnenland) not higher than zero" ]
, [ code := "60001129", text := "foreign costs (kostenbuitenland) not numeric" ]
, [ code := "60001130", text := "foreign costs (kostenbuitenland) not higher than zero" ]
, [ code := "60001131", text := "domestic costs (kostenbinnenland) not zero" ]
, [ code := "60001132", text := "foreign costs (kostenbuitenland) not zero" ]
, [ code := "60001134", text := "Euro record not fully filled in" ]
, [ code := "60001135", text := "Client currency incorrect" ]
, [ code := "60001136", text := "Amount NLG not numeric" ]
, [ code := "60001137", text := "Amount NLG not higher than zero" ]
, [ code := "60001138", text := "Amount NLG not equal to Amount" ]
, [ code := "60001139", text := "Amount NLG incorrectly converted" ]
, [ code := "60001140", text := "Amount EUR not numeric" ]
, [ code := "60001141", text := "Amount EUR not greater than zero" ]
, [ code := "60001142", text := "Amount EUR not equal to Amount" ]
, [ code := "60001143", text := "Amount EUR incorrectly converted" ]
, [ code := "60001144", text := "Client currency not NLG" ]
, [ code := "60001145", text := "rate euro-vv (Koerseuro-vv) not numeric" ]
, [ code := "60001146", text := "comma rate euro-vv (Kommakoerseuro-vv) incorrect" ]
, [ code := "60001147", text := "acceptgiro distributor not valid" ]
, [ code := "60001148", text := "Original run number and/or BRN are missing" ]
, [ code := "60001149", text := "Amount/Account number/ BRN different" ]
, [ code := "60001150", text := "Direct debit already revoked/restored" ]
, [ code := "60001151", text := "Direct debit already reversed/revoked/restored" ]
, [ code := "60001153", text := "Payer’s account number not known" ]
];

PUBLIC STATIC OBJECTTYPE ConfigIngenico EXTEND PSPSettingsExtensionBase
<
  UPDATE PUBLIC MACRO InitExtension(OBJECT extendablelinescontainer)
  {
    PSPSettingsExtensionBase::InitExtension(extendablelinescontainer);
    STRING url := GetPrimaryWebhareInterfaceURL();
    ^directhttpurl->value := ResolvetoAbsoluteURL(url, "/.wrd/endpoints/psp/ingenico.shtml");
  }
  UPDATE PUBLIC RECORD FUNCTION GetPaymentProviderValue()
  {
    RETURN ^methodsettings->value;
  }
  UPDATE PUBLIC MACRO SetPaymentProviderValue(RECORD settings)
  {
    ^methodsettings->value := settings;
  }
>;

PUBLIC STATIC OBJECTTYPE PayInfo EXTEND TolliumScreenBase
<
  MACRO Init(RECORD data)
  {
    RECORD meta := data.payment->__GetPaymentData();
    IF(NOT RecordExists(meta) OR NOT CellExists(meta,'status'))
    {
      ^result->value := this->GetTid(".noregisteredstatus"); //      "No status appears to be registered\n\nInternal error or payment method changed afterwards?";
    }
    ELSE
    {
      STRING statustext := SELECT AS STRING text FROM statuscodes WHERE code=meta.status;
      STRING errortext := SELECT AS STRING text FROM errorcodes WHERE code=meta.ncerror;

      //FIXME add amount but first fix encodehson from doing money->float on it
      ^result->value := meta.result;
      ^paymentid->value := meta.payid;
      ^paymentmethod->value := meta.pm;
      ^brand->value := meta.brand;
      ^status->value := meta.status || (statustext!="" ? " (" || statustext || ")" : "");
      ^orderid->value := meta.orderid;
      ^ncerror->value := meta.ncerror || (errortext!="" ? " (" || errortext || ")" : "");
    }
  }
>;
