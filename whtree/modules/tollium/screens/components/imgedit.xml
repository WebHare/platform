<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         gid="tollium:components.imgedit"
         library="/lib/components/imgedit.whlib">

  <fragment name="tolliumimgedit">
    <actions>
      <imageaction name="act_upload" imageactiontype="upload" onupload="onuploadimage" tid="~upload" />
      <action name="act_publisher" onexecute="publisherimage" title="" />
      <action name="act_medialibrary" onexecute="medialibraryimage" title="" />
      <action name="properties" ellipsis="true" onexecute="doproperties" tid="~properties" />
      <action name="edit" onexecute="editimage" title="" />
      <downloadaction name="download" ondownload="downloadimage" tid="~download" />
      <action name="clear" onexecute="clearimage" title="" />
      <imageaction name="editaction" imageactiontype="edit" onupload="onuploadimage" title="" />
      <action name="closeinfopanel" onexecute="dohideinfopanel" title="" />
    </actions>
    <menus>
      <menu name="otheractions" gid="tollium:components.imgedit">
        <item action="properties" disablemode="hidden" />
        <item action="act_upload" disablemode="hidden" tid=".replace-upload" />
        <item action="act_publisher" disablemode="hidden" tid=".replace-publisher" />
        <item action="act_medialibrary" disablemode="hidden" tid=".replace-medialibrary" />
        <item action="download" disablemode="hidden" />
      </menu>
    </menus>
    <contents>
      <inlineblock name="container" title="">
        <tabs name="mytabs" type="server" height="1pr">
          <!-- Needed so we can keep the size stabile when switching to the infopanel -->
          <tab name="imagetab" title="">
            <!-- image is set as background image for the "preview" component -->
            <panel name="preview" width="1pr" height="1pr" borders="all">
              <panel backgroundcolor="#ffffffcc" borders="bottom" spacers="left">
                <line layout="tabs-space">
                  <text name="sizehint" title="" value="" />
                  <text title="" value="   " />
                  <text name="moreinfo" onclicklink="doshowinfopanel" title="" visible="false" />
                  <text width="1pr" title="" />
                  <buttongroup name="buttons" borders="left" layout="horizontal">
                    <button name="uploadbutton"
                            action="act_upload"
                            hinttid=".add_image"
                            icon="tollium:filemgr/uploadfile"
                            title="" />
                    <button name="publisherbutton"
                            action="act_publisher"
                            hinttid=".select_image"
                            icon="tollium:actions/open"
                            title="" />
                    <button name="medialibrarybutton"
                            action="act_medialibrary"
                            hinttid=".media_library"
                            icon="tollium:folders/photoalbum"
                            title="" />
                    <button name="editbutton" action="edit" hinttid=".edit_image" icon="tollium:actions/edit" title="" />
                    <button name="clearbutton" action="clear" hinttid=".clear_image" icon="tollium:actions/delete" title="" />
                    <button name="otherbutton"
                            hinttid=".other_actions"
                            icon="tollium:objects/ellipsis"
                            menu="otheractions"
                            title="" />
                  </buttongroup>
                </line>
              </panel>
              <panel name="droptarget" width="1pr" height="1pr">
                <acceptdrops acceptmultiple="false" ondrop="onfiledrop">
                  <acceptfile imageactiontype="edit" />
                </acceptdrops>
              </panel>
              <panel backgroundcolor="#ffffffcc" borders="top" layout="left" spacers="left right">
                <line>
                  <text name="filename" width="1pr" ellipsis="true" title="" value="tollium:components.imgedit.no_image" />
                  <text name="dimensions" title="" value="" />
                </line>
              </panel>
            </panel>
          </tab>

          <!-- The height="1gr" forces the tab to NOT grow-to-fit to it's content. Since each tab is forced to be as high as the highest tab this means the infotab will be as large as the imagetab.
          Now we can make the panel scrollable.
          -->
          <tab name="infotab" height="1gr" title="">
            <panel name="infopanel" height="1pr" backgroundcolor="#ffffff" borders="all" vscroll="true">
              <panel height="1pr" layout="left" spacers="all">
                <line>
                  <text name="imagedimensionsheader" title="" valuetid=".imagedimensions" />
                  <spacer width="1pr" />
                  <image width="16px" height="16px" action="closeinfopanel" value="tollium:actions/delete" />
                </line>
                <text name="imagedimensions" title="" wordwrap="true" />
                <text />
                <heading name="moreinformationheader" tid=".moreinformation" />
                <text name="moreinformation" title="" wordwrap="true" />
              </panel>
            </panel>
          </tab>
        </tabs>
      </inlineblock>
    </contents>
  </fragment>

  <screen name="properties" tid="~properties">
    <body>
      <textedit name="filename" width="1pr" required="true" />
      <coloredit name="dominantcolor" showedit="true" />
    </body>

    <footer>
      <defaultformbuttons name="buttons" buttons="ok cancel" />
    </footer>
  </screen>

</screens>
