<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
          xmlns:wrd="http://www.webhare.net/xmlns/wrd/components">


  <!-- FIXME <appcontexts> -->
  <screen name="main" allowresize="true" menubar="menubar" implementation="none">
    <actions>
      <forward name="addperson" action="persons->add" tid="~add" />
    </actions>
    <menus>
      <menu name="menubar">
        <item action="persons->add" />
      </menu>
    </menus>
    <compositions>
      <!-- FIXME: test proper deregistration of the autoupdate handler when screen is closed -->
      <wrd:entity name="entity" wrdtype="wrd_person" autoupdate="true" onupdate="onupdate" />
    </compositions>
    <toolbar>
      <button action="addperson" /> <!-- 2 step forward -->
      <button name="editbutton" action="persons->edit" tid="~edit" />
      <button action="persons->delete" />
    </toolbar>
    <body>
      <wrd:entitiesedit name="persons" wrdtype="wrd_person" entityeditscreen=".person" onselect="onpersonselect" showbuttons="false" flags="test_boolean">
        <column name="wrd_fullname" type="text" tid="~fullname" />
        <column name="wrd_contact_email" type="email" tid="~email" />
        <column name="richie" type="richdocument" tid="~description" />
      </wrd:entitiesedit>
      <box  >
        <text name="selected_email" value="OverwriteMe" composition="entity" cellname="wrd_contact_email" tid="~email" />
        <textedit name="autoupdatecount" valuetype="integer" readonly="true" />
      </box>
    </body>
  </screen>

  <screen implementation="none" name="person">
    <compositions>
      <wrd:entity name="entity" wrdtype="wrd_person" />
    </compositions>
    <body spacers="none">
      <tabs>
        <tab >
          <textedit         name="email"       cellname="wrd_contact_email" composition="entity" tid="~email"/>
          <wrd:selectentity name="dom_single"  title="test_single_domain" composition="entity"  cellname="test_single_domain"   type="radio"        height="1pr" />
          <wrd:selectentity name="dom_single2" title="test_single_domain2" composition="entity"  cellname="test_single_domain2"  type="checkbox"     height="1pr" /><!-- must fall back to 'radio' due to singledomain -->
          <wrd:selectentity name="dom_single3" title="test_single_domain3" composition="entity"  cellname="test_single_domain3"  type="checkboxlist" height="1pr" /><!-- must fall back to 'radio' due to singledomain -->
          <wrd:selectentity name="dom_multi"   title="test_multiple_domain" composition="entity"  cellname="test_multiple_domain" type="checkbox" selectmultiple="true" height="1pr" />
          <wrd:selectentity name="dom_multi2"  title="test_multiple_domain2"  composition="entity" cellname="test_multiple_domain2" type="checkboxlist" selectmultiple="true" height="1pr" />
          <wrd:domaintagedit name="dom_multi3" title="test_multiple_domain3"  composition="entity" cellname="test_multiple_domain3" restrictvalues="true" /> <!-- FIXME read wrdtype from the wrd:entity -->
        </tab>
        <tab >
          <select name="testdom1_select" type="radio" title="testdom1_select">
            <wrd:runquery wrdtype="test_domain_1" />
          </select>
          <select name="testdom1_select_wrdguid" type="radio" title="testdom1_select_wrdguid">
            <wrd:runquery wrdtype="test_domain_1" rowkeytag="WRD_GUID" />
          </select>
        </tab>
        <tab  spacers="none">
          <richdocument name="richie"
                        cellname="richie" composition="entity"
                        rtdtype="http://www.webhare.net/xmlns/webhare_testsuite/rtd/level1"
                        width="1pr" height="1pr" minheight="8gr"
                        />
        </tab>
        <tab >
          <wrd:entitiesedit name="attachments" wrdtype="personattachment" entityeditscreen="#editattachment" linkfrom="entity">
            <column name="attachfree" type="text" tid="~title" />
          </wrd:entitiesedit>
        </tab>
      </tabs>
    </body>
    <footer>
      <defaultformbuttons buttons="ok cancel" />
    </footer>
  </screen>

  <screen name="editattachment" implementation="wrd:entityedit">
    <compositions>
      <wrd:entity name="entity"/>
    </compositions>
    <body>
      <textedit composition="entity" cellname="attachfree" title="attachfree" />
    </body>
    <footer>
      <defaultformbuttons buttons="ok cancel" />
    </footer>
  </screen>

</screens>
