<?wh
/* RTE restructuring tests, used by harescript and javascript implementations
   To run in JS: https://my.webhare.dev/.system/jstests/?site=WebHare%20testsuite%20site&nocatch=1&mask=wh.jscomponents.rte.teststructured-restructuring
   To run in WH: wh runtest publisher.rtd.testrestructuring
*/

/// Test for proper style matching on lists
PUBLIC CONSTANT STRING listtest_structure :=
     '<richstructure xmlns="http://www.webhare.net/xmlns/tollium/richstructure">\n'
  || '  <blockstyles defaultstyle="NORMAL">\n'
  || '    <textstyle tag="HEADING1" containertag="h1" />\n'
  || '    <textstyle tag="HEADING2" containertag="h2" />\n'
  || '    <textstyle tag="HEADING3" containertag="h3" />\n'
  || '    <textstyle tag="HEADING4" containertag="h4" />\n'
  || '    <textstyle tag="NORMAL" />\n'
  || '    <textstyle tag="UNORDERED" containertag="ul" />\n'
  || '    <textstyle tag="ORDERED" containertag="ol" />\n'
  || '    <tablestyle tag="TABLE" />\n'
  || '  </blockstyles>\n'
  || '</richstructure>\n';

/// structure that roughly mimics the structure used by the js structured editor test page /pages/rte/index.shtml
PUBLIC CONSTANT STRING pages_rte_test_structure :=
`<rtdtype xmlns="http://www.webhare.net/xmlns/publisher/siteprofile" namespace="http://www.webhare.net/xmlns/webhare_testsuite/page_rte_test_structure">
  <blockstyles defaultstyle="NORMAL">
    <textstyle tag="CONTENTTAB" importfrom="h2.tab" containertag="p">
      <importfrom selector="h2.tab" />
    </textstyle>
    <textstyle tag="HEADING1" title="Kop 1" textstyles="i u" toolbarcss="font:bold 16px Verdana; color:#000000;" containertag="h1" nextblockstyle="HEADING2" />
    <textstyle tag="HEADING2" title="Kop 2" textstyles="i u" toolbarcss="font:bold 14px Verdana; color:#000000;" containertag="h2" nextblockstyle="NORMAL" />
    <textstyle tag="NORMAL" title="Normaal" textstyles="i u b sub sup a-href strike img" containertag="p" />
    <textstyle tag="MYSTYLE" title="MyCustomStyle" textstyles="i u b sub sup a-href strike img" containertag="p" />
    <textstyle tag="ORDERED" title="Genummerde lijst" textstyles="i u b sub sup a-href strike img" containertag="ol" />
    <textstyle tag="UNORDERED" title="Ongenummerde lijst" textstyles="i u" containertag="ul" />
    <tablestyle tag="TABLE" title="Tabel" defaultstyle="MYSTYLE" containertag="table" />
    <tablestyle tag="ALTTABLE" title="Alt Tabel" defaultstyle="MYSTYLE" containertag="table" />
    <cellstyle tag="blue" title="Blue Cell" />
    <cellstyle tag="red" title="Red Cell" />
  </blockstyles>
</rtdtype>`;

CONSTANT STRING edudex_structure :=
`<richstructure xmlns="http://www.webhare.net/xmlns/tollium/richstructure">
  <blockstyles defaultstyle="NORMAL">
    <textstyle tag="NORMAL">
      <formatting base="none">
        <allow textstyles="a-href b i u strike sub sup" />
      </formatting>
    </textstyle>
    <textstyle tag="UNORDERED" containertag="ul">
      <formatting base="none">
        <allow textstyles="a-href b i u strike sub sup" />
      </formatting>
    </textstyle>
    <textstyle tag="ORDERED" containertag="ol">
      <formatting base="none">
        <allow textstyles="a-href b i u strike sub sup" />
      </formatting>
    </textstyle>
  </blockstyles>
</richstructure>
`;

/// structure that roughly mimics the structure used by the js structured editor test page /pages/rte/index.shtml
PUBLIC CONSTANT STRING allowallinlines_structure :=
`<rtdtype xmlns="http://www.webhare.net/xmlns/publisher/siteprofile" namespace="http://www.webhare.net/xmlns/webhare_testsuite/page_rte_test_structure">
  <blockstyles defaultstyle="NORMAL">
    <textstyle tag="NORMAL" title="Normaal" textstyles="i u b sub sup a-href strike img ins del" containertag="p" />
  </blockstyles>
</rtdtype>`;


/** tests

    expect_hs is used for harescript overrides. Harescript doesn't have a CSS engine, and can't measure table widths.
    However, the hs engine should read and preserve it from the javascript reformatted data.
*/
PUBLIC CONSTANT RECORD ARRAY restructuringtests :=
    [ [ title :=          "Extra surronding divs"
      , structure :=      "mod::webhare_testsuite/data/test/custompage.structure.xml"
      , input :=          `<div><div><p>Medewerker onderzoek onderzoeksgroep Beliefs 2012 - heden <br/><br/>Natuur &amp; Techniek</p></div></div>`
      , expect :=         `<p class="normal">Medewerker onderzoek onderzoeksgroep Beliefs 2012 - heden <br/><br/>Natuur &amp; Techniek</p>`
      ]
    , [ title :=          "Word pasted stuff"
      , structure :=      "mod::webhare_testsuite/data/test/custompage.structure.xml"
      , input :=          `<html><body><div><div><div><p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><span style="FONT-FAMILY: &#34;Calibri&#34;, &#34;sans-serif&#34;; COLOR: #1f497d; FONT-SIZE: 11pt; mso-ansi-language: NL">Drs M (Marja) Vollaard</span></p><p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><span style="FONT-FAMILY: &#34;Calibri&#34;, &#34;sans-serif&#34;; COLOR: #1f497d; FONT-SIZE: 11pt; mso-ansi-language: NL">Ambtelijk secretaris Examencommissie</span></p><p></p><p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><span style="FONT-FAMILY: &#34;Calibri&#34;, &#34;sans-serif&#34;; COLOR: #1f497d; FONT-SIZE: 11pt; mso-ansi-language: NL">Ambtelijk secretaris Commissie voor Wetenschapsbeoefening</span></p></div></div></div></body></html>`
      , expect :=         `<p class="normal">Drs M (Marja) Vollaard</p><p class="normal">Ambtelijk secretaris Examencommissie</p><p class="normal">Ambtelijk secretaris Commissie voor Wetenschapsbeoefening</p>`
      ]
    , [ title :=          "Elimination of lists in structure that doesn't allow them"
      , structure :=      "mod::webhare_testsuite/data/test/custompage.structure.xml" // does not allow
      , input :=          '<html><body><ol><li>item</li></ol></body></html>'
      , expect :=         '<body><p class="normal">item</p></body>'
      ]
    , [ title :=          "Parsing lists"
      , structure :=      listtest_structure
      , input :=          '<html><body><ol><li>item</li></ol></body></html>'
      , expect :=         '<body><ol class="ordered"><li>item</li></ol></body>'
      ]

    , [ structure :=      pages_rte_test_structure
      , title :=          "Remove extra attributes"
      , input :=          `<h1 class="heading1">Kop</h1><p class="mystyle">in mijn <a href="http://b-lex.nl/" trash="true">stijl</a>.</p>`
      , expect :=         `<h1 class="heading1">Kop</h1><p class="mystyle">in mijn <a href="http://b-lex.nl/">stijl</a>.</p>`
      ]

    , [ structure :=      pages_rte_test_structure
      , title :=          "Softenters, images at root level"
      , input :=          `<h1>Kop</h1><p>paragraaf<br>metsoftenter</p><img height="50" width="50" src="/tests/webhare.png" />`
      , expect :=         `<h1 class="heading1">Kop</h1><p class="normal">paragraaf<br>metsoftenter</p><p class="normal"><img class="wh-rtd__img" height="50" src="/tests/webhare.png" width="50" /></p>`
      ]

    , [ structure :=      pages_rte_test_structure
      , title :=          "Softenter characters"
      , input :=          `<p>paragraaf\n<br>\nmet \nsoft enter\n</p><p>ne\u200Bxt pa\u200Bra\n\r\n\r!</p>`
      , expect :=         `<p class="normal">paragraaf<br>met soft enter</p><p class="normal">next para!</p>`
      ]

    , [ structure :=      pages_rte_test_structure
      , title :=          "Links with hash urls"
      , input :=          `<p class="normal">Twee links: <a href="#1">nummer 1</a> en <a href="#2">nummer 2</a></p>`
      , expect :=         `<p class="normal">Twee links: <a href="#1">nummer 1</a> en <a href="#2">nummer 2</a></p>`
      ]
    , [ structure :=      pages_rte_test_structure
      , title :=          "Link with image"
      , input :=          `<p><a href="http://nu.nl/" target="_blank"><img alt="test" height="50" width="50" src="/tests/webhare.png" /></a></p>`
      , expect :=         `<p class="normal"><a href="http://nu.nl/" target="_blank"><img alt="test" class="wh-rtd__img" height="50" src="/tests/webhare.png" width="50" /></a></p>`
      ]
    , [ structure :=      pages_rte_test_structure
      , title :=          "Link with image and text"
      , input :=          `<p><a href="http://nu.nl/"><img alt="test" height="50" width="50" src="/tests/webhare.png" />x</a></p>`
      , expect :=         `<p class="normal"><a href="http://nu.nl/"><img alt="test" class="wh-rtd__img" height="50" src="/tests/webhare.png" width="50" />x</a></p>`
      ]

    , [ structure :=      pages_rte_test_structure
      , title :=          "Filtering of empty paragraphs"
      , input :=          `<p>a</p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p>b</p>`
      , expect :=         `<p class="normal">a</p><p class="normal">b</p>`
      ]

    , [ structure :=      pages_rte_test_structure
      , title :=          "Inline nodes outside block node"
      , input :=          `,<abbr>abbr</abbr>,<acronym>acronym</acronym>,<b>b</b>,<big>big</big>,<cite>cite</cite>,<code>code</code>,<dfn>dfn</dfn>,<em>em</em>,<font>font</font>,<i>i</i>,<kbd>kbd</kbd>,<samp>samp</samp>,<small>small</small>,<strong>strong</strong>,<sub>sub</sub>,<sup>sup</sup>,<tt>tt</tt>,<var>var</var>,<a>a</a>,<bdo>bdo</bdo>,<label>label</label>,<q>q</q>,<span>span</span>,</p>`
      , expect :=         `<p class="normal">,abbr,acronym,<b>b</b>,big,cite,code,dfn,<i>em</i>,font,<i>i</i>,kbd,samp,small,<b>strong</b>,<sub>sub</sub>,<sup>sup</sup>,tt,var,a,bdo,label,q,span,</p>`
      ]

//note: 'blue' should win when saying "blue red" or "red blue" because ordering in class= is supposed to be irrelevant - so we look at our own style order
    , [ structure :=      pages_rte_test_structure
      , title :=          "Table refilter"
      , input :=          `<h1 class="heading1">H1</h1>` ||
                          `<table class="table"><tbody>` ||
                            `<tr> <td class="wh-rtd__tablecell and some more noise but red"><p class="normal">EOS</p></td> <td class="red blue"><p class="normal">Team </p></td> <td><p class="normal">EOS private pages </p></td> </tr>` ||
                            `<tr> <td valign="top" width="33%"><p class="normal"> </p><p class="normal"> </p><ul class="unordered" style="margin-bottom: 0;"> <li><a href="x-richdoclink:RL-lnBTa-N_MXn3OmgJWn1P5g">Mission Statement</a></li> <li><a class="ITCTable" href="x-richdoclink:RL-JBJm6G_4uiG2MCK_AncNig" style="margin-top: 0; margin-bottom: 0;">Strategic Plan</a> </li> <li><a href="x-richdoclink:RL-Hg0k03zf3CyLJt04X8FJcw">Who\`s who </a></li> <li><a class="ITCTable" href="x-richdoclink:RL-qcvAUwTbxNNW1v5Sm89a-Q" style="margin-top: 0; margin-bottom: 0;">Internet pages</a></li> <li><a href="x-richdoclink:RL-Yge_CUL0hcDGvjoEhC6WCw">MSc topics EOS 2014/2015</a></li> <li>Posters EOS MSc topics 2015 </li> </ul> <blockquote class="quote" style="margin-top: 0;"> <p class="normal">-<a href="x-richdoclink:RL-QsoeIvbyqCJk_9FWpHEtVg">Methods</a> <br> -<a href="x-richdoclink:RL-wJvgXcyjtTAQYaPdKZ8oMA">Spatial Data Qualit</a>y<br> -<a href="x-richdoclink:RL-bTO0wx6YhU3ttPzhEhzrbg">Image Analysis</a><br> -<a href="x-richdoclink:RL-dRhU2ksUBfNV1Cu-w0h9Ug">Integration of imagery, point clouds and (3D) map data</a><br> -<a href="x-richdoclink:RL-pERBro9D3uz5WexVMfrwkA">Mapping and modeling indoor environments using RGB-D data</a></p> <p class="normal">-<a href="x-richdoclink:RL-cPcYGbGYA1px2vhfJr93jA">Information extraction from Airborne and Mobile Laser Scanner data</a></p> </blockquote><p class="normal"> </p></td> <td valign="top" width="44%"><h2 class="heading2"><b>As of </b> 1 July 2013</h2><p class="normal"> </p><ul class="unordered"> <li>Chair: Prof. Dr. Ir. M.G. <a href="x-richdoclink:RL-gTsQBWJl4JpTRnMZd6zSZw">Vosselman </a></li> <li>Vice chair and Portfolio manager Research: Prof. Dr. Ir. A. <a href="x-richdoclink:RL-9MWCnpkvLj24KK6MYXkT_Q">Stein</a></li> <li>Portfolio manager Education: J.P.G. <a href="x-richdoclink:RL-scfCzYW37BL4OSucbXQPDA">Bakx</a></li> <li>Portfolio manager Capacity Building: Ms. Dr. Ir. W. <a href="x-richdoclink:RL-a-Ww243zTGe49fM7EMWDvg">Bijker </a></li> <li>Management Assistant : Ms. T.K.A. <a href="x-richdoclink:RL-oXnNjmGVSoKydKQv_asmdQ">Brefeld </a></li> </ul> </td> <td valign="top" width="23%"><p class="normal"> </p><p class="normal"> </p><ul class="unordered" style="margin-bottom: 0;"> <li><a href="x-richdoclink:RL-2mvQUwmPnR2JS1NWKXP40w" style="margin-bottom: 0">Minutes</a> and other <a href="x-richdoclink:RL-oYM_WaUo8OP-NXHMMx-B9Q">social</a> information for department members only </li> </ul></td> </tr>` ||
                            `<tr> <td><p class="normal">1</p>` ||
                              `<table class="table"><tbody><tr><td><p class="normal">2</p></td><td>3</td><td>4</td></tr></tbody></table>` || //this table gets flattend
                            `<p class="normal">9</p></td></tr>` || //but we will also need to generate this 'missing' tds
                            `<tr> <td colspan="2"><p class="normal">C2-1</p></td><td rowspan="2">R2</td></tr>` ||
                            `<tr> <td colspan="2"><p class="normal">C2-2</p></td></tr>` ||
                          `</tbody></table>`
      , expect :=         `<h1 class="heading1">H1</h1>` ||
                          `<table class="table wh-rtd-table wh-rtd__table" style="width: 389px;">` ||
                            `<colgroup class="wh-tableeditor-colgroup"><col style="width: 123px;"><col style="width: 127px;"><col style="width: 132px;"></colgroup>` ||
                            `<tbody>` ||
                              `<tr style="height: 18px;">` ||
                                `<td class="wh-rtd__tablecell red"><p class="normal">EOS</p></td>` ||
                                `<td class="wh-rtd__tablecell blue"><p class="normal">Team </p></td>` ||
                                `<td class="wh-rtd__tablecell"><p class="normal">EOS private pages </p></td>` ||
                              `</tr>` ||
                              `<tr style="height: 521px;">` ||
                                `<td class="wh-rtd__tablecell"><ul class="unordered"><li>Mission Statement</li><li>Strategic Plan </li><li>Who\`s who </li><li>Internet pages</li><li>MSc topics EOS 2014/2015</li><li>Posters EOS MSc topics 2015 </li></ul><p class="normal">-<a href="x-richdoclink:RL-QsoeIvbyqCJk_9FWpHEtVg">Methods</a> <br> -<a href="x-richdoclink:RL-wJvgXcyjtTAQYaPdKZ8oMA">Spatial Data Qualit</a>y<br> -<a href="x-richdoclink:RL-bTO0wx6YhU3ttPzhEhzrbg">Image Analysis</a><br> -<a href="x-richdoclink:RL-dRhU2ksUBfNV1Cu-w0h9Ug">Integration of imagery, point clouds and (3D) map data</a><br> -<a href="x-richdoclink:RL-pERBro9D3uz5WexVMfrwkA">Mapping and modeling indoor environments using RGB-D data</a></p><p class="normal">-<a href="x-richdoclink:RL-cPcYGbGYA1px2vhfJr93jA">Information extraction from Airborne and Mobile Laser Scanner data</a></p></td>` ||
                                `<td class="wh-rtd__tablecell"><h2 class="heading2">As of  1 July 2013</h2><ul class="unordered"><li>Chair: Prof. Dr. Ir. M.G. Vosselman </li><li>Vice chair and Portfolio manager Research: Prof. Dr. Ir. A. Stein</li><li>Portfolio manager Education: J.P.G. Bakx</li><li>Portfolio manager Capacity Building: Ms. Dr. Ir. W. Bijker </li><li>Management Assistant : Ms. T.K.A. Brefeld </li></ul></td>` ||
                                `<td class="wh-rtd__tablecell"><ul class="unordered"><li>Minutes and other social information for department members only </li></ul></td>` ||
                              `</tr>` ||
                              `<tr style="height: 86px;">` ||
                                `<td class="wh-rtd__tablecell"><p class="normal">1</p><p class="normal">2</p><p class="mystyle">3</p><p class="mystyle">4</p><p class="normal">9</p></td>` ||
                                `<td class="wh-rtd__tablecell"></td>`||
                                `<td class="wh-rtd__tablecell"></td>`||
                              `</tr>` ||
                              `<tr style="height: 18px;">` ||
                                `<td colspan="2" class="wh-rtd__tablecell"><p class="normal">C2-1</p></td>` ||
                                `<td rowspan="2" class="wh-rtd__tablecell"><p class="mystyle">R2</p></td>` ||
                              `</tr>` ||
                              `<tr style="height: 18px;">` ||
                                `<td colspan="2" class="wh-rtd__tablecell"><p class="normal">C2-2</p></td>` ||
                              `</tr>` ||
                            `</tbody>` ||
                          `</table>`
      , expect_hs :=      `<h1 class="heading1">H1</h1>` ||
                          `<table class="table wh-rtd-table wh-rtd__table">` ||
                            `<tbody>` ||
                              `<tr>` ||
                                `<td class="wh-rtd__tablecell"><p class="normal">EOS</p></td>`||
                                `<td class="wh-rtd__tablecell"><p class="normal">Team </p></td>`||
                                `<td class="wh-rtd__tablecell"><p class="normal">EOS private pages </p></td>`||
                              `</tr>`||
                              `<tr>`||
                                `<td class="wh-rtd__tablecell"><ul class="unordered"><li>Mission Statement</li><li>Strategic Plan </li><li>Who\`s who </li><li>Internet pages</li><li>MSc topics EOS 2014/2015</li><li>Posters EOS MSc topics 2015 </li></ul><p class="normal">-<a href="x-richdoclink:RL-QsoeIvbyqCJk_9FWpHEtVg">Methods</a> <br> -<a href="x-richdoclink:RL-wJvgXcyjtTAQYaPdKZ8oMA">Spatial Data Qualit</a>y<br> -<a href="x-richdoclink:RL-bTO0wx6YhU3ttPzhEhzrbg">Image Analysis</a><br> -<a href="x-richdoclink:RL-dRhU2ksUBfNV1Cu-w0h9Ug">Integration of imagery, point clouds and (3D) map data</a><br> -<a href="x-richdoclink:RL-pERBro9D3uz5WexVMfrwkA">Mapping and modeling indoor environments using RGB-D data</a></p><p class="normal">-<a href="x-richdoclink:RL-cPcYGbGYA1px2vhfJr93jA">Information extraction from Airborne and Mobile Laser Scanner data</a></p></td>` ||
                                `<td class="wh-rtd__tablecell"><h2 class="heading2">As of  1 July 2013</h2><ul class="unordered"><li>Chair: Prof. Dr. Ir. M.G. Vosselman </li><li>Vice chair and Portfolio manager Research: Prof. Dr. Ir. A. Stein</li><li>Portfolio manager Education: J.P.G. Bakx</li><li>Portfolio manager Capacity Building: Ms. Dr. Ir. W. Bijker </li><li>Management Assistant : Ms. T.K.A. Brefeld </li></ul></td>` ||
                                `<td class="wh-rtd__tablecell"><ul class="unordered"><li>Minutes and other social information for department members only </li></ul></td>` ||
                              `</tr>` ||
                              `<tr>` ||
                                `<td class="wh-rtd__tablecell"><p class="normal">1</p><p class="normal">2</p><p class="mystyle">3</p><p class="mystyle">4</p><p class="normal">9</p></td>`||
                                `<td class="wh-rtd__tablecell"></td>`||
                                `<td class="wh-rtd__tablecell"></td>`||
                              `</tr>`||
                              `<tr>` ||
                                `<td colspan="2" class="wh-rtd__tablecell"><p class="normal">C2-1</p></td>` ||
                                `<td rowspan="2" class="wh-rtd__tablecell"><p class="mystyle">R2</p></td>` ||
                              `</tr>` ||
                              `<tr>` ||
                                `<td colspan="2" class="wh-rtd__tablecell"><p class="normal">C2-2</p></td>` ||
                              `</tr>` ||
                            `</tbody>`||
                          `</table>`
      ]
    , [ structure :=      pages_rte_test_structure
      , title :=          "Remove empty tables"
      , input :=          `<h1 class="heading1">Kop</h1><table></table><table><tr></tr></table>`
      , expect :=         `<h1 class="heading1">Kop</h1>`
      ]

    , [ structure :=      pages_rte_test_structure
      , title :=          "Don't get confused by the div wrapper named after a table class"
      , input :=          `<h1 class="heading1">Kop</h1><div class="wh-rtd__tablewrap table"><table class="alttable"><tbody><tr><td>Cell 1</td></tr></tbody></table>`
      , expect :=         `<h1 class="heading1">Kop</h1><table class="alttable wh-rtd-table wh-rtd__table"><colgroup class="wh-tableeditor-colgroup"><col></colgroup><tbody><tr><td class="wh-rtd__tablecell"><p class="mystyle">Cell 1</p></td></tr></tbody></table>`
      ]

    , [ structure :=      pages_rte_test_structure
      , title :=          "importfrom"
      , input :=          `<h2 class="tab">contenttab</h2><h2>normalh2</h2>`
      , expect :=         `<p class="contenttab">contenttab</p><h2 class="heading2">normalh2</h2>`
      ]
    , [ structure :=      pages_rte_test_structure
      , title :=          "comment removal"
      , input :=          `<!--comment--><html><!--comment--><p><!--comment-->p</p><!--comment--></body><!--comment></html><!--comment-->`
      , expect :=         `<html><body><p class="normal">p</p></body></html>`
      ]
    , [ structure :=      pages_rte_test_structure
      , title :=          "comment removal"
      , input :=          `<!--comment--><html><!--comment--><p><!--comment-->p</p><!--comment--></body><!--comment></html><!--comment-->`
      , expect :=         `<html><body><p class="normal">p</p></body></html>`
      ]
    , [ structure :=      edudex_structure
      , title :=          "extra br to force parapgraph visibility"
      , input :=          `<b>Leerdoelen</b><br/>Aan het einde van deze cursus kunt u zich in het Italiaans voorstellen en een kort gesprek voeren, en bent u in staat om qua leesvaardigheid korte teksten te begrijpen. Wat schrijfvaardigheid betreft kunt u korte teksten schrijven, bijvoorbeeld over uw familie en uzelf. U kunt mondeling en schriftelijk de volgende grammaticale onderwerpen toepassen: lidwoorden, regelmatige werkwoorden, enkele onregelmatige werkwoorden, zelfstandige naamwoorden in enkel-/meervoud, bijvoeglijke naamwoorden (enkel-/meervoud), bezittelijke voornaamwoorden en een aantal voorzetsels.<br/><br/><b>Inhoud cursus</b><br/>Deze cursus bereidt deelnemers voor die bijvoorbeeld op vakantie naar Itali&#235; gaan of die voor hun studie enkele maanden in Itali&#235; zullen verblijven. Alle vaardigheden komen aan bod, maar de cursus focust vooral op communicatieve handelingen zoals winkelen, iets te eten/drinken bestellen, de weg vragen, de trein nemen, etc. Tijdens Italiaans 1 behandelt de docent de hoofdstukken 1 tot en met 3 van Con Piacere 1.<br/><br/><b>Werkvormen</b><br/>De docent behandelt plenair grammatica en lessen uit het boek, er wordt vaak in tweetallen gewerkt.<br/><br/><b>Aantal zelfstudie uren</b><br/>ca. 2 uur per week<b>Voertaal</b><br/>Zoveel mogelijk Italiaans, maar tijdens de eerste lessen zal de docent ook uitleg in het Nederlands geven`
      , expect :=         `<html><body>`||
                            `<p class="normal"><b>Leerdoelen</b></p>`||
                            `<p class="normal">Aan het einde van deze cursus kunt u zich in het Italiaans voorstellen en een kort gesprek voeren, en bent u in staat om qua leesvaardigheid korte teksten te begrijpen. Wat schrijfvaardigheid betreft kunt u korte teksten schrijven, bijvoorbeeld over uw familie en uzelf. U kunt mondeling en schriftelijk de volgende grammaticale onderwerpen toepassen: lidwoorden, regelmatige werkwoorden, enkele onregelmatige werkwoorden, zelfstandige naamwoorden in enkel-/meervoud, bijvoeglijke naamwoorden (enkel-/meervoud), bezittelijke voornaamwoorden en een aantal voorzetsels.</p>`||
                            `<p class="normal"><br data-wh-rte="bogus"></p>`||
                            `<p class="normal"><b>Inhoud cursus</b></p>`||
                            `<p class="normal">Deze cursus bereidt deelnemers voor die bijvoorbeeld op vakantie naar Italië gaan of die voor hun studie enkele maanden in Italië zullen verblijven. Alle vaardigheden komen aan bod, maar de cursus focust vooral op communicatieve handelingen zoals winkelen, iets te eten/drinken bestellen, de weg vragen, de trein nemen, etc. Tijdens Italiaans 1 behandelt de docent de hoofdstukken 1 tot en met 3 van Con Piacere 1.</p>`||
                            `<p class="normal"><br data-wh-rte="bogus"></p>`||
                            `<p class="normal"><b>Werkvormen</b></p>`||
                            `<p class="normal">De docent behandelt plenair grammatica en lessen uit het boek, er wordt vaak in tweetallen gewerkt.</p>`||
                            `<p class="normal"><br data-wh-rte="bogus"></p>`||
                            `<p class="normal"><b>Aantal zelfstudie uren</b></p>`||
                            `<p class="normal">ca. 2 uur per week<b>Voertaal</b></p>`||
                            `<p class="normal">Zoveel mogelijk Italiaans, maar tijdens de eerste lessen zal de docent ook uitleg in het Nederlands geven</p>`||
                          `</body></html>`
      ]
    , [ structure :=      edudex_structure
      , title :=          "don't eat brs at end of parapgraph"
      , input :=          `<ul class="unordered"><li>toepassing.<br/><br data-wh-rte="bogus"/></li></ul>`
      , expect :=         `<ul class="unordered"><li>toepassing.<br/><br data-wh-rte="bogus"/></li></ul>`
      ]
    , [ structure :=      edudex_structure
      , title :=          "br in links"
      , input :=          `<a href="http://example.com">a<br>a<a><p><a href="http://example.com">a<br>a<a></p>`
      , expect :=         `<p class="normal"><a href="http://example.com">a</a></p><p class="normal"><a href="http://example.com">a</a></p><p class="normal"><a href="http://example.com">a</a><br><a href="http://example.com">a</a></p>`
      ]
    , [ structure :=      edudex_structure
      , title :=          "don't eat brs at end of parapgraph 2"
      , input :=          `<ul><li><b>Inzicht in jouw onderhandelingsgedrag<br/></b><br/></li><li><b>Invloedrijk Onderhandelen</b><br/><br/></li><li><b>De-escaleren</b><br/><br/></li></ul>`
      , expect :=         `<ul class="unordered"><li><b>Inzicht in jouw onderhandelingsgedrag</b><br><br data-wh-rte="bogus"/></li><li><b>Invloedrijk Onderhandelen</b><br/><br data-wh-rte="bogus"/></li><li><b>De-escaleren</b><br/><br data-wh-rte="bogus"/></li></ul>`
      ]
    , [ structure :=      allowallinlines_structure
      , title :=          "inline node hierarchy"
      , input :=          `<p><b><i><u><a href="http://example.com"><del><ins><strike><sub><sup>test1</sup></sub></strike></a href="http://example.com"></u></i></b></ins></del></p>` ||
                          `<p><sup><sub><strike><a href="http://example.com"><u><i><b><del><ins>test2</ins></del></b></i></u></a href="http://example.com"></strike></sub></sup></p>`
      , expect :=         `<p class="normal"><a href="http://example.com"><ins><del><i><b><u><strike><sub><sup>test1</sup></sub></strike></u></b></i></del></ins></a></p>` ||
                          `<p class="normal"><a href="http://example.com"><ins><del><i><b><u><strike><sub><sup>test2</sup></sub></strike></u></b></i></del></ins></a></p>`
      ]
    ];
