<?wh

LOADLIB "mod::system/lib/webserver.whlib";


RECORD data :=
    [ localport :=        GetClientLocalPort()
    , localaddress :=     GetClientLocalAddress()
    , localip :=          GetClientLocalIP()
    , remoteport :=       GetClientRemotePort()
    , remoteip :=         GetClientRemoteIP()
    , clienturl :=        GetClientRequestURL()
    , clientbinding :=    GetClientBinding()
    , serverurl :=        GetRequestURL()
    , headers :=          GetAllWebHeaders()
    , body :=             GetRequestBody()
    , method :=           GetRequestMethod()
    ];

AddHTTPHeader("Content-Type", "application/x-hson", FALSE);
SendWebFile(EncodeHSONBlob(data));
