<siteprofile xmlns="http://www.webhare.net/xmlns/publisher/siteprofile"
             xmlns:p="http://www.webhare.net/xmlns/publisher/components"
             xmlns:xyz="urn:xyz">

  <grouptype namespace="http://www.webhare.net/xmlns/beta/tollium/richdoc_group" title="webhare_testsuite richdoc testgroup" />

  <grouptype namespace="http://www.webhare.net/xmlns/beta/group" title="webhare_testsuite testgroup" />

  <widgettype namespace="http://www.webhare.net/xmlns/beta/embedblock1"
              ingroup="http://www.webhare.net/xmlns/beta/tollium/richdoc_group"
              renderobjectname="module::webhare_testsuite/screens/components/embedtest.whlib#embedblock1_renderer">
    <members>
      <member name="id" type="string" />
      <member name="styletitle" type="string" />
      <member name="fsref" type="whfsref" />
    </members>
  </widgettype>

  <widgettype namespace="http://www.webhare.net/xmlns/beta/embedblock2"
              ingroup="http://www.webhare.net/xmlns/beta/tollium/richdoc_group"
              renderobjectname="module::webhare_testsuite/screens/components/embedtest.whlib#embedblock2_renderer">
    <members>
      <member name="id2" type="string" />
      <member name="styletitle" type="string" />
    </members>
  </widgettype>

  <widgettype namespace="http://www.webhare.net/xmlns/beta/embedinlineblock1"
              editextension="mod::webhare_testsuite/screens/components/embedtest.xml#embedinlineblock1_comp"
              embedtype="inline"
              ingroup="http://www.webhare.net/xmlns/beta/tollium/richdoc_group"
              renderobjectname="module::webhare_testsuite/screens/components/embedtest.whlib#EmbedInlineBlock1Renderer">
    <members>
      <member name="id" type="string" />
      <member name="styletitle" type="string" />
      <member name="fsref" type="whfsref" />
    </members>
  </widgettype>

  <contenttype namespace="http://www.webhare.net/xmlns/beta/consiliotest">
    <string name="str" />
    <richdocument name="rich" />
    <intextlink name="intextlink" />
    <url name="url" />
  </contenttype>

  <contenttype namespace="http://www.webhare.net/xmlns/beta/test2">
    <string name="stringtest" />
  </contenttype>

  <filetype namespace="http://www.webhare.net/xmlns/beta/dynfile"
            blobiscontent="false"
            extensions=".shtml"
            ispublishable="true"
            title="TestsuiteDynFile">
    <dynamicexecution startmacro="module::webhare_testsuite/publisher/dynamicexecute.whlib#FileEntry" />
  </filetype>

  <foldertype namespace="http://www.webhare.net/xmlns/beta/dynfolder" title="TestsuiteDynFolder">
    <members>
      <string name="test" />
    </members>
    <dynamicexecution startmacro="module::webhare_testsuite/publisher/dynamicexecute.whlib#FolderEntry" />
  </foldertype>

  <foldertype namespace="http://www.webhare.net/xmlns/beta/dynfolder2" title="TestsuiteDynFolder2">
    <dynamicexecution startmacro="module::webhare_testsuite/publisher/dynamicexecute.whlib#FolderEntry" />
  </foldertype>

  <apply>
    <!-- applytest-megaglobal ALWAYS applies. there can be no escape -->
    <to type="all" />
    <intercept name="megaglobal"
               interceptfunction="../tests/system/whfs/data/hooks.whlib#MegaGlobalHook"
               target="siteprofilehook" />
    <xyz:test data="applytest-megaglobal" />
  </apply>

  <apply>
    <to type="all" whfspathmask="/webhare_testsuite.testfolder/webhare_testsuite.site2" />  <!-- missing / so never matches -->
    <xyz:test data="applytest-nevermatch1" />
  </apply>

  <apply>
    <to type="all" whfspathmask="/webhare_testsuite.testfolder/webhare_testsuite.sit?2/" />
    <xyz:test data="applytest-whfspath" />
    <intercept name="whfspath"
               interceptfunction="../tests/system/whfs/data/hooks.whlib#WhfsPathHook"
               runbefore="webhare_testsuite:megaglobal"
               target="webhare_testsuite:siteprofilehook" />
  </apply>

  <apply>
    <to type="all" whfspathregex="^/WebHare testsuite site/.*/applytest(0|1)/$" />  <!-- just testing a bit of regex, applytest0 doesn't exist -->
    <xyz:test data="applytest-whfsregex" />
  </apply>

  <apply>
    <to type="folder" pathmask="/tmp/applytest-throughglobal/*" sitemask="WebHare testsuite site" />  <!-- only in subfolders because otherwise the above fsobjects mask generate dupes that will fail on intolerant systems -->
    <xyz:test data="applytest-throughglobal" />
  </apply>

  <apply>
    <to type="folder" pathmask="/tmp/showforeigns/" sitemask="WebHare testsuite site" />  <!-- only in subfolders because otherwise the above fsobjects mask generate dupes that will fail on intolerant systems -->
    <foldersettings visibleforeignfolders="true" />
  </apply>

  <widgettype namespace="http://www.webhare.net/xmlns/webhare_testsuite/rtdinstancetest"
              renderobjectname="mod::webhare_testsuite/lib/rte/testcomp.whlib#RTDInstanceTestObj">
    <members>
      <member name="stringdata" type="string" />
      <member name="aref" type="whfsref" />
      <member name="img" type="file" />
    </members>
  </widgettype>

  <!-- Testsite -->
  <foldertype namespace="http://www.webhare.net/xmlns/webhare_testsuite/testsite" title="webhare_testsuite testsite" />

  <contenttype namespace="http://www.webhare.net/xmlns/webhare_testsuite/moduledesignsite" />

  <apply>
    <to type="all" sitetype="http://www.webhare.net/xmlns/webhare_testsuite/testsite" />
    <disablelegacysitesettings notemplateprofile="true" />
    <webdesign objectname="mod::webhare_testsuite/lib/publisher/testsitedesign.whlib#BetaWebDesign"
               witty="mod::webhare_testsuite/lib/publisher/testsitedesign.witty"
               wittyencoding="HTML-NI" />
    <mswordconversion webharecss="false">
      <deletetextstyles>
        <deletetextstyle mask="font-size:*" />
      </deletetextstyles>
      <profile emptydocobjects="false">
        <style tag="h2" bold="false" fgcolor="#333333" fontfamily='"LinotypeUniversW02-Cn",Arial' fontsize="27px" italic="false" mswordstyleid="1" smallcaps="allcaps" underline="false" />
        <style tag="h3" bold="false" fgcolor="#333333" fontfamily='"LinotypeUniversW02-Cn",Arial' fontsize="19px" italic="false" mswordstyleid="2" smallcaps="allcaps" underline="false" />
        <style tag="h4" bold="false" fgcolor="#333333" fontfamily='"LinotypeUniversW02-Cn",Arial' fontsize="15px" italic="false" mswordstyleid="3" smallcaps="allcaps" underline="false" />
        <style tag="h5" bold="false" fgcolor="#333333" fontfamily="univers_lt_std_57_cnregular, Arial" fontsize="12px" italic="false" mswordstyleid="4" underline="false" />
        <style fgcolor="#333333" fontfamily='"LinotypeUniversW02-Cn",Arial' fontsize="12px" />
        <style mswordcustomstyle="HTML Sourcecode" embedtype="rawhtml" toclevel="99" />
      </profile>
    </mswordconversion>
  </apply>

  <apply>
    <to type="all" sitetype="http://www.webhare.net/xmlns/webhare_testsuite/testsite" />
    <seotab xmlns="http://www.webhare.net/xmlns/socialite" features="canonicalurl" />
  </apply>

  <apply>
    <to type="index" sitetype="http://www.webhare.net/xmlns/webhare_testsuite/testsite" />
    <robots xmlns="http://www.webhare.net/xmlns/consilio" />
    <seotab xmlns="http://www.webhare.net/xmlns/socialite" features="robots canonicalurl" />
  </apply>

  <apply>
    <to type="all" pathmask="/filtered*/" sitetype="http://www.webhare.net/xmlns/webhare_testsuite/testsite" />
    <foldersettings filterscreen="mod::webhare_testsuite/screens/tests/publisher.xml#filterpanel">
      <contentslisthandler objectname="../lib/screens/tests/publisher.whlib#newslisthandler" />
    </foldersettings>
  </apply>

  <contenttype namespace="http://www.webhare.net/xmlns/webhare_testsuite/webdesign/tests">
    <file name="file" />
  </contenttype>

  <foldertype namespace="http://www.webhare.net/xmlns/webhare_testsuite/webdesign-dynfolder"
              title="webdesign-dynfolder (webhare_testsuite)">
    <dynamicexecution webpageobjectname="module::webhare_testsuite/publisher/testsitedesign.whlib#WebPage" />
  </foldertype>

  <foldertype namespace="http://www.webhare.net/xmlns/webhare_testsuite/webdesign-dynrouter"
              title="webdesign-dynrouter (webhare_testsuite)">
    <dynamicexecution routerfunction="mod::webhare_testsuite/lib/publisher/testsitedesign.whlib#testrouter" />
  </foldertype>

  <!-- empty doc type. triggered I/O errors if named index.html -->
  <filetype namespace="http://www.webhare.net/xmlns/webhare_testsuite/webdesign/emptydocumentfile"
            kind="virtualfile"
            title="EmptyDocFile" />

  <tabsextension xmlns="http://www.webhare.net/xmlns/tollium/screens" name="testextension">
    <newtab gid="test.newtab" tid=".tabtitle" />
  </tabsextension>

  <!-- fsobject caused a crash 'Component does not have a parent (while looking for the parent panel)' -->
  <tabsextension xmlns="http://www.webhare.net/xmlns/tollium/screens" name="fsobjectcrash">
    <newtab>
      <select name="t_select" type="checkbox" rowkeytype="integer" title="">
        <p:fsobjects composition="contentdata" name="p_fsobjects" fullpath="/" rowkeycell="id" show="folders" />
      </select>
    </newtab>
  </tabsextension>

  <apply>
    <to type="all" pathmask="*/fsobjectcrash/" sitetype="http://www.webhare.net/xmlns/webhare_testsuite/testsite" />
    <extendproperties extension="#fsobjectcrash"
                      contenttype="http://www.webhare.net/xmlns/webhare_testsuite/webdesign/emptydocumentfile" />
  </apply>

  <!-- generic test types -->
  <contenttype namespace="http://www.webhare.net/xmlns/webhare_testsuite/generictesttype">
    <string name="str" />
    <string name="emptystr" />
    <integer name="int" />
    <file name="blub" />
    <money name="price" />
    <richdocument name="rich" />
    <boolean name="yesno" />
    <float name="afloat" />
    <datetime name="adatetime" />
    <instance name="aninstance" />
    <stringarray name="strarray" />
    <url name="url" />
    <record name="arecord" />
    <array name="anarray">
      <richdocument name="richmember" />
      <integer name="intmember" />
      <array name="asubarray">
        <richdocument name="subrichmember" />
        <integer name="subintmember" />
      </array>
    </array>
  </contenttype>

  <contenttype namespace="http://www.webhare.net/xmlns/webhare_testsuite/genericinstance1">
    <string name="str1" />
  </contenttype>

  <contenttype namespace="http://www.webhare.net/xmlns/webhare_testsuite/genericinstance2">
    <string name="str2" />
  </contenttype>

  <contenttype namespace="http://www.webhare.net/xmlns/webhare_testsuite/genericinstance3">
    <string name="str3" />
  </contenttype>

  <!-- publisher.publishersearchtest -->
  <filetype namespace="http://www.webhare.net/xmlns/webhare_testsuite/publisher/publishersearchtest"
            kind="rawfile"
            searchcontentprovider="webhare_testsuite:testprovider"
            title="PublisherSearchTest">
    <members>
      <integer name="testfield" />
      <array name="testarray">
        <string name="arrayfield" />
        <datetime name="otherfield" />
      </array>
    </members>
  </filetype>

  <rtdtype namespace="http://www.webhare.net/xmlns/webhare_testsuite/testrichdoc">
    <css path="test/rte-structure.css" />
    <blockstyles defaultstyle="NORMAL">
      <textstyle tag="HEADING1" containertag="h1" textstyles="i u" />
      <textstyle tag="HEADING2" containertag="h2" textstyles="i u" />
      <textstyle tag="NORMAL" textstyles="b a-href img sup sub strike" />
      <textstyle tag="MYCUSTOMSTYLE" containertag="div" title="MyCustomStyle" textstyles="b a-href img sup sub strike" />
      <tablestyle tag="MYTABLE" />
      <tablestyle tag="OTHERTABLE" />
      <cellstyle tag="REDPILL" title="Red cell" />
      <cellstyle tag="BLUEPILL" title="Blue cell" />
    </blockstyles>
  </rtdtype>

  <!-- test pagelist -->
  <filetype namespace="http://www.webhare.net/xmlns/webhare_testsuite/pagelist"
            kind="virtualfile"
            capturesubpaths="true"
            isacceptableindex="false"
            pagelistprovider="../lib/publisher/testsitedesign.whlib#TestPageListProvider"
            title="Testsuite: pagelists">
    <usepublishtemplate script="mod::webhare_testsuite/webdesigns/basetest/lib/publishpagelist.whscr" />
  </filetype>

  <!-- configure /testportal further -->
  <apply>
    <to type="file" pathmask="/testportal" sitename="WebHare backend" />
    <portal xmlns="http://www.webhare.net/xmlns/tollium" dashboardmenuupdater="../lib/tollium.whlib#UpdateDashboardMenu" />
  </apply>

  <!-- Test RTD typs -->
  <rtdtype namespace="http://www.webhare.net/xmlns/webhare_testsuite/rtd/custompage">
    <blockstyles defaultstyle="NORMAL">
      <textstyle tag="HEADING1" split="true" textstyles="i u b" />
      <textstyle tag="HEADING2" textstyles="i u" />
      <textstyle tag="NORMAL" textstyles="i u b sub sup a-href strike img" />
      <textstyle tag="LANGUAGE-HARESCRIPT" containertag="code" textstyles="" />
      <tablestyle tag="TABLETAG" />
    </blockstyles>
  </rtdtype>

  <rtdtype namespace="http://www.webhare.net/xmlns/webhare_testsuite/rtd/listtest">
    <blockstyles defaultstyle="NORMAL">
      <textstyle tag="HEADING1" containertag="h1" textstyles="" />
      <textstyle tag="HEADING2" containertag="h2" textstyles="" />
      <textstyle tag="HEADING3" containertag="h3" textstyles="" />
      <textstyle tag="HEADING4" containertag="h4" textstyles="" />
      <textstyle tag="NORMAL" textstyles="" />
      <textstyle tag="UNORDERED" containertag="ul" textstyles="" />
      <textstyle tag="ORDERED" containertag="ol" textstyles="" />
      <tablestyle tag="TABLE" />
    </blockstyles>
  </rtdtype>

  <rtdtype xmlns="http://www.webhare.net/xmlns/publisher/siteprofile"
           namespace="http://www.webhare.net/xmlns/webhare_testsuite/page_rte_test_structure">
    <blockstyles defaultstyle="NORMAL">
      <textstyle tag="CONTENTTAB" containertag="p" importfrom="h2.tab" textstyles="" />
      <textstyle tag="HEADING1" containertag="h1" title="Kop 1" nextstyle="HEADING2" textstyles="i u" />
      <textstyle tag="HEADING2" containertag="h2" title="Kop 2" nextstyle="NORMAL" textstyles="i u" />
      <textstyle tag="NORMAL" containertag="p" title="Normaal" textstyles="i u b sub sup a-href strike img" />
      <textstyle tag="MYSTYLE" containertag="p" title="MyCustomStyle" textstyles="i u b sub sup a-href strike img" />
      <textstyle tag="ORDERED" containertag="ol" title="Genummerde lijst" textstyles="i u b sub sup a-href strike img" />
      <textstyle tag="UNORDERED" containertag="ul" title="Ongenummerde lijst" textstyles="i u" />
      <tablestyle defaultstyle="MYSTYLE" tag="TABLE" title="Tabel" />
      <tablestyle defaultstyle="MYSTYLE" tag="ALTTABLE" title="Alt Tabel" />
      <cellstyle tag="BLUE" title="Blue Cell" />
      <cellstyle tag="RED" title="Red Cell" />
    </blockstyles>
  </rtdtype>

  <rtdtype namespace="http://www.webhare.net/xmlns/webhare_testsuite/rtd/edudex">
    <blockstyles defaultstyle="NORMAL">
      <textstyle tag="NORMAL" textstyles="a-href b i u strike sub sup" />
      <textstyle tag="UNORDERED" containertag="ul" textstyles="a-href b i u strike sub sup" />
      <textstyle tag="ORDERED" containertag="ol" textstyles="a-href b i u strike sub sup" />
    </blockstyles>
  </rtdtype>

  <rtdtype namespace="http://www.webhare.net/xmlns/webhare_testsuite/rtd/allowinlines">
    <blockstyles defaultstyle="NORMAL">
      <textstyle tag="NORMAL" containertag="p" title="Normaal" textstyles="i u b sub sup a-href strike ins del" />
    </blockstyles>
  </rtdtype>

  <applysiteprofile path="webhare_testsuite-next.siteprl.xml" />

</siteprofile>
