<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:socialite="http://www.webhare.net/xmlns/socialite/components"
         gid="tolliumapps.mapdemo"
         library="mapdemo.whlib">

  <screen name="maps" allowresize="true" icon="tollium:filemgr/site" menubar="menubar" savestate="size" title="Map component">
    <actions>
      <action name="search" onexecute="dosearch" />
      <action name="clear" onexecute="doclear" />
      <action name="addmarker" onexecute="doaddmarker" />
      <action name="zoomout" onexecute="dozoomout" />
      <action name="zoomin" onexecute="dozoomin" />
      <action name="addmarkercontext" onexecute="doaddmarkercontext" />
      <action name="deletemarkercontext" onexecute="dodeletemarkercontext">
        <enableon source="map" min="1" checkflags="ismarker" />
      </action>
      <action name="findaddresscontext" onexecute="dofindaddresscontext">
        <enableon source="map" min="1" checkflags="ismarker canfindaddress" />
      </action>
      <action name="importgpx" onexecute="doimportgpx" title="Import GPX" />
      <action name="saveasgpx" onexecute="@notimplemented" title="Save as GPX" />
      <action name="deleteitem" onexecute="dodeleteitem" title="Delete" />
      <action name="centeronitem" onexecute="docenteronitem" />
    </actions>

    <menus>
      <menu name="mapcontextmenu">
        <item action="addmarkercontext" title="Plaats hier een pin" />
      </menu>
      <menu name="overlaycontextmenu">
        <item action="findaddresscontext" disablemode="hidden" title="Zoek adres van pin" />
        <item action="deletemarkercontext" disablemode="hidden" title="Verwijder pin" />
      </menu>
      <menu name="addtomap">
        <item action="addmarker" title="Punt toevoegen..." />
      </menu>
      <menu name="menubar">
        <item tid="tollium:common.menu.file">
          <item action="importgpx" />
          <item action="saveasgpx" />
        </item>
      </menu>
      <menu name="mapcontents_context">
        <item action="deleteitem" />
      </menu>
      <menu name="mapcontents_newcontext" />
    </menus>

    <toolbar>
      <button icon="tollium:actions/add" menu="addtomap" tid="~add" />

<!--
      <button action="delete"       icon="tollium:actions/delete"     tid="~delete" />
      <button action="properties"   icon="tollium:actions/properties" tid="~properties" />
      <divider/>
      <button action="refresh"      icon="tollium:actions/reload"/>
      <divider/>
      <button action="preview"      icon="tollium:filemgr/previewsite" />
      <divider/>
      <button action="sendtweet"      icon="tollium:social_media/twitter" />
-->
    </toolbar>

    <body layout="left">
      <line>
        <textedit name="query" width="1pr" defaultbutton="searchbutton" title="Zoek naar" />
        <button name="searchbutton" action="search" title="Zoeken" />
        <select name="maptype" type="pulldown" onchange="onmaptypechange" title="">
          <option rowkey="map" tid=".m" />
          <option rowkey="satellite" tid=".k" />
          <option rowkey="hybrid" tid=".h" />
          <option rowkey="physical" tid=".p" />
        </select>
        <checkbox name="clusteroverlays" label="Cluster" onchange="onclusteroverlayschange" title="" />
      </line>
      <split type="horizontal">
        <part width="46x">
          <panel height="1pr">
            <list name="mapcontents"
                  height="1pr"
                  borders="top left bottom"
                  newcontextmenu="mapcontents_newcontext"
                  onselect="doshowitem"
                  openaction="centeronitem"
                  selectcontextmenu="mapcontents_context"
                  selectmode="multiple">
              <column name="type" type="icon" />
              <column name="title" type="text" />
              <column name="points" type="text" align="right" />
            </list>
          </panel>
          <button name="clearbutton" action="clear" title="Leegmaken" />
        </part>
        <part width="1pr" borders="top right bottom">
          <panel width="1pr" height="1pr">
            <socialite:map name="map"
                           width="1pr"
                           height="1pr"
                           center="-307.769831,726.872775"
                           clustericon="cluster"
                           clusteroverlays="false"
                           flags="ismarker isshape canfindaddress"
                           newcontextmenu="mapcontextmenu"
                           onclick="onmapclick"
                           onmove="onmapmove"
                           onmoveoverlay="onmapdragoverlay"
                           onselect="onmapselect"
                           onzoom="onmapzoom"
                           provider="leaflet"
                           selectcontextmenu="overlaycontextmenu"
                           showcontrols="true"
                           zoom="17">
              <socialite:icon name="result"
                              anchor_x="24"
                              anchor_y="38"
                              icon="tollium:maps/markers/marker_green"
                              label_x="24"
                              label_y="18"
                              popup_x="24"
                              popup_y="5" />
              <socialite:icon name="address"
                              anchor_x="24"
                              anchor_y="38"
                              icon="tollium:maps/markers/marker_blue"
                              label_x="24"
                              label_y="18"
                              popup_x="24"
                              popup_y="5" />
              <socialite:icon name="unknown"
                              anchor_x="24"
                              anchor_y="38"
                              icon="tollium:maps/markers/marker_black"
                              label_x="24"
                              label_y="18"
                              popup_x="24"
                              popup_y="5" />
              <socialite:icon name="added"
                              anchor_x="24"
                              anchor_y="38"
                              icon="tollium:maps/markers/marker_red"
                              label_x="24"
                              label_y="18"
                              popup_x="24"
                              popup_y="5" />
              <socialite:icon name="cluster"
                              anchor_x="24"
                              anchor_y="38"
                              icon="tollium:maps/markers/marker_yellow_filled"
                              label_x="24"
                              label_y="18"
                              popup_x="24"
                              popup_y="5" />
            </socialite:map>
          </panel>
        </part>
      </split>
      <grid>
        <col width="3pr" />
        <col width="1pr" />
        <col width="1pr" />
        <col width="1pr" />
        <row>
          <cell>
            <line>
              <text labelfor="zoom" title="Zoomlevel" />
              <button action="zoomout" icon="tollium:actions/up" />
              <slider name="zoom"
                      width="1pr"
                      max="20"
                      min="0"
                      onchange="onzoomchange"
                      step="1"
                      title=""
                      updatecomponent="zoomlevel" />
              <text name="zoomlevel" title="" value="00" />
              <button action="zoomin" icon="tollium:actions/down" />
            </line>
          </cell>
          <cell />
          <cell>
            <text name="lat" width="1pr" selectable="true" title="Latitude" value="" />
          </cell>
          <cell>
            <text name="lng" width="1pr" selectable="true" title="Longitude" value="" />
          </cell>
        </row>
      </grid>
    </body>
  </screen>

  <screen name="clear" allpublic="true" footerbuttons="ok cancel" implementation="none" title="Leegmaken">
    <body>
      <select name="toclear" type="checkbox" title="Leegmaken">
        <option rowkey="result" title="Zoekresultaten" />
        <option rowkey="unknown" title="Geplaatste pinnen" />
        <option rowkey="address" title="Opgezochte pinnen" />
        <option rowkey="" title="Niet gevonden pinnen" />
      </select>
    </body>
  </screen>

  <!-- If not too many, stretch the lists up to 5 items.
       When more, use a checkboxlist to limit the height.
  -->
  <screen name="import_gpx" tid=".frametitle">
    <body>
      <panel name="trackspanel" layout="left">
        <text bold="true" title="" valuetid=".tracks" />
        <select name="tracks" type="checkbox" title="" />
      </panel>
      <panel name="routespanel" layout="left">
        <text bold="true" title="" valuetid=".routes" />
        <select name="routes" type="checkbox" title="" />
      </panel>
      <panel name="waypointspanel" layout="left">
        <text bold="true" title="" valuetid=".waypoints" />
        <select name="waypoints" type="checkbox" title="" />
      </panel>

<!--
      <panel>
        <text tid=".tracks" />
        <select name="tracks3"
                type="checkboxlist"
                >
          <option rowkey="1" title="test" />
          <option rowkey="2" title="another test" />
        </select>
      </panel>

      <panel>
        <text tid=".tracks" />
        <panel>
          <list name="tracks2"
                selectmode="none"
                columnheaders="false"
                >
            <column name="title"  type="text"    width="1pr" checkboxname="selected" />
            <column name="points" type="integer" width="8x" align="right" />
          </list>
        </panel>
      </panel>
-->
      <panel>
        <defaultformbuttons buttons="ok cancel" />
      </panel>
    </body>
  </screen>

</screens>
