typeGroup: base_test
gid: webdesigns.basetestjs
types:
  site_settings:
    gid: .sitesettings
    title: WTS Site Settings
    members:
      mode:
        type: string
      setting:
        type: string
      when:
        type: datetime

  base_test_props:
    gid: .basetest
    namespace: http://www.webhare.net/xmlns/webhare_testsuite/basetestprops
    title: WTS base test
    workflow: true
    members:
      anyField:
        type: string
        title: Any field
      numberField:
        type: integer
        title: A number field
        constraints:
          minValue: 0
      taxonomy:
        type: whfsrefarray
        title: Taxonomy tags
      folksonomy:
        type: whfsrefarray
        title: Folksonomy tags
        layout: section
      rtd:
        type: richdocument
        title: Rich text document
        layout: block #FIXME should be implicit because its a richdocument
      complexField:
        type: array
        title: Complex field
        members:
          complexRecord:
            type: record
            title: Complex record
            members:
              complexField1:
                type: string
                title: Complex field 1
      whUser:
        type: string
        tid: ~username
        component:
          "http://www.webhare.net/xmlns/system/components#selectuser":
            inputKind: wrdGuid
      multiField:
        type: record
        constraints:
          required: true
        title: Multi field
        members:
          num1:
            type: integer
          hasNum2:
            type: boolean
          num2:
            type: integer
        lines:
        - line:
            parts:
            - textedit:
                name: num1
                valueType: integer
            - checkbox:
                name: hasNum2
                label: "and up to:"
            - textedit:
                name: num2
                valueType: integer
                enabledOn:
                  field: hasNum2
                  value: true
      checkIt:
        type: boolean
        title: Check it
      extControlledField:
        type: string
        title: extControlledField

apply:
  - to:
      type: http://www.webhare.net/xmlns/publisher/richdocumentfile
    baseProps: [seotitle]
    editProps:
      - type: base_test_props
        layout: [anyField, numberField, folksonomy, whUser, rtd, multiField, checkIt, extControlledField]
        override:
          numberField:
            constraints:
              maxValue: 100
            props:
              suffix: "kg"
              emptyValue: 1
          extControlledField:
            props:
              enabledOn:
                field: $type.checkIt
                value: true

  - to:
      whfsPath: "*metaoverride1*"
    baseProps: [seotitle]
    editProps:
      - type: base_test_props
        override:
          numberField:
            props:
              emptyValue: 2
          whUser:
            title: WH Usertje
            component:
              textarea:

  - to:
      whfsPath: "*allprops*"
    editProps:
      - type: global.generic_test_type
        layout: all

  - to:
      whfsPath: "*manualtabs*"
    editProps:
      - type: base_test_props
        layout:
          tabs:
          - title: Tab 1
            layout: [anyField, numberField, folksonomy, whUser]
          - tid: .tab2
            layout: [anyField, rtd,  checkIt]
