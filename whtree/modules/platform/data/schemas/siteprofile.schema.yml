---
# yaml-language-server: $schema=http://json-schema.org/draft-07/schema#
# (To update derived the TypeScript interfaces: wh update-generated-files --only=schema - TODO generate TS for us)
# TODO we leave some parts open now to allow for custom elements... but we should be able to compile to a copmlete schema allowing only supported elements
"$schema": http://json-schema.org/draft-07/schema#
title: Site profile
type: object
additionalProperties: false
properties:
  gid:
    type: string
  typeGroup:
    type: string
  types:
    type: object
    additionalProperties: false
    patternProperties:
      "^[a-z][a-zA-Z0-9]*$": # Explicitly not permitting underscores, expecting camelcase. TODO allow URIs too
        $ref: "#/definitions/Type"
        additionalProperties: false

definitions:
  Type:
    type: object
    additionalProperties: false
    properties:
      gid:
        type: string
      title:
        type: string
      tid:
        type: string
      members:
        type: object
        additionalProperties: false
        patternProperties:
          "^[a-z][a-zA-Z0-9]*$": # Explicitly not permitting underscores, expecting camelcase
            $ref: "#/definitions/TypeMember"
            additionalProperties: false

  TypeMember:
    type: object
    additionalProperties: false
    required:
      - "type"
    properties:
      type:
        type: string
        enum:
          - string
          - integer
          - datetime
      tid:
        type: string
      title:
        type: string
