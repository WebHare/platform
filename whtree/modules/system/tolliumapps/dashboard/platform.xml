<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:wrd="http://www.webhare.net/xmlns/wrd/components"
         gid="tolliumapps.dashboard.platform"
         library="platform.whlib">

  <screen name="platformpanel" allowresize="true" title="">
    <actions>
      <action name="gototask" onexecute="dogototask">
        <enableon source="results" min="1" max="1" checkflags="canjumpto" />
      </action>
      <action name="snooze" ellipsis="true">
        <enableon source="results" min="1" checkflags="cansnooze" onexecute="dosnooze" />
      </action>
      <action name="details">
        <enableon source="results" min="1" max="1" onexecute="dodetails" />
      </action>
      <action name="unsnooze">
        <enableon source="results" min="1" checkflags="canunsnooze" onexecute="dounsnooze" />
      </action>
    </actions>

    <menus>
      <menu name="contextmenu">
        <item action="details" />
        <item action="snooze" />
        <item action="unsnooze" />
        <divider />
        <item action="gototask" disablemode="hidden" />
      </menu>
    </menus>

    <body spacers="none">
      <grid height="1pr">
        <cell width="1pr">
          <list name="results"
                height="1pr"
                borders="none"
                defaultbutton="detailsbutton"
                emptytid=".noerrors"
                flags="canjumpto cansnooze canunsnooze"
                icons="tollium:status/warning tollium:status/schedule"
                ongetrows="ongeterrors"
                openaction="details"
                rowiconname="rowicon"
                selectcontextmenu="contextmenu"
                selectmode="multiple"
                sortcolumn="message"
                rowkeytype="entityid">
            <column name="since" type="datetime" width="18x" storeutc="true" />
            <column name="stopped" type="datetime" width="18x" storeutc="true" />
            <column name="message" type="text" width="2pr" />
            <column name="snoozed_until" type="datetime" width="18x" storeutc="true" />
          </list>
        </cell>
        <cell borders="left" spacers="left right">
          <checkbox name="withhistory" labeltid=".withhistory" onchange="onwithhistorychange" title="" />
          <button name="detailsbutton" width="1pr" action="details" tid=".details" />
          <button width="1pr" action="gototask" tid=".gototask" />
          <spacer height="1gr" />
          <button width="1pr" action="snooze" />
          <button width="1pr" action="unsnooze" />
        </cell>
      </grid>
      <panel name="mainpanel" borders="top" spacers="left bottom">
        <heading tid=".general" />
        <text name="txtServer" selectable="true" tid=".server" />
        <text name="buildinfo" selectable="true" />
        <text name="txtPlatform" selectable="true" tid=".platform" wordwrap="true" />
        <text name="txtDateTime" selectable="true" tid=".datetime" />
        <text name="txtUptime" selectable="true" tid=".uptime" />
      </panel>
    </body>
  </screen>

  <screen name="snooze" width="100x" footerbuttons="ok cancel">
    <body>
      <text name="messagetidatsnooze" width="1pr" wordwrap="true" />
      <datetime name="until" type="datetime" precision="minutes" required="true" storeutc="true" />
      <textarea name="comment" width="1pr" height="8x" required="true" />
    </body>
  </screen>

  <screen name="details" allowresize="true" footerbuttons="close">
    <compositions>
      <wrd:entity name="entity" wrdtype="server_check" />
    </compositions>

    <body>
      <datetime composition="entity" cellname="wrd_creationdate" type="datetime" readonly="true" storeutc="true" tid=".since" />
      <datetime composition="entity"
                cellname="wrd_limitdate"
                type="datetime"
                emptyvalue="max_datetime"
                readonly="true"
                storeutc="true"
                tid=".stopped" />
      <text composition="entity" cellname="message_text" width="1pr" minwidth="40x" tid=".message" wordwrap="true" />
      <datetime composition="entity" cellname="snoozed_until" type="datetime" readonly="true" storeutc="true" />
      <text name="lastsnoozedby" />
      <text name="lastsnoozemessage" width="1pr" wordwrap="true" />
      <textarea name="metadata" width="1pr" height="3gr" enabled="false" />
      <heading tid=".history" />
      <list name="history" height="1pr" minwidth="70x" minheight="6gr" sortascending="false">
        <column name="when" type="datetime" width="18x" storeutc="true" />
        <column name="event" type="text" width="10x" />
        <column name="message" type="text" width="1pr" />
        <column name="wh_user" type="text" width="20x" />
      </list>
    </body>
  </screen>

</screens>
