<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         library="timedtasks.whlib"
         gid="tolliumapps.dashboard.timedtasks">

  <screen name="timedtasks">
    <actions>
      <action name="taskproperties" onexecute="dotaskproperties" tid="tollium:common.actions.properties">
        <enableon source="tasks" min="1" max="1" />
      </action>
      <action name="scheduletasknow" onexecute="doscheduletasknow">
        <enableon source="tasks" max="1" min="1" checkflags="isenabled" />
      </action>
    </actions>
    <menus>
      <menu name="taskmenu">
        <item action="taskproperties" />
        <item action="scheduletasknow" />
      </menu>
    </menus>
    <body height="1pr">
      <split type="vertical">
        <part height="1pr">
          <list name="tasks"
                selectmode="single"
                borders="top right"
                openaction="taskproperties"
                selectcontextmenu="taskmenu"
                flags="isenabled">
            <column type="text" name="script" iconname="icon" />
            <column name="running" type="icon" />
            <column type="datetime" name="nexttime" storeutc="true" width="16x" />
            <column type="text" name="description" />
          </list>
        </part>
        <part height="10x">
          <heading tid=".nowrunning" />
          <list name="runningtasks"
                selectmode="single"
                borders="top right bottom"
                sortcolumn="starttime">
            <column name="script" type="text" />
            <column name="tag" type="text" />
            <column type="datetime" name="starttime" precision="seconds" storeutc="true" width="18x" />
            <column type="datetime" name="killtime" precision="seconds" storeutc="true" width="18x" />
          </list>
        </part>
      </split>
    </body>
  </screen>

  <screen name="taskproperties" allowresize="true" savestate="size" footerbuttons="ok cancel">
    <body layout="left">
      <box tid=".properties" layout="form">
        <text name="scriptname" />
        <text name="description" tid="~description" />
        <text name="parameters" />
        <text name="tag" tid="~tag" />
        <text name="timeout" />
      </box>
      <box name="enabled" enablecomponents="nexttime" checkbox="true" >
        <text name="inapplicable" />
        <datetime name="nexttime" type="datetime" storeutc="true" />
      </box>
      <!--      <box tid=".lastmessages" height="1pr" layout="left"> -->
        <text tid=".lastmessages" />
        <textarea name="lastmessages" title="" enabled="false" minheight="15x" height="1pr" width="1pr" />
        <!--      </box> -->
    </body>
  </screen>

</screens>
