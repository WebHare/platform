<schemadefinition xmlns="http://www.webhare.net/xmlns/wrd/schemadefinition">

  <!-- The system:config schema stores various structured settings which would be quite complex in the registry but don't
       warrant their own tables -->
  <domain tag="configapp">
    <!-- Domain for configuration apps. Used to attach rights -->
    <attributes>
      <free tag="apptag" required="true" title="Application tag, eg system:dashboard" unique="true" />
      <free tag="tid" title="TID to use" />
    </attributes>
  </domain>

  <object tag="taskcluster" keephistorydays="2600">
    <!-- overrides for module task clusters -->
    <attributes>
      <free tag="cluster" required="true" unique="true" />  <!-- must match the module:cluster tag -->
      <integer tag="harescriptworkers" />  <!-- if set, overrides harescriptworkers value for this cluster (if the cluster actually requires harescript workers) -->
    </attributes>
  </object>

  <object tag="tasktype" keephistorydays="2600">
    <!-- overrides for module task types -->
    <attributes>
      <free tag="type" required="true" unique="true" />  <!-- must match the module:cluster tag -->
      <boolean tag="profile" />
    </attributes>
  </object>

  <object tag="externalservice" keephistorydays="2600">
    <!-- list services we are allowed to connect with -->
    <attributes>
      <free tag="url" required="true" />
      <free tag="servicetype" required="true" />

      <!-- TODO: once the 'tika' users are switched, <obsolete tag="type" /> .. we introduced servicetype in 4.34 -->
      <integer tag="priority" />
    </attributes>
  </object>

  <object tag="statusupload" keephistorydays="2600">
    <!-- list URLs to which we report our status -->
    <attributes>
      <free tag="wrd_title" required="true" />
      <free tag="url" required="true" />
      <enumarray tag="reports" allowedvalues="modules sites" />
    </attributes>
  </object>

  <object tag="mailroute" keephistorydays="2600">
    <!-- list URLs to which we report our status -->
    <attributes>
      <free tag="wrd_title" />
      <integer tag="wrd_ordering" />
      <free tag="originmask" />
      <array tag="sendermasks">
        <free tag="mask" />
      </array>
      <array tag="recipientmasks">
        <free tag="mask" />
      </array>
      <free tag="serverurl" />
      <free tag="rewritemailaddress" />
      <boolean tag="includeoriginaladdress" />
    </attributes>
  </object>

  <object tag="mailsender" keephistorydays="2600">
    <!-- sender whitelist -->
    <attributes>
      <free tag="wrd_title" />
      <free tag="mask" />
    </attributes>
  </object>

  <object tag="mailrecipient" keephistorydays="2600">
    <!-- recipients (receivers) whitelist -->
    <attributes>
      <free tag="wrd_title" />
      <free tag="mask" />
    </attributes>
  </object>

  <object tag="mailcorrection">
    <attributes>
      <free tag="wrd_title" />
      <integer tag="wrd_ordering" />
      <array tag="masks">
        <free tag="mask" />
      </array>
      <boolean tag="block" />
      <free tag="rewriteto" />
      <integer tag="suggestionfuzz" />
    </attributes>
  </object>

</schemadefinition>
