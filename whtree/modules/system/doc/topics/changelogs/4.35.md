# 4.35 - Current master

## Incompatibilities and deprecations
- Old/legacy consilio APIs have been cleaned up (the search page) or marked as deprcated
- Support for HTTP status texts (the 'Status Reason Phrase', eg the 'Not found' in '404 Not found') has been removed as
  they may cause infoleaks and are only supported in HTTP/1.x anyway.
- The previewbrowser now looks closer at the file type to see if the file is previewable. If a file is unexpectedly no
  longer previewable, check the following:
  - if the file should render a webpage dynamically, ensure that its type has `needstemplate="true"` or `kind="virtualfile"`
- The `webpack` bundler has been removed. We only support `esbuild` now.
  - Support for WEBHARE_ASSETPACK_FORCE_COMPATIBILITY has been dropped
  - `<babeltranspile/>` has no effect on esbuild builds and can be removed
- Some long-deprecated compatibility .es libraries have now been removed:
   - `@mod-socialite/js/google/tagmanager`
   - `@mod-system/js/compat/fetch`
   - `@mod-system/js/compat/preload`
   - `@mod-system/js/compat/promise`
   - `dompack/browserfix/baseline`
   - `dompack/browserfix/url`
- `XmlParserWriter` and `XmlCallbackParser` have been removed.
- `SquashAndSelectXML` has been removed
- The old `<wrdschemas xmlns=>` syntax is no longer supported (you can simply drop the xmlns=). Automatic renaming using
  the `originalname=` attribute is also no longer supported
- Remove legacy `<appcontexts>`
- Support for package-lock.json version 1 has been dropped.
- Deriving from WebtoolFormBase or overriding WebtoolFormPage Submit/Update is now deprecated as new webtool APIs are incompatible
  with the requirement to load forms directly. On dtapstage=development, webtool form hooks will now fail to use the callbacks defined
  there. (webtool formhooks are available since 4.31)
- Form definitions now require all their components to be inside a `<page>`
- Custom form handlers/components should target `formcomponent` and `formhandler` from the `http://www.webhare.net/xmlns/publisher/forms/appinfo`
  namespace, not the `http://www.webhare.net/xmlns/publisher/forms` namespace, in their `<appinfo>` blocks.
- Support for `<member publish=true>` contenttype members has been dropped (deprecated/obsoleted in 4.25)

## Things that are nice to know
- We've added a `@storage-<module>` namespace for JavaScript, which access the storage root for modules (just like `@mod-...`)
  accesses the module root itself. This allows you to add dyanamically generated code to your JS bundles.
- Sites will now postMessage navigation attempts to the webinterface, fixing cross-domain navigation and repeated navigation
  in the Publisher
- You can now specify the Publisher previewbrowser handling for files using `<preview>` settings in siteprofiles.
- You can now store form results for custom non-webtool forms using `StoreFormResults` and view the results using
  `RunFormResultsDialog`. See [customforms.md](https://www.webhare.dev/reference/forms/customforms)
- `<text>` now support rich tids for its value, and `htmlvalue=` to directly set its value
- Adds support for JSX fragments in dompack: `<> ...nodes... </>`

## Things you should do
