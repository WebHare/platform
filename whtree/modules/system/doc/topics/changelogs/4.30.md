# 4.30 - Current master

## Incompatibilities and deprecations
- `mod::system/data/wrdschemas/usermgmtschema.xml` has been removed, use `mod::system/data/wrdschemas/usermgmt.wrdschema.xml` instead
- list `selectmode` dynamic changes are now validated and the value must be one of `none`, `single` or `multiple`. Previously any
  unknown value was interpreted as `none`.
- `wh codegrep` and the iconviewer application have been evicted to the `dev` module
- The 'appevents' system (RegisterAppEventListener and BroadcastAppEvent) has been removed. You should use the generic IPC
  broadcast/event listeners APIs or the Tollium `<evenlistener>` component (AppEvents was only a wrapper around these)
- WebHare's preview mode no longer removes the `X-Frame-Options` and `Content-Security-Policy` headers. You will need to
  explicitly permit WebHare to frame your site
- ScanBlob and family now return the proper MIME type `application/javascript` for JS files instead of `application/x-javascript`
- The mimetype for `m3u8` files has been changed to `application/vnd.apple.mpegurl`
- Generated PDFs now default to `media=print` and to prefer explicitCSS page sizes (`preferCSSPageSize`)

## Things that are nice to know
- AWS S3 `GetBucket` now returns common prefixes ('subdirectories')
- AWS S3 `GetDirectory` now also returns subdirectories
- 'Goto URL' in the Publisher will take production URLs of synced sites into accounts to figure out where you want to go
- You can use `<csp policy="frame-ancestors [webhare]" />` to setup the proper rules allowing the current site to be framed
- You can use the new testframework function `waitForEmails` to wait for emails sent to an email address, instead of adding a separate testing step with `email` and `emailhandler` properties.
- `ifmodules=` can now be used in an applicability test to verify the installation of a module
- Widgets embedded into an email (using GetRTDBody with PrepareMailWitty) will now have their `RenderEmail` executed and this will no longer depend on having a mergecontext. TL;DR: widgets work in richtexts embedded into emails now.
- Adds key/value storage to form results so handlers and other scripts can associate their own metadata with specific form results
- If a publisher form doesn't validate users with 'View source' rights will be given a chance to fix it and others will be referred to their administrator to have it fixed
- Adds `GeneratePDFFromFile`
- Add `FlushWebserverLogfiles` to be able to speed up log parsing tests

## Things you should do
