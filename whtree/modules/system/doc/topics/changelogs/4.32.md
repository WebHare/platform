# 4.32 - Current master

## Incompatibilities and deprecations
- We switched from node-sass to dart-sass (as node-sass has been deprecated). Dart-sass is a lot stricter than node-sass
  was so some files (that were already syntactically broken!) may now fail to compile.
- Siteprofiles are now compiled whenever a webdesign/webfeature points at them, whether or not a site is actually referencing
  them. The apply rules are still limited to actually activated siteprofiles, but this change may cause more siteprofiles to
  be compiled than you expect (eg a unused but usable siteprofile might now trigger a duplicate definition error)
- We're working towards eliminating HareScript code in the Publisher. Use `wh listcompilables` to check for files that will
  not be supported in the future.
- EmbeddedObjectBase has been removed (already unusable since 4.31)
- Support for serverside anchors generated by the WebDesign (GatherSuggestedAnchors etc) has been removed. This also
  removes WebDesign::GetContentNav and the 'anchor' and 'link' elements from GetOutline.
- GetRichTextAttribute(Id) and SetRichTextAttribute(Id) are no longer exported by formcomponents/richtext.whlib (and this
  was a private library so it was never officially supported). Use `->contexts->formcomponentapi`
- fs_objects template/profile and their accompanying require and requireinsubfolders fields have been removed. This will
  in practice also disables word conversion for sites that are not using `<webdesign>` (as they will fail with a 'missing profile').

- WebHare now uses npm v7, which uses a new format for lockfiles. As long as your project lockfiles haven't been upgraded
  to v7 (accidentally or by using npm install/wh fixmodules) npm v7 might generate lockfiles which confuse WebHare. This
  mostly affects CI and is generally fixed by having npm update your package-lock files.

## Things that are nice to know
- Forms can now set a `formbacklink` which will be enabled as the previous button on the first page.
- QueueMailInWork has a new option `sensitive`. The contents of these mails are not visible to supervisors in the dashboard
  and sysops are warned when opening these mails.
- WebHare password reset mails are now marked as sensitive.
- `<allowfiletype>` and `<allowfoldertype>` now support a `newonlytemplate` attribute which only allows to select templates
  of that type when creating new files/folders, and not just empty instances)
- Form `<richtext>` can now be created dynamically and have their `richvalue` dynamically updated
- The siteprofile compiler now compiles all site profiles that are available to the system, not depending on whether a site
  actually refers to them. This prevents us from having to recompile all site profiles whenever a site is added, removed or
  has a webdesign/feature change.
- We now support NPM lockfile V2 and have removed the internal npm v6.

## Things you should do
