# 5.0 - Current master

PLEASE NOTE! YOU NEED TO UPGRADE TO 4.35 BEFORE UPGRADING TO 5.0

## Incompatibilities and deprecations
- The `dbserver` (whdb, WebHareDB) has been removed
- `system.fs_instances.id`, `system.fs_settings.id` and `wrd.entity_settings.id` and any referring columns are now `INTEGER64`s
- Deprecations/removals that a dev:rewrite will fix for you:
  - Support for the `lib=` attribute a `<tolliumcomponent>` has been removed. Merge it into the `objecttype=`
- Support for manually configured scheduler tasks has been removed. You should use `<task>`s in moduledefinitions.
- `<authenticationsettings requireauthorization=false>` has been removed. It wasn't properly parsed from the XML anyway
  and is only acting as the inverse of the `managementmode` property.
- Support for `<undoextendproperties>` has been removed. It has already been broken for a while.
- You can no longer manage WRD schema metadata through the legacy objectapi.whlib
- Files of type 'application portal' will now attempt to capture subpages to allow them to implement .well-known URLs
- Support for the Tollium `rowselect` and `border` attributes has been removed in both XML and HareScript (this does not
  affect the newer `borders` attribute that replaced `border` in WebHare 4.03)
- Support for the WebHare dev-agent (formerly Connect-helper) has been completely removed. You can use `wh dev:mount` now
  to mount a remote WebHar server using WebDav once you've setup a peering connection. "Open in editor" now requires an
  editor supporting LSP (Language Server Protocol)
- NPM v7 restored automatic installation of per dependencies, even if not explicitly selected. We now explicitly disable
  that again for modules.

## Things that are nice to know
- `<windowopenaction>` now has a `link=` parameter which you can use if the link is hardcoded anyway (no need for a callback)
- The 'Send results by email' form handler will set the Reply-To to the recipient address if not otherwise set
- Dashboard panels can now have individual access checks.
- %TestThrowsLike and %TestRejectedLike now match their exceptions case-insensitively
- The new language construct `FOREVERY [ AWAIT ] (variable YIELD FROM iterator)` has been added, to quickly get
  the values returned by an iterator
- Adds `http://www.webhare.net/xmlns/publisher/widgets/wittyblock` and `http://www.webhare.net/xmlns/publisher/widgets/wittyinline`
  widgets to allow users to directly insert witty objects into RTDs. (Use with care!)
- You can set the mask parameter of `TestThrowsLike` to `REPORT` to get a print of the exception.
  - Replacing all `TestThrows(` calls with `TestThrowsLike("REPORT", ` is a quick way to get a list of all exceptions in a
    test so you can then simply copy them into the test code.
- WRD has a new type, WHFSLINK, which stores links to files in WHFS (useful you don't want WHFSINTEXTLINKs ability to store external links too)
- Frontend support for the Tollium GetExclusiveAccess screen has been added

## Things you should do
