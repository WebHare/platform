<screens xmlns="http://www.webhare.net/xmlns/tollium/screens" gid="monitor" library="/lib/screens/monitor/logs.whlib">

  <screen name="logs" gid=".logs.panel">
    <actions>
      <action name="runlogsscreen" onexecute="dorunlogsscreen" />
    </actions>

    <body height="1pr" spacers="none">
      <grid width="1pr">
        <col width="1pr" />
        <col />
        <row>
          <cell spacers="left">
            <heading name="errorlogbox" />
          </cell>
          <cell spacers="right">
            <button action="runlogsscreen" />
          </cell>
        </row>
      </grid>
      <list name="errorlog" width="1pr" height="1pr" borders="top right bottom" selectmode="none" sortascending="false">
        <column name="date" type="text" width="30x" />
        <column name="message" type="text" />
      </list>
      <panel spacers="left right">
        <heading name="servicemanagerlogbox" />
      </panel>
      <list name="servicemanagerlog"
            width="1pr"
            height="1pr"
            borders="top right bottom"
            selectmode="none"
            sortascending="false">
        <column name="date" type="text" width="30x" />
        <column name="message" type="text" />
      </list>
    </body>
  </screen>

  <screen name="overview"
          width="120x"
          height="50x"
          allowresize="true"
          flags="haveopenineditor"
          footerbuttons="close"
          gid=".logs.overview"
          savestate="true"
          tid=".title">
    <actions>
      <action name="applysettingsaction" onexecute="doapplysettingsaction" title="" />
      <action name="download" onexecute="dodownloadfile" />
      <action name="openstacktrace" onexecute="doopenstacktrace">
        <enableon source="stacktrace" min="1" />
      </action>
      <action name="openineditor" frameflags="haveopenineditor" onexecute="doopenineditor" tid="~openineditor">
        <enableon source="stacktrace" min="1" max="1" requirefocus="true" />
      </action>
    </actions>

    <menus>
      <menu name="stacktracecontextmenu">
        <item action="openineditor" disablemode="hidden" />
      </menu>
    </menus>

    <body height="1pr" layout="form">
      <split type="horizontal">
        <part width="1pr" spacers="right">
          <box tid=".settings">
            <line>
              <textedit name="nr_kb" width="10x" defaultbutton="applysettings" valuetype="integer" />
              <button name="applysettings" action="applysettingsaction" />
            </line>
            <select name="logtype" type="pulldown" onchange="onlogtypechange">
              <option rowkey="access" />
              <option rowkey="debug" />
              <option rowkey="errors" />
              <option rowkey="notice" />
              <option rowkey="rpc" />
              <option rowkey="servicemanager" />
            </select>
            <line>
              <select name="dateoption" type="pulldown" onchange="refreshloglist" />
              <button action="download" />
            </line>
          </box>
          <split type="vertical">
            <part height="1pr">
              <panel>
                <textedit name="filter" width="1pr" onchange="refreshloglist" trimwhitespace="false" />
              </panel>
              <panel height="1pr">
                <list name="loglist" height="1pr" onselect="onloglistclick" selectmode="single" sortascending="false">
                  <column name="date" type="text" width="25x" />
                  <column name="message_part" type="text" />
                </list>
              </panel>
            </part>
          </split>
        </part>
        <part width="1pr" spacers="left">
          <tabs name="dataviewtabs" height="1pr" onselect="refreshdataviewtab">
            <tab name="tab_raw">
              <textarea name="fullmessage" height="1pr" title="" />
            </tab>
            <tab name="tab_htmltree">
              <hsvalue name="hsvalue" height="1pr" />
            </tab>
            <tab name="tab_stacktrace">
              <!--
              ADDME: maybe we should have a <stacktrace> component,
                     which shows the tracktrace and offers 'Open in Sublime', 'Show in Publisher' context options where applicable.

              NOTE: this version is ripped from debugger.xml
              -->
              <list name="stacktrace"
                    height="1pr"
                    borders="all"
                    gid=".stacktrace"
                    openaction="openstacktrace"
                    rowlayout="tworows"
                    selectcontextmenu="stacktracecontextmenu"
                    selectmode="single"
                    sortable="false">
                <column name="filename" type="text" />
                <column name="position" type="text" width="10x" />
                <column name="func" type="text" tid=".stacktrace-function" />
                <rowlayout name="tworows">
                  <col coldef="func" />
                  <col coldef="position" />
                  <row>
                    <cell coldef="filename" colspan="2" />
                  </row>
                  <row>
                    <cell coldef="func" />
                    <cell coldef="position" />
                  </row>
                </rowlayout>
              </list>
            </tab>
          </tabs>
        </part>
      </split>
    </body>
  </screen>

</screens>
