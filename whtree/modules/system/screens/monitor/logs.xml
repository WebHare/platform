<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         lib="screens/monitor/logs.whlib"
         gid="monitor">

  <screen name="logs" gid=".logs.panel">
    <actions>
      <action name="runlogsscreen" onexecute="dorunlogsscreen" />
    </actions>
    <body height="1pr">
      <grid width="1pr">
        <col width="1pr"/>
        <col/>
        <row>
          <cell spacers="left">
            <heading name="errorlogbox" tid=".errorlogbox" title="" />
          </cell>
          <cell>
            <button action="runlogsscreen" />
          </cell>
        </row>
      </grid>
      <list name="errorlog"
            selectmode="none"
            width="1pr"
            height="1pr"
            borders="top right bottom"
            sortascending="false">
        <column name="date"    type="text" width="30x" />
        <column name="message" type="text" />
      </list>
      <panel spacers="left">
        <heading name="servicemanagerlogbox"/>
      </panel>
      <list name="servicemanagerlog"
            selectmode="none"
            width="1pr"
            borders="top right bottom"
            height="1pr"
            sortascending="false">
        <column name="date"    type="text" width="30x" />
        <column name="message" type="text" />
      </list>
    </body>
  </screen>

  <screen name="overview" tid=".title" width="120x" height="50x" allowresize="true" savestate="true" gid=".logs.overview" flags="havewhconnect">
    <actions>
      <action name="applysettingsaction" onexecute="doapplysettingsaction" title="" />
      <action name="download" onexecute="dodownloadfile" />
      <action name="openstacktrace" onexecute="doopenstacktrace">
        <enableon source="stacktrace" min="1" />
      </action>
      <action name="openineditor" onexecute="doopenineditor" frameflags="havewhconnect" tid="~openineditor">
        <enableon source="stacktrace" min="1" max="1" requirefocus="true" />
      </action>
    </actions>
    <menus>
      <menu name="stacktracecontextmenu">
        <item action="openineditor" disablemode="hidden" />
      </menu>
    </menus>
    <body layout="form" height="1pr">
      <split type="horizontal">
        <part width="1pr" spacers="right">
          <box tid=".settings">
            <line>
              <textedit valuetype="integer" name="nr_kb" defaultbutton="applysettings" width="10x" />
              <button action="applysettingsaction" name="applysettings" />
            </line>
            <select type="pulldown" name="logtype" onchange="onlogtypechange">
              <option rowkey="access" />
              <option rowkey="debug" />
              <option rowkey="errors" />
              <option rowkey="notice" />
              <option rowkey="rpc" />
              <option rowkey="servicemanager" />
            </select>
            <line>
              <select type="pulldown" name="dateoption" onchange="refreshloglist" />
              <button action="download"  />
            </line>
          </box>
          <split type="vertical">
            <part height="1pr">
              <panel>
                <textedit name="filter" onchange="refreshloglist" width="1pr" trimwhitespace="false" />
              </panel>
              <panel height="1pr">
                <list name="loglist"
                      selectmode="single"
                      onselect="onloglistclick"
                      sortascending="false"
                      height="1pr">
                  <column name="date"         type="text" width="25x" />
                  <column name="message_part" type="text" />
                </list>
              </panel>
            </part>
          </split>
        </part>
        <part width="1pr" spacers="left">
          <tabs name="dataviewtabs"
                onselect="refreshdataviewtab"
                height="1pr"
                >
            <tab name="tab_raw">
              <textarea name="fullmessage" height="1pr" title="" />
            </tab>
            <tab name="tab_htmltree">
              <hsvalue name="hsvalue" height="1pr" />
            </tab>
            <tab name="tab_stacktrace">
              <!--
              ADDME: maybe we should have a <stacktrace> component,
                     which shows the tracktrace and offers 'Open in Sublime', 'Show in Publisher' context options where applicable.

              NOTE: this version is ripped from debugger.xml
              -->
              <list name="stacktrace"
                    selectmode="single"
                    rowlayout="tworows"
                    height="1pr"
                    sortable="false"
                    borders="all"
                    gid=".stacktrace"
                    openaction="openstacktrace"
                    selectcontextmenu="stacktracecontextmenu"
                    >
                <column name="filename" type="text" />
                <column name="position" type="text" width="10x" />
                <column name="func" type="text"  tid=".stacktrace-function" />
                <rowlayout name="tworows">
                  <col coldef="func" />
                  <col coldef="position" />
                  <row>
                    <cell coldef="filename" colspan="2" />
                  </row>
                  <row>
                    <cell coldef="func" />
                    <cell coldef="position" />
                  </row>
                </rowlayout>
              </list>

            </tab>
          </tabs>
        </part>
      </split>
    </body>
    <footer>
      <defaultformbuttons buttons="close" />
    </footer>
  </screen>

</screens>
