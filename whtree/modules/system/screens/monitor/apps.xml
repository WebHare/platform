<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         lib="screens/monitor/apps.whlib"
         gid="monitor">

  <screen name="apps" gid=".apps" title="">
    <actions>
      <action name="sendmessagetomoduleusers" onexecute="DoSendMessageToModuleUsers">
        <enableon source="runningapps" min="1" />
      </action>
      <action name="sendmessagetoappusers" onexecute="dosendmessagetoappusers">
        <enableon source="runningapps" min="1" checkflags="inuse" />
      </action>
      <action name="sendmessagetoselectedusers" onexecute="dosendmessagetoselectedusers">
        <enableon source="appusers" min="1" />
      </action>
    </actions>

    <menus gid=".menus">
      <menu name="appcontextmenu">
        <item action="sendmessagetomoduleusers" />
        <item action="sendmessagetoappusers" />
      </menu>

      <menu name="userscontextmenu">
        <item action="sendmessagetoselectedusers" />
      </menu>
    </menus>

    <body height="1pr">
      <split type="horizontal" height="1pr">
        <part width="2pr" spacers="none">
          <panel height="1pr">
            <list name="runningapps"
                  gid=".runningapps"
                  borders="top  bottom"
                  selectmode="single"
                  onselect="refreshappuserslist"
                  selectcontextmenu="appcontextmenu"
                  flags="inuse"
                  emptytid=".noappsrunning"
                  >
              <column name="name"      type="text"    width="22x" tid=".appname"/><!-- application name <module>:<app> -->
              <column name="title"     type="text" />
              <column name="usercount" type="integer" width="10x" align="right" /><!-- amount of users -->
              <column name="runcount"  type="integer" width="10x" align="right" /><!-- amount of times the app is running (at the moment each instance get's it's own session) -->
              <!-- <column name="appmemory" type="text"    width="12x" align="right" /> -->
            </list>
          </panel>
        </part>
        <part width="3pr" spacers="none">
          <panel height="1pr">
            <list name="appusers"
                  gid=".appusers"
                  borders="top right bottom"
                  selectmode="multiple"
                  selectcontextmenu="userscontextmenu"
                  >
              <column name="username" type="text" width="2pr" tid=".appusers" />
              <column name="realname" type="text" width="3pr" />

              <column name="started" tid=".timestarted" type="datetime" precision="seconds" storeutc="true" width="18x" />

              <!-- since lastactive and lastpoll cannot be long ago, we don't need to show the date part, only the time -->
              <column type="text" name="lastactive" tid=".lastactive" width="12x" align="right" />
              <!-- <column type="text" name="lastpoll" tid=".lastpoll" width="12x" align="right" /> -->

              <!--column name="typename" type="text" -->
              <!-- <column name="memusage" type="text" width="15x" align="right" /> -->
              <column name="browser" type="text" width="2pr" />
            </list>
          </panel>
        </part>
      </split>
    </body>
  </screen>

  <screen name="sendmessage"
          allowresize="true"
          height="23x"
          width="35x"
          savestate="size position"
          gid=".sendmessage">
    <body>
      <textedit name="title" required="true" />
      <textarea name="msg" required="true" height="1pr" />
    </body>
    <footer>
      <defaultformbuttons buttons="ok cancel"/>
    </footer>
  </screen>

</screens>
