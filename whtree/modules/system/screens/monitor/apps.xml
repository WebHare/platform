<screens xmlns="http://www.webhare.net/xmlns/tollium/screens" gid="monitor" library="/lib/screens/monitor/apps.whlib">

  <screen name="apps" gid=".apps" title="">
    <actions>
      <action name="sendmessagetomoduleusers" onexecute="DoSendMessageToModuleUsers">
        <enableon source="runningapps" min="1" />
      </action>
      <action name="sendmessagetoappusers" onexecute="dosendmessagetoappusers">
        <enableon source="runningapps" min="1" checkflags="inuse" />
      </action>
      <action name="sendmessagetoselectedusers" onexecute="dosendmessagetoselectedusers">
        <enableon source="appusers" min="1" />
      </action>
      <action name="killsession" onexecute="DoKillSession">
        <enableon source="appusers" min="1" />
      </action>
    </actions>

    <menus gid=".menus">
      <menu name="appcontextmenu">
        <item action="sendmessagetomoduleusers" />
        <item action="sendmessagetoappusers" />
      </menu>
      <menu name="userscontextmenu">
        <item action="sendmessagetoselectedusers" />
        <item action="killsession" />
      </menu>
    </menus>

    <body height="1pr" spacers="none">
      <grid height="1pr">
        <col width="1pr" />
        <col />
        <row>
          <cell colspan="2" spacers="left right">
            <heading tid=".applicationsheading" />
          </cell>
        </row>
        <row height="2pr">
          <cell>
            <list name="runningapps"
                  borders="top right bottom"
                  emptytid=".noappsrunning"
                  flags="inuse"
                  gid=".runningapps"
                  onselect="refreshappuserslist"
                  selectcontextmenu="appcontextmenu"
                  selectmode="single">
              <column name="name" type="text" width="22x" tid=".appname" />  <!-- application name <module>:<app> -->
              <column name="title" type="text" />
              <column name="usercount" type="integer" width="10x" align="right" />  <!-- amount of users -->
              <column name="runcount" type="integer" width="10x" align="right" />  <!-- amount of times the app is running (at the moment each instance get's it's own session) -->

              <!-- <column name="appmemory" type="text"    width="12x" align="right" /> -->
            </list>
          </cell>
          <cell spacers="left right">
            <button width="1pr" action="sendmessagetomoduleusers" />
            <button width="1pr" action="sendmessagetoappusers" />
          </cell>
        </row>
        <row>
          <cell colspan="2" spacers="left right">
            <heading tid=".usersheading" />
          </cell>
        </row>
        <row height="3pr">
          <cell>
            <list name="appusers"
                  borders="top right"
                  gid=".appusers"
                  selectcontextmenu="userscontextmenu"
                  selectmode="multiple">
              <column name="username" type="text" width="2pr" tid=".appusers" />
              <column name="realname" type="text" width="3pr" />
              <column name="started" type="datetime" width="18x" precision="seconds" storeutc="true" tid=".timestarted" />

              <!-- since lastactive and lastpoll cannot be long ago, we don't need to show the date part, only the time -->
              <column name="lastactive" type="text" width="12x" align="right" tid=".lastactive" />

              <!-- <column type="text" name="lastpoll" tid=".lastpoll" width="12x" align="right" /> -->

              <!-- column name="typename" type="text" -->

              <!-- <column name="memusage" type="text" width="15x" align="right" /> -->
              <column name="browser" type="text" width="2pr" />
            </list>
          </cell>
          <cell spacers="left right">
            <button width="1pr" action="sendmessagetoselectedusers" />
            <button width="1pr" action="killsession" />
          </cell>
        </row>
      </grid>
    </body>
  </screen>

  <screen name="sendmessage"
          width="35x"
          height="23x"
          allowresize="true"
          footerbuttons="ok cancel"
          gid=".sendmessage"
          savestate="size position">
    <body>
      <textedit name="title" required="true" />
      <textarea name="msg" height="1pr" required="true" />
    </body>
  </screen>

</screens>
