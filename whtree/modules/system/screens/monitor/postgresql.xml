<screens xmlns="http://www.webhare.net/xmlns/tollium/screens" gid="monitor" library="/lib/screens/monitor/postgresql.whlib">

  <screen name="postgresqltransactions" gid=".postgresql" title="">
    <actions>
      <action name="opentracerow" onexecute="DoOpenTraceRow" tid="~open">
        <enableon source="trace" min="1" />
      </action>
      <action name="openineditor" onexecute="doopenineditor" tid="~openineditor">
        <enableon source="trace" min="1" />
      </action>
    </actions>

    <menus>
      <menu name="tracecontextmenu">
        <item action="opentracerow" />
        <item action="openineditor" />
      </menu>
    </menus>

    <body height="1pr" spacers="none">
      <split type="vertical">
        <part height="2pr">
          <list name="transactions"
                borders="none"
                highlightname="isself"
                onselect="GotTransactionSelect"
                selectmode="single"
                sortcolumn="backend_start">
            <column name="application_name" type="text" />
            <column name="pid" type="integer" width="14x" />
            <column name="backend_start" type="datetime" width="21x" precision="milliseconds" storeutc="true" />
            <column name="query_start" type="datetime" width="21x" precision="milliseconds" storeutc="true" />
            <column name="state" type="text" width="15x" />
            <column name="wait_event_type" type="text" width="15x" />
            <column name="query" type="text" />
            <column name="debuginfo" type="text" hintname="debuginfohint" />
          </list>
        </part>
        <part name="debuginfo" height="1pr">
          <split type="horizontal">
            <part width="1pr">
              <panel spacers="left">
                <heading tid=".query" />
              </panel>
              <panel height="1pr" borders="top">
                <codeedit name="query" height="1pr" enabled="false" />
              </panel>
            </part>
            <part width="2pr">
              <panel spacers="left">
                <heading tid=".trace" />
              </panel>
              <list name="trace"
                    height="1pr"
                    borders="top"
                    openaction="opentracerow"
                    selectcontextmenu="tracecontextmenu"
                    selectmode="single"
                    sortable="false">
                <column name="filename" type="text" />
                <column name="line" type="integer" width="6x" />
                <column name="col" type="integer" width="6x" />
                <column name="func" type="text" />
              </list>
            </part>
          </split>
        </part>
      </split>
    </body>
  </screen>

  <screen name="postgresqllocks" gid=".postgresql" title="">
    <actions>
      <action name="killbackend" onexecute="DoKillBackend">
        <enableon source="blockedlocks" min="1" />
      </action>
      <action name="opentracerow" onexecute="DoOpenTraceRow" tid="~open">
        <enableon source="trace" min="1" />
      </action>
      <action name="openineditor" onexecute="doopenineditor" tid="~openineditor">
        <enableon source="trace" min="1" />
      </action>
    </actions>

    <menus>
      <menu name="lockscontextmenu">
        <item action="killbackend" />
      </menu>
      <menu name="tracecontextmenu">
        <item action="opentracerow" />
        <item action="openineditor" />
      </menu>
    </menus>

    <body height="1pr" spacers="none">
      <split type="vertical">
        <part height="2pr">
          <list name="blockedlocks"
                borders="none"
                onselect="GotLockSelect"
                selectcontextmenu="lockscontextmenu"
                selectmode="single"
                sortcolumn="backend_start">
            <column name="application_name" type="text" tree="true" />
            <column name="pid" type="integer" width="14x" />
            <column name="backend_start" type="datetime" width="21x" precision="milliseconds" storeutc="true" />
            <column name="query_start" type="datetime" width="21x" precision="milliseconds" storeutc="true" />
            <column name="state" type="text" width="15x" />
            <column name="wait_event_type" type="text" width="15x" />
            <column name="query" type="text" />
            <column name="tables" type="text" />
            <column name="debuginfo" type="text" hintname="debuginfohint" />
          </list>
        </part>
        <part name="debuginfo" height="1pr">
          <split type="horizontal">
            <part width="1pr">
              <panel spacers="left">
                <heading tid=".query" />
              </panel>
              <panel height="1pr" borders="top">
                <codeedit name="query" height="1pr" enabled="false" />
              </panel>
            </part>
            <part width="2pr">
              <panel spacers="left">
                <heading tid=".trace" />
              </panel>
              <list name="trace"
                    height="1pr"
                    borders="top"
                    openaction="opentracerow"
                    selectcontextmenu="tracecontextmenu"
                    selectmode="single"
                    sortable="false">
                <column name="filename" type="text" />
                <column name="line" type="integer" width="6x" />
                <column name="col" type="integer" width="6x" />
                <column name="func" type="text" />
              </list>
            </part>
          </split>
        </part>
      </split>
    </body>
  </screen>

  <screen name="postgresqlblobcleanup" gid=".postgresql" title="">
    <actions>
      <action name="schedulecleanup" onexecute="DoScheduleCleanup" />
    </actions>

    <body>
      <heading tid=".unreferencedblobsheading" />
      <textedit name="unreferencedblobs" readonly="true" valuetype="integer" />
      <datetime name="unreferencednextremoval" type="datetime" precision="seconds" readonly="true" storeutc="true" />
      <heading tid=".unlinkedblobsheading" />
      <textedit name="unlinkedblobparts" readonly="true" valuetype="integer" />
      <datetime name="unlinkednextremoval" type="datetime" precision="seconds" readonly="true" storeutc="true" />
      <heading tid=".blobcleanup" />
      <text name="cleanupstatus" readonly="true" />
      <line layout="left">
        <button action="schedulecleanup" />
      </line>
    </body>
  </screen>

  <screen name="postgresqlsettings" gid=".postgresql" title="">
    <body height="1pr" spacers="none">
      <panel spacers="all">
        <heading tid="~settings" />
        <checkbox name="readonly" enabled="false" labeltid=".readonly" title="" />
        <checkbox name="logstacktraces" labeltid=".logstacktraces" onchange="GotLogStackTracesChange" title="" />
      </panel>
    </body>
  </screen>

</screens>
