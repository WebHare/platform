<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         lib="screens/debugger/profiles.whlib"
         xmlns:todd="http://www.webhare.net/xmlns/tollium/todd/components"
         gid="debugger.profiles">

  <messageboxes>
    <messagebox name="allcachescleared" icon="information" buttons="ok" />
  </messageboxes>

  <screen name="main"
          allowresize="true"
          menubar="menubar"
          tid=".apptitle"
          onunload="gotunload"
          width="180x"
          height="60x"
          savestate="size">
    <actions>
      <action name="childopen" onexecute="dochildopen">
        <enableon source="childrencalls" min="1" />
      </action>
      <action name="parentopen" onexecute="doparentopen">
        <enableon source="parentcalls" min="1" />
      </action>
      <action name="clearlist" onexecute="doclearlist" />
      <action name="closeapp" onexecute="cancel" shortcut="ctrl+q" tid="tollium:common.actions.close" />
      <action name="webserveradhoccache" onexecute="dowebserveradhoccache" />
      <action name="clearallcaches" onexecute="doclearallcaches" />
      <action name="editsource" tid="~openineditor">
        <enableon source="functionslist" min="1" max="1" onexecute="doeditsource"/>
        <enableon source="childrencalls" min="1" max="1" onexecute="doeditchildrencallsource" />
        <enableon source="parentcalls" min="1" max="1" onexecute="doeditparentcallsource" />
      </action>
    </actions>

    <menus>
      <menu name="menubar">
        <item tid=".apptitle">
          <item action="clearlist"/>
          <divider />
          <item action="closeapp"/>
        </item>
        <item tid=".caches">
          <item action="webserveradhoccache" />
          <item action="clearallcaches" />
        </item>
      </menu>
      <menu name="functionscontext">
        <item action="editsource" />
      </menu>
      <menu name="childrencallscontext">
        <item action="editsource" />
      </menu>
      <menu name="parentcallscontext">
        <item action="editsource" />
      </menu>
    </menus>

    <compositions>
      <eventlistener name="diskprofilelistener" onevents="OnNewStoredProfile" groupinterval="2000" />
    </compositions>

    <toolbar>
      <button action="clearlist" />
      <button action="clearallcaches" tid=".button-clearallcaches"/>
    </toolbar>

    <body height="1pr">
      <split type="vertical" height="1pr">
        <part height="2pr">
          <split type="horizontal" height="1pr">
            <part width="1pr">
              <list name="profileslist"
                    selectmode="single"
                    rowselect="true"
                    onselect="onprofileselected"
                    borders="top left"
                    >
                <column name="when" type="time" storeutc="true" precision="milliseconds" width="13x" />
<!--                 <column name="source" type="text" width="20x" /> -->
                <column name="command" type="text" />
<!--                <column name="type" type="text" width="18x" /> show it as an icon or something if we really need it, but the two row layout was really ugly -->
                <column name="info" type="text" width="16x" align="right" sortkeyname="infosortval" />

              </list>
            </part>
            <part width="2pr" name="functionslistpart">
              <list name="functionslist"
                    selectmode="single"
                    rowselect="true"
                    onselect="onfunctionselected"
                    sortcolumn="totalheap"
                    sortascending="false"
                    borders="top right"
                    rowkeytype="string"
                    ongetchildren="getfunctionlistrows"
                    ongetpath="getgenericpath"
                    selectcontextmenu="functionscontext"
                    >
                <column name="functionname" type="text" width="3pr" />
                <column name="library" type="text" width="2pr" />
              </list>
            </part>
            <part width="2pr" name="nameslistpart" visible="false">
              <list name="nameslist"
                    selectmode="single"
                    rowselect="true"
                    sortcolumn="totalheap"
                    sortascending="false"
                    borders="top right"
                    rowkeytype="string"
                    ongetchildren="getnameslistrows"
                    ongetpath="getgenericpath"
                    >
                <column name="name" type="text" width="3pr" />
              </list>
            </part>

          </split>
        </part>
        <part height="1pr" name="relationspart">
<!--
          <split type="horizontal">
            <part width="1pr">
              <list name="parentcalls"
                    selectmode="single"
                    openaction="parentopen"
                    borders="bottom left"
                    ongetchildren="getparentlistrows"
                    ongetpath="getgenericpath"
                    >
                <column name="functionname" type="text" tree="true" width="3pr" />
                <column name="library" type="text" width="2pr" />
              </list>
            </part>
            <part width="1pr">
              <list name="childrencalls"
                    selectmode="single"
                    openaction="childopen"
                    borders="bottom right"
                    ongetchildren="getchildrenlistrows"
                    ongetpath="getgenericpath"
                    >
                <column name="functionname" type="text" tree="true" width="3pr" />
                <column name="library" type="text" width="2pr" />
              </list>
            </part>
          </split>
<!- - -->
          <panel borders="left right" height="1pr">
            <tabs name="calltree" height="1pr">
              <tab name="ct_children" spacers="none">
                <list name="childrencalls"
                      selectmode="single"
                      rowselect="true"
                      openaction="childopen"
                      sortcolumn="totaltime"
                      sortascending="false"
                      ongetchildren="getchildrenlistrows"
                      ongetpath="getgenericpath"
                      borders="bottom"
                      selectcontextmenu="childrencallscontext"
                      >
                  <column name="functionname" type="text" tree="true" width="3pr" />
                  <column name="library" type="text" width="2pr" />
                </list>
              </tab>
              <tab name="ct_parents" spacers="none">
                <list name="parentcalls"
                      selectmode="single"
                      rowselect="true"
                      openaction="parentopen"
                      sortcolumn="totaltime"
                      sortascending="false"
                      ongetchildren="getparentlistrows"
                      ongetpath="getgenericpath"
                      borders="bottom"
                      selectcontextmenu="parentcallscontext"
                      >
                  <column name="functionname" type="text" tree="true" width="3pr" />
                  <column name="library" type="text" width="2pr" />
                </list>
              </tab>
            </tabs>
          </panel>
<!-- -->
        </part>
      </split>
    </body>

  </screen>
</screens>
