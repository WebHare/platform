<screens xmlns="http://www.webhare.net/xmlns/tollium/screens"
         xmlns:system="http://www.webhare.net/xmlns/system/components">

  <!-- unit tree -->
  <fragment name="unittree" gid="userrights.unittree" lib="screens/userrights/parts/unittree.whlib">
    <actions gid="userrights.actions">
      <action name="newrole" ellipsis="true" hinttid=".newrole-hint" onexecute="doaddrole" tid=".newrole">
        <enableon source="unitlist" min="1" max="1" checkflags="canmanageroles !isroot" />
      </action>
      <action name="newunit" ellipsis="true" hinttid=".newunit-hint" onexecute="doaddunit" tid=".newunit">
        <enableon source="unitlist" min="1" max="1" checkflags="canmanageunit" />
      </action>
      <action name="newuser" ellipsis="true" hinttid=".newuser-hint" onexecute="doadduser">
        <enableon source="unitlist" min="1" max="1" checkflags="canmanageunit !isroot" />
      </action>
      <action name="exportusersinunit" ellipsis="true" onexecute="doexportusersinunit">
        <enableon source="unitlist" min="1" max="1" checkflags="canmanageunit" />
      </action>
      <action name="move" ellipsis="true" hinttid=".move-hint">
        <enableon source="unitlist" min="1" max="1" checkflags="candelete" onexecute="domoveunitfromunitlist" />
      </action>
      <action name="delete" hinttid=".delete-hint" shortcut="del">
        <enableon source="unitlist" min="1" max="1" checkflags="candelete" onexecute="dodeleteunit" requirefocus="true" />
      </action>
      <action name="edit" hinttid=".edit-hint">
        <enableon source="unitlist" min="1" max="1" checkflags="canmanageunit !isroot" onexecute="doeditunit" />
      </action>
    </actions>
    <menus>
      <menu name="selectcontextmenu">
        <item action="newunit" disablemode="hidden" />
        <item action="newuser" disablemode="hidden" />
        <item action="newrole" disablemode="hidden" />
        <divider />
        <item action="exportusersinunit" disablemode="hidden" />
        <divider />
        <item action="move" disablemode="hidden" />
        <item action="delete" disablemode="hidden" />
        <divider />
        <item action="edit" disablemode="hidden" />
      </menu>
    </menus>
    <contents>
      <list name="unitlist"
            borders="all"
            columnheaders="true"
            flags="canmanageunit canmanageroles candelete isroot canselect"
            icons="tollium:users/user tollium:users/users tollium:users/mask tollium:actions/search"
            onselect="onselecthandler"
            openaction="edit"
            rowkeytype="entityid"
            selectableflags="canselect"
            selectcontextmenu="selectcontextmenu"
            selectmode="single">
        <acceptdrops ondrop="ontypeddrop">
          <accepttype type="system:unit"
                      dropeffects="move"
                      noloops="true"
                      sourceflags="candelete"
                      targetflags="canmanageunit" />
          <accepttype type="system:role"
                      dropeffects="move"
                      requiretarget="true"
                      sourceflags="candelete"
                      targetflags="canmanageroles" />
          <accepttype type="system:user"
                      dropeffects="move"
                      requiretarget="true"
                      sourceflags="candelete"
                      targetflags="canmanageunit" />
        </acceptdrops>
        <column name="title" type="text" iconname="icon" tid=".units" tree="true" />
      </list>
    </contents>
  </fragment>

</screens>
