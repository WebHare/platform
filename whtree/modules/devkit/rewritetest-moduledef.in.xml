<module xmlns="http://www.webhare.net/xmlns/system/moduledefinition">

  <meta configscreen="sysmgmt.homepage">
    <version>1.0.0</version>
    <description>De Digitale site</description>

    <packaging download="true" requireversion="42401">
      <dependency module="socialite"/>
      <dependency module="newsletter" requireversion="^4.0.1" />
      <dependency module="webpack"/>
      <unixpermissions path="data/stunnel/stunnel.sh" permissions="0755" />
      <excludepath mask="*localtests*" />
    </packaging>
  </meta>

  <portal>
    <applicationgroup name="siteapps" tid="testtids.gid1.gid2.title" orderbefore="system:cms"/>
    <application name="woonvinder" group="siteapps" tid="testtids.gid1.gid2.title" screen="dummy.dummyscreen">
      <accesscheck>
        <requireright right="wpkooprights"/>
      </accesscheck>
    </application>
    <application name="usermgmt" group="siteapps" tid="testtids.gid1.gid2.subtitle" screen="/screens/dummy.xml#dummyscreen">
      <accesscheck>
        <requireright right="system:sysop"/>
      </accesscheck>
    </application>
  </portal>

  <publisher>
  <webdesign name="wpkoop" siteprofile="tests/rewrite/data/rewritesiteprofile.editfragment.out.xml" title="De site: Koopwoningen">
    </webdesign>
    <webfeature name="dwplogin" title="DWP ActiveDirectory login" siteprofile="tests/rewrite/data/rewritesiteprofile.propertyeditor.out.xml" webdesignmasks="tollium:webinterface" />
    <formcomponents namespace="http://www.desite.net/xmlns/forms" xmlschema="tests/rewrite/data/rewriteformdefs.basics.out.xml"/>
  </publisher>

  <servicemanager>
    <task tag="import_ogekenmerken" script="tasks/dummy.whscr" runtime="05:15" runinterval="30" timeout="120" description="Importeer OGE-kenmerken" minservertype="test"/>
    <task tag="import_woningen" script="scripts/tasks/dummy.whscr" runtime="06:40" runinterval="12" timeout="120" description="Importeer huurwoningen naar de website" />
    <task tag="maintenance_task" script="scripts/tasks/dummy.whscr" runtime="05:15" runinterval="1440" />
    <task tag="maintenance_task2" script="scripts/tasks/dummy.whscr" runtime="13:20" runinterval="480" />

    <!-- note: runatstartup tasks also run at module push, which is ideal for us -->
    <runatstartup script="tasks/dummy.whscr" />

    <!-- Test comment -->
  </servicemanager>

  <services>
    <webservice name="woonvinder" transports="jsonrpc whremoting" library="internal/dummy2.whlib" primarytrans="auto" prefix="rpc_">
      <accesscheck>
      </accesscheck>
    </webservice>

    <check objectname="lib/internal/checks.whlib#siteLoginCheck" />
  </services>

  <rights>
    <rightsgroup name="rightsgroup" tid="testtids.gid1.gid2.title"/>

    <objecttype name="tracks" rightsgroup="rightsgroup" table="wrd.entities" tid="testtids.gid1.gid2.title">
      <describer library="internal/dummy2.whlib" objectname="MyDescriber" />
    </objecttype>

    <right name="wpkooprights" tid="testtids.gid1.gid2.subtitle" rightsgroup="rightsgroup">
      <impliedby right="system:sysop"/>
    </right>
  </rights>

  <databaseschema xmlns:d="http://www.webhare.net/xmlns/whdb/databaseschema">
    <d:table name="ogekenmerkwaarden" primarykey="id">
      <d:integer name="id" autonumberstart="1"><d:documentation>  Unique identification </d:documentation>
      </d:integer>
      <d:varchar name="ogenummer" maxlength="64" nullable="false" unique="true" />
      <!-- LOREM IPSUM! -->
      <d:money name="oppervlakte_woonkamer_1" />
      <d:index name="ogenummerindex" columns="ogenummer(32)" unique="true" uppercase="true" />
    </d:table>
  </databaseschema>

  <moduleregistry>
    <obsoletenode name="development" />
    <node name="externals">
      <obsoletekey name="test"/>
      <obsoletekey name="server"/>
      <string name="username" initialval="someaccount" />
      <string name="password"/>
    </node>
    <obsoletenode name="emails_tuinonderhoud" />
    <obsoletenode name="emails_nieuweprojecten" />
  </moduleregistry>

  <newsletter xmlns="http://www.webhare.net/xmlns/newsletter/module">
    <account tag="dwp_othermails" title="site overige mails" autocreate="true" wrdschema="newsletter:site">
      <mailtype tag="defaultmail" title="site" language="nl" generator="mod::site_digitaal/newsletters/standaardmail/standaardmail.whlib#GenerateMailing" profile="mod::site_digitaal/newsletters/standaardmail/standaardmail.prl" />
    </account>
    <account tag="servicemails" title="site servicemails" autocreate="true" wrdschema="site_digitaal:website">
      <mailtype tag="defaultmail" title="Standaardmailing" language="nl" />
    </account>
  </newsletter>
</module>
