<module xmlns="http://www.webhare.net/xmlns/system/moduledefinition">

  <meta>
    <version>5.7.0</version>  <!-- temporary, we should eliminate this XML file ASAP -->
    <validation>
      <exclude mask="tests/rewrite/data/*.in.xml" why="input files for rewrite don't need to validate" />
      <exclude mask="rewritetest-*.in.xml" why="input files for rewrite don't need to validate" />
      <format masks="*.ts *.tsx *.mjs" />
    </validation>
  </meta>

  <portal>
    <application name="deploy"
                 engine="wasm"
                 group="system:development"
                 openmultipleinstances="true"
                 screen="/tolliumapps/deploy/deploy.xml"
                 shortcut="ctrl+shift+m"
                 supportedlanguages="en"
                 tid="tolliumapps.deploy.main.main">
      <accesscheck>
        <requireright right="system:sysop" />
      </accesscheck>
    </application>
    <application name="langedit" screen="tolliumapps/langedit/langedit.xml#main" tid="tolliumapps.langedit.langedit">
      <accesscheck>
        <requireright right="system:sysop" />
      </accesscheck>
    </application>
    <application name="browsemodule"
                 engine="wasm"
                 screen="/tolliumapps/browsemodule/browsemodule.xml"
                 supportedlanguages="en">
      <accesscheck>
        <requireright right="system:sysop" />
      </accesscheck>
    </application>
    <application name="iconviewer"
                 group="system:development"
                 screen="tolliumapps/iconviewer/iconviewer.xml#iconviewer"
                 tid="tolliumapps.iconviewer.iconviewer">
      <accesscheck />
    </application>
    <application name="setupwebhareuser"
                 startmacro="/tolliumapps/deploy/setupwebhareuser.whlib#runsetupwebhareuser"
                 supportedlanguages="en">
      <accesscheck>
        <requireright right="system:sysop" />
      </accesscheck>
    </application>
  </portal>

  <consilio>
    <catalog tag="sourcecode" priority="-1">
      <customsource contentobject="mod::devkit/lib/sourcecodeindex/consilio.whlib#SourceCodeConsilioIndex"
                    tag="moduleresources" />
    </catalog>
    <catalog tag="www_webhare_dev" />
  </consilio>

  <backend>
    <webrule path="allroots:/.wh/devkit/" match="initial" router="js/wh-devkit/wh-devkit.ts#devkitRouter" />
  </backend>

  <moduleregistry>
    <string name="webhareuser"
            description="The user account for the developer on this server. Used when a command line tool needs to act as a WebHare user" />
  </moduleregistry>

  <rewriters xmlns="http://www.webhare.net/xmlns/dev/moduledefinition">
    <xmlrewriter getrulesfunction="lib/rewrite/platform-rewrites.whlib#GetWebharePlatformRewrites" priority="-100" />
    <rewritexmlfiles rootelement="http://www.webhare.net/xmlns/tollium/screens#screens" />
    <rewritexmlfiles rootelement="http://www.webhare.net/xmlns/publisher/siteprofile#siteprofile" />
    <rewritexmlfiles rootelement="http://www.webhare.net/xmlns/publisher/forms#formdefinitions" />
    <rewritexmlfiles rootelement="http://www.webhare.net/xmlns/wrd/schemadefinition#schemadefinition" />
    <rewritexmlfiles rootelement="http://www.webhare.net/xmlns/system/moduledefinition#module" />
    <rewritexmlfiles rootelement="http://www.webhare.net/xmlns/system/testinfo#group" />
    <rewritexmlfiles rootelement="http://www.webhare.net/xmlns/system/restapi#restapi" />
  </rewriters>

</module>
